/*!
 * jQuery JavaScript Library v1.8.3
 * http://jquery.com/
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * Copyright 2012 jQuery Foundation and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: Tue Nov 13 2012 08:20:33 GMT-0500 (Eastern Standard Time)
 */
/*
 FastClick: polyfill to remove click delays on browsers with touch UIs.

 @version 0.6.9
 @codingstandard ftlabs-jsv2
 @copyright The Financial Times Limited [All Rights Reserved]
 @license MIT License (see LICENSE.txt)
*/
function FastClick(e){var t,n=this;if(this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.lastTouchIdentifier=this.touchStartY=this.touchStartX=0,this.touchBoundary=10,this.layer=e,!e||!e.nodeType)throw new TypeError("Layer must be a document node");this.onClick=function(){return FastClick.prototype.onClick.apply(n,arguments)},this.onMouse=function(){return FastClick.prototype.onMouse.apply(n,arguments)},this.onTouchStart=function(){return FastClick.prototype.onTouchStart.apply(n,arguments)},this.onTouchMove=function(){return FastClick.prototype.onTouchMove.apply(n,arguments)},this.onTouchEnd=function(){return FastClick.prototype.onTouchEnd.apply(n,arguments)},this.onTouchCancel=function(){return FastClick.prototype.onTouchCancel.apply(n,arguments)},FastClick.notNeeded(e)||(this.deviceIsAndroid&&(e.addEventListener("mouseover",this.onMouse,!0),e.addEventListener("mousedown",this.onMouse,!0),e.addEventListener("mouseup",this.onMouse,!0)),e.addEventListener("click",this.onClick,!0),e.addEventListener("touchstart",this.onTouchStart,!1),e.addEventListener("touchmove",this.onTouchMove,!1),e.addEventListener("touchend",this.onTouchEnd,!1),e.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(e.removeEventListener=function(t,n,i){var r=Node.prototype.removeEventListener;"click"===t?r.call(e,t,n.hijacked||n,i):r.call(e,t,n,i)},e.addEventListener=function(t,n,i){var r=Node.prototype.addEventListener;"click"===t?r.call(e,t,n.hijacked||(n.hijacked=function(e){e.propagationStopped||n(e)}),i):r.call(e,t,n,i)}),"function"==typeof e.onclick&&(t=e.onclick,e.addEventListener("click",function(e){t(e)},!1),e.onclick=null))}function InfoBubble(e){this.extend(InfoBubble,google.maps.OverlayView),this.tabs_=[],this.activeTab_=null,this.baseZIndex_=100,this.isOpen_=!1;var t=e||{};void 0==t.backgroundColor&&(t.backgroundColor=this.BACKGROUND_COLOR_),void 0==t.borderColor&&(t.borderColor=this.BORDER_COLOR_),void 0==t.borderRadius&&(t.borderRadius=this.BORDER_RADIUS_),void 0==t.borderWidth&&(t.borderWidth=this.BORDER_WIDTH_),void 0==t.padding&&(t.padding=this.PADDING_),void 0==t.arrowPosition&&(t.arrowPosition=this.ARROW_POSITION_),void 0==t.disableAutoPan&&(t.disableAutoPan=!1),void 0==t.disableAnimation&&(t.disableAnimation=!1),void 0==t.minWidth&&(t.minWidth=this.MIN_WIDTH_),void 0==t.shadowStyle&&(t.shadowStyle=this.SHADOW_STYLE_),void 0==t.arrowSize&&(t.arrowSize=this.ARROW_SIZE_),void 0==t.arrowStyle&&(t.arrowStyle=this.ARROW_STYLE_),this.buildDom_(),this.setValues(t)}function initialize_confirmation_pending_form(e,t){$("#mistyped_email_link").click(function(){$("#password_forgotten").slideToggle("fast"),$("html, body").animate({scrollTop:$(document).height()},1e3),$("input.email").focus()});var n="#change_mistyped_email_form";$(n).validate({errorPlacement:function(e,t){e.insertAfter(t)},rules:{"person[email]":{required:!0,email:!0,remote:"/people/check_email_availability_and_validity"}},messages:{"person[email]":{remote:t}},onkeyup:!1,submitHandler:function(t){disable_and_submit(n,t,"false",e)}})}function disable_and_submit(e,t,n,i){disable_submit_button(e,i),t.submit()}function prepare_ajax_form(e,t,n){$(e).ajaxForm({dataType:"script",beforeSubmit:function(){return $(e).validate({rules:n}),1==$(e).valid()&&disable_submit_button(e,t),$(e).valid()}})}function disable_submit_button(e,t){$(e).find("button").attr("disabled","disabled"),jQuery.getJSON("/assets/locales/"+t+".json",function(t){$(e).find("button").text(t.please_wait)})}function auto_resize_text_areas(e){$("textarea."+e).autosize()}function translate_validation_messages(e){function t(e){return function(t){var n=ST.utils.findElementByName(t).val();return jQuery.validator.format(e,n)}}jQuery.getJSON("/assets/locales/"+e+".json",function(e){jQuery.extend(jQuery.validator.messages,{required:e.validation_messages.required,remote:e.validation_messages.remote,email:e.validation_messages.email,url:e.validation_messages.url,date:e.validation_messages.date,dateISO:e.validation_messages.dateISO,number:e.validation_messages.number,digits:e.validation_messages.digits,creditcard:e.validation_messages.creditcard,equalTo:e.validation_messages.equalTo,accept:e.validation_messages.accept,maxlength:jQuery.validator.format(e.validation_messages.maxlength),minlength:jQuery.validator.format(e.validation_messages.minlength),rangelength:jQuery.validator.format(e.validation_messages.rangelength),range:jQuery.validator.format(e.validation_messages.range),max:jQuery.validator.format(e.validation_messages.max),min:jQuery.validator.format(e.validation_messages.min),address_validator:jQuery.validator.format(e.validation_messages.address_validator),money:jQuery.validator.format(e.validation_messages.money),min_bound:t(e.validation_messages.min_bound),max_bound:t(e.validation_messages.max_bound),number_min:jQuery.validator.format(e.validation_messages.min),number_max:jQuery.validator.format(e.validation_messages.max),number_no_decimals:e.validation_messages.number_no_decimals,number_decimals:e.validation_messages.number_decimals,number_conditional_decimals:e.validation_messages.number})})}function add_validator_methods(){function e(e){return Number(e.replace(",","."))}function t(t){return e(t.val())}$.validator.setDefaults({ignore:[]}),$.validator.addMethod("accept",function(e){return e.match(new RegExp(/(\.jpe?g|\.gif|\.png|^$)/i))}),$.validator.addMethod("valid_username",function(e){return e.match(new RegExp("(^[A-Za-z0-9_]*$)"))}),$.validator.addMethod("regex",function(e,t,n){var i=new RegExp(n);return i.test(e)}),$.validator.addMethod("email_list",function(e){for(var t=e.split(","),n=new RegExp(/^[A-Z0-9._%\-\+\~\/]+@([A-Z0-9-]+\.)+[A-Z]+$/i),i=0;i<t.length;i++)if(!n.test($.trim(t[i])))return!1;return!0}),$.validator.addMethod("min_date",function(e,t,n){return"true"==n?get_datetime_from_datetime_select()>new Date:get_date_from_date_select()>new Date}),$.validator.addMethod("max_date",function(){var e=new Date,t=new Date(new Date(e).setMonth(e.getMonth()+6));return get_date_from_date_select()<t}),$.validator.addMethod("captcha",function(){challengeField=$("input#recaptcha_challenge_field").val(),responseField=$("input#recaptcha_response_field").val();var e=$.ajax({type:"GET",url:"signup/check_captcha",data:"recaptcha_challenge_field="+challengeField+"&amp;recaptcha_response_field="+responseField,async:!1}).responseText;return"success"==e?!0:(Recaptcha.reload(),!1)}),$.validator.addMethod("required_when_not_neutral_feedback",function(e){if(""==e)for(var t=new Array("1","2","4","5"),n=0;n<t.length;n++)if($("#grade-"+t[n]).is(":checked"))return!1;return!0}),$.validator.addMethod("positive_integer",function(e){var t=~~Number(e);return String(t)===e&&t>=0}),$.validator.addMethod("minimum_price_required",function(e,t,n){return""==n?!0:n<=100*ST.paymentMath.parseFloatFromFieldValue(e)}),$.validator.addMethod("money",function(e){var t=/^\d+((\.|\,)\d{0,2})?$/;return t.test(e)}),$.validator.addMethod("max_bound",function(n,i,r){var o=ST.utils.findElementByName(r);return Number(e(n))>t(o)}),$.validator.addMethod("min_bound",function(n,i,r){var o=ST.utils.findElementByName(r);return Number(e(n))<t(o)}),$.validator.addMethod("number_conditional_decimals",function(e,t,n){var i=ST.utils.findElementByName(n),r=i.is(":checked"),o=/^\d+?$/,a=/^\d+((\.|\,)\d+)?$/,s=r?a:o;return s.test(e)}),$.validator.addClassRules("required",{required:!0}),$.validator.addClassRules("number-no-decimals",{number_no_decimals:!0}),$.validator.addClassRules("number-decimals",{number_decimals:!0}),$.validator.addClassRules("url",{url:!0}),$.validator.addMethod("number_no_decimals",function(e){var t=/^\d+?$/;return 0===e.length?!0:t.test(e)}),$.validator.addMethod("number_decimals",function(e){var t=/^\d+((\.|\,)\d+)?$/;return 0===e.length?!0:t.test(e)}),$.validator.addMethod("number_min",function(t,n,i){return 0===t.length?!0:e(t)>=i}),$.validator.addMethod("number_max",function(t,n,i){return 0===t.length?!0:e(t)<=i})}function report_analytics_event(e){"undefined"!=typeof _gaq&&(_gaq.push(["_trackEvent"].concat(e)),"undefined"!=typeof secondary_analytics_in_use&&secondary_analytics_in_use&&_gaq.push(["b._trackEvent"].concat(e)))}function initialize_defaults(e){add_validator_methods(),translate_validation_messages(e),$(".flash-notifications").click(function(){$(".flash-notifications").fadeOut("slow")}),$(".ajax-notification").click(function(){$(".ajax-notification").fadeOut("slow")}),$("#login-toggle-button").click(function(){$("#upper_person_login").focus()})}function initialize_network_defaults(){enableSamePageScroll()}function initialize_admin_edit_price(e,t,n,i){translate_validation_messages(i),rules={},rules[t]={min_bound:n},rules[n]={max_bound:t},e.validate({rules:rules})}function initialize_user_feedback_form(){form_id="#new_feedback",$(form_id).validate({rules:{"feedback[email]":{required:!1,email:!0},"feedback[content]":{required:!0,minlength:1}}})}function initialize_email_members_form(){form_id="#new_member_email",auto_resize_text_areas("email_members_text_area"),$(form_id).validate({rules:{"email[subject]":{required:!0,minlength:2},"email[content]":{required:!0,minlength:2}}})}function initialize_login_form(e){1==e&&($("#password_forgotten").slideDown("fast"),$("html, body").animate({scrollTop:$(document).height()},1e3),$("input.request_password").focus()),$("#password_forgotten_link").click(function(){$("#password_forgotten").slideToggle("fast"),$("html, body").animate({scrollTop:$(document).height()},1e3),$("input.request_password").focus()}),$("#login_form input.text_field:first").focus()}function initialize_payments_form(e){var t="#payment_settings_form";$(t).validate({rules:{"checkout_account_form[company_id_or_personal_id]":{required:!0,minlength:9,maxlength:11},"checkout_account_form[phone_number]":{required:!0,maxlength:25},"checkout_account_form[organization_address]":{required:!0,minlength:6}},messages:{},onkeyup:!1,submitHandler:function(n){disable_and_submit(t,n,"false",e)}})}function initialize_braintree_account_form(e){var t="#braintree_account_form";$(t).validate({rules:{"braintree_account[first_name]":{required:!0},"braintree_account[last_name]":{required:!0},"braintree_account[email]":{required:!0,email:!0},"braintree_account[phone]":{required:!0},"braintree_account[address_street_address]":{required:!0},"braintree_account[address_postal_code]":{required:!0,minlength:2,maxlength:6},"braintree_account[address_locality]":{required:!0},"braintree_account[address_region]":{required:!0},"braintree_account[date_of_birth]":{required:!0},"braintree_account[routing_number]":{required:!0,minlength:9,maxlength:9},"braintree_account[account_number]":{required:!0}},messages:{},onkeyup:!1,submitHandler:function(n){disable_and_submit(t,n,"false",e)}})}function initialize_new_listing_form_selectors(e,t,n){var i=["category","subcategory","transaction_type"],r={category:null,subcategory:null,transaction_type:null};update_listing_form_view(e,t,n,i,r),$(".new-listing-form").find("a.select").click(function(){select_listing_form_menu_link($(this),e,t,n,i,r)})}function select_listing_form_menu_link(e,t,n,r,o,a){if(e.hasClass("option"))a[e.parent().attr("name")]=e.attr("data-id");else for(a[e.parent().attr("name")]=null,index_found=!1,i=0;i<o.length;i++)o[i]==e.parent().attr("name")&&(index_found=!0),1==index_found&&(a[o[i]]=null);update_listing_form_view(t,n,r,o,a)}function update_listing_form_view(e,t,n,i,r){$("a.selected").addClass("hidden"),$("a.option").addClass("hidden"),$(".form-fields").html(""),$(".selected-group").each(function(){null!=r[$(this).attr("name")]&&$(this).find("a.selected[data-id="+r[$(this).attr("name")]+"]").removeClass("hidden")});var o="";should_show_menu_for("category",r,t)?(o=n.category,display_option_group("category",r,t)):should_show_menu_for("subcategory",r,t)?(o=n.subcategory,display_option_group("subcategory",r,t)):should_show_menu_for("transaction_type",r,t)?(o=n.transaction_type,display_option_group("transaction_type",r,t)):display_listing_form(r,e),$("h2.listing-form-title").html(o)}function should_show_menu_for(e,t,n){if(attribute_selected(e,t))return!1;if("category"==e)return n.length<2?(1==n.length&&(t.category=n[0].id),!1):!0;if("subcategory"==e){if(should_show_menu_for("category",t,n))return!1;var i=get_subcategories_for(t.category,n);return i.length<2?(1==i.length&&(t.subcategory=i[0].id),!1):!0}return"transaction_type"==e?should_show_menu_for("category",t,n)?!1:should_show_menu_for("subcategory",t,n)?!1:(transaction_types=attribute_selected("subcategory",t)?get_transaction_types_for_subcategory(t.category,t.subcategory,n):get_transaction_types_for_category(t.category,n),1===transaction_types.length&&(t.transaction_type=transaction_types[0].id),transaction_types.length>1):void 0}function attribute_selected(e,t){return null!=t[e]}function get_subcategories_for(e,t){return _.chain(t).filter(function(t){return t.id==e}).filter(function(e){return void 0!=e.subcategories}).map(function(e){return e.subcategories}).flatten().value()}function get_transaction_types_for_category(e,t){var n=find_by_id(Number(e),t);return n.transaction_types}function get_transaction_types_for_subcategory(e,t,n){var i=find_by_id(Number(e),n),r=find_by_id(Number(t),i.subcategories);return r.transaction_types}function find_by_id(e,t){return _.find(t,function(t){return t.id===e})}function display_option_group(e,t,n){$(".option-group[name="+e+"]").children().each(function(){"category"==e?$(this).removeClass("hidden"):"subcategory"==e?has_subcategory(t.category,$(this).attr("data-id"),n)&&$(this).removeClass("hidden"):"transaction_type"==e&&has_transaction_type(t,$(this).attr("data-id"),n)&&$(this).removeClass("hidden")})}function has_subcategory(e,t,n){var i=get_subcategories_for(e,n);return _.any(i,function(e){return e.id==t})}function has_transaction_type(e,t,n){if(attribute_selected("subcategory",e))var i=get_transaction_types_for_subcategory(e.category,e.subcategory,n);else var i=get_transaction_types_for_category(e.category,n);return _.any(i,function(e){return e.id==t})}function display_listing_form(e,t){$(".form-fields").removeClass("hidden");var n="/"+t+"/listings/new";$.get(n,e,function(e){$(".form-fields").html(e)})}function initialize_new_listing_form(e,t,n,i,r,o,a,s,u,l,c){$("#help_valid_until_link").click(function(){$("#help_valid_until").lightbox_me({centered:!0,zIndex:1e6})}),$("input.title_text_field:first").focus(),form_id="false"==o?"#new_listing":"#edit_listing_"+o;var d=null;d="true"==a?!0:!1;var f=c.reduce(function(e,t){var n=ST.utils.findElementByName(t),i=n.data("min"),r=n.data("max");return e[t]={number_min:i,number_max:r},e},{});ST.listingForm=$(form_id).validate({errorPlacement:function(e,t){if("listing[valid_until(1i)]"==t.attr("name"))e.appendTo(t.parent());else if("listing[price]"==t.attr("name"))e.appendTo(t.parent());else if($(t).hasClass("custom_field_checkbox")){var n=$(t).closest(".checkbox-group-container");e.insertAfter(n)}else e.insertAfter(t)},debug:!1,rules:_.extend(f,{"listing[title]":{required:!0,maxlength:60},"listing[origin]":{address_validator:!0},"listing[price]":{required:d,money:!0,minimum_price_required:u},"listing[valid_until(1i)]":{min_date:!0,max_date:!0}}),messages:{"listing[valid_until(1i)]":{min_date:r,max_date:r},"listing[price]":{minimum_price_required:l}},onkeyup:!1,onclick:!1,onfocusout:!1,onsubmit:!0,submitHandler:function(e){report_analytics_event(["listing","created"]),disable_and_submit(form_id,e,"false",n)}}),set_textarea_maxlength(),auto_resize_text_areas("listing_description_textarea")}function initialize_send_message_form(e,t){auto_resize_text_areas("text_area"),$("textarea").focus();var n="#new_listing_conversation";$(n).validate({rules:{"listing_conversation[title]":{required:!0,minlength:1,maxlength:120},"listing_conversation[content]":{required:!0,minlength:1}},submitHandler:function(i){disable_and_submit(n,i,"false",e),report_analytics_event(["message","sent",t])}})}function initialize_send_person_message_form(e,t){auto_resize_text_areas("text_area"),$("textarea").focus();var n="#new_conversation";$(n).validate({rules:{"conversation[message_attributes][content]":{required:!0,minlength:1}},submitHandler:function(i){disable_and_submit(n,i,"false",e),report_analytics_event(["message","sent",t])}})}function initialize_reply_form(e){auto_resize_text_areas("reply_form_text_area"),$("textarea").focus(),prepare_ajax_form("#new_message",e,{"message[content]":{required:!0,minlength:1}})}function initialize_listing_view(e){$("#listing-image-link").click(function(){$("#listing-image-lightbox").lightbox_me({centered:!0,zIndex:1e6})}),auto_resize_text_areas("listing_comment_content_text_area"),$("textarea").focus(),prepare_ajax_form("#new_comment",e,{"comment[content]":{required:!0,minlength:1}}),$("#send_comment_button").click(function(){report_analytics_event(["listing","commented"])})}function initialize_accept_transaction_form(e,t,n,i,r,o){function a(){update_complex_form_price_fields(e,t)}auto_resize_text_areas("text_area"),style_action_selectors(),null!=e&&("simple"===n?($(".trigger-focusout").keyup(function(){update_simple_form_price_fields(e)}),$(i).validate({rules:{"listing_conversation[payment_attributes][sum]":{money:!0,minimum_price_required:r}},messages:{"listing_conversation[payment_attributes][sum]":{minimum_price_required:o}}})):($(".trigger-focusout").focusout(a),a()))}function updateSellerGetsValue(e,t,n,i,r){function o(){var e=ST.paymentMath.parseFloatFromFieldValue($input.val()),t=e-ST.paymentMath.totalCommission(e,i,r),n=$currency.val();t=0>t?0:t,$display.text([ST.paymentMath.displayMoney(t),n].join(" "))}$display=$(t),$input=$(e),$currency=$(n),$input.keyup(o),$currency.change(o),o()}function update_simple_form_price_fields(e){var t=ST.paymentMath.parseFloatFromFieldValue($(".invoice-sum-field").val()),n=ST.paymentMath.totalCommission(t,e,0,0),i=t-n;$("#service-fee").text(ST.paymentMath.displayMoney(n)),$("#payment-to-seller").text(ST.paymentMath.displayMoney(i))}function update_complex_form_price_fields(e,t){var n="\u20ac",i=$(".field-row").toArray().map(function(e){var e=$(e),t=e.find(".payment-row-sum-field"),n=e.find(".payment-row-vat-field"),i=e.find(".total-label"),r=ST.paymentMath.parseFloatFromFieldValue(t.val()),o=ST.paymentMath.parseFloatFromFieldValue(n.val());o=Math.min(Math.max(o,0),100);var a=r+r*o/100;return{totalEl:i,sumWithVat:a}}),r=i.reduce(function(e,t){return e+t.sumWithVat},0),o=ST.paymentMath.totalCommission(r,e),a=o/(1+t/100),s=r-o;i.forEach(function(e){e.totalEl.text(e.sumWithVat.toFixed(2)+n)}),$("#service-fee-sum").text(a.toFixed(2)+n),$("#service-fee-total").text(o.toFixed(2)+n),$("#total").text(s.toFixed(2)+n)}function initialize_confirm_transaction_form(){style_action_selectors()}function style_action_selectors(){$(".conversation-action").each(function(){$(this).find("label").hide(),$(this).find(".conversation-action").each(function(){$(this).removeClass("hidden"),$(this).click(function(){var e=$(this).attr("id");$(this).siblings().removeClass("accept").removeClass("reject").removeClass("confirm").removeClass("cancel"),$(".confirm-description").addClass("hidden"),$(".cancel-description").addClass("hidden"),$("."+e+"-description").removeClass("hidden"),$(".conversation-price").addClass("hidden"),$("."+e+"-price").removeClass("hidden"),$(".hidden-accept-form").addClass("hidden"),$(".visible-when-"+e).removeClass("hidden"),$(this).addClass(e),$(".conversation-action").find("input:radio[id="+$(this).attr("name")+"]").attr("checked",!0),$("#conversation_message_attributes_action").val(e),$("#conversation_status").val(e+"ed")})})})}function initialize_give_feedback_form(e,t){auto_resize_text_areas("text_area"),$("textarea").focus(),style_grade_selectors();var n="#new_testimonial";$(n).validate({errorPlacement:function(e,t){"testimonial[grade]"==t.attr("name")?e.appendTo(t.parent().parent()):e.insertAfter(t)},rules:{"testimonial[grade]":{required:!0},"testimonial[text]":{required:!0}},messages:{"testimonial[grade]":{required:t}},submitHandler:function(t){disable_and_submit(n,t,"false",e)}})}function style_grade_selectors(){$(".feedback-grade").each(function(){$(this).find("label").hide(),$(this).find(".grade").each(function(){$(this).removeClass("hidden"),$(this).click(function(){$(this).siblings().removeClass("negative").removeClass("positive"),$(this).addClass($(this).attr("id")),$(".feedback-grade").find("input:radio[id="+$(this).attr("name")+"]").attr("checked",!0)})})})}function initialize_signup_form(e,t,n,i,r,o,a,s){$("#help_invitation_code_link").click(function(){$("#help_invitation_code").lightbox_me({centered:!0,zIndex:1e6})}),$("#terms_link").click(function(e){e.preventDefault(),$("#terms").lightbox_me({centered:!0,zIndex:1e6})});var u="#new_person";$(u).validate({errorPlacement:function(e,t){"person[terms]"==t.attr("name")?e.appendTo(t.parent().parent()):"recaptcha_response_field"==t.attr("name")?e.appendTo(t.parent().parent().parent().parent().parent().parent().parent().parent().parent()):e.insertAfter(t)},rules:{"person[username]":{required:!0,minlength:3,maxlength:20,valid_username:!0,remote:"/people/check_username_availability"},"person[given_name]":{required:a,maxlength:30},"person[family_name]":{required:a,maxlength:30},"person[email]":{required:!0,email:!0,remote:"/people/check_email_availability_and_validity"},"person[terms]":"required","person[password]":{required:!0,minlength:4},"person[password2]":{required:!0,minlength:4,equalTo:"#person_password1"},recaptcha_response_field:{required:!0,captcha:!0},invitation_code:{required:s,remote:"/people/check_invitation_code"}},messages:{recaptcha_response_field:{captcha:r},"person[username]":{valid_username:n,remote:t},"person[email]":{remote:i},invitation_code:{remote:o}},onkeyup:!1,submitHandler:function(t){disable_and_submit(u,t,"false",e),report_analytics_event(["user","signed up","normal form"])}})}function initialize_terms_form(){$("#terms_link").click(function(e){e.preventDefault(),$("#terms").lightbox_me({centered:!0,zIndex:1e6})})}function initialize_payment_gateway_terms_lightbox(e){$("#"+e+"_terms_link").click(function(t){t.preventDefault(),$("#"+e+"_terms").lightbox_me({centered:!0,zIndex:1000001})})}function initialize_update_profile_info_form(e,t,n){auto_resize_text_areas("update_profile_description_text_area"),$("input.text_field:first").focus();var i="#edit_person_"+t;$(i).validate({rules:{"person[street_address]":{required:!1,address_validator:!0},"person[given_name]":{required:n,maxlength:30},"person[family_name]":{required:n,maxlength:30},"person[phone_number]":{required:!1,maxlength:25},"person[image]":{accept:"(jpe?g|gif|png)"}},onkeyup:!1,onclick:!1,onfocusout:!1,onsubmit:!0,submitHandler:function(t){disable_and_submit(i,t,"false",e)}})}function initialize_update_notification_settings_form(e,t){var n="#edit_person_"+t;$(n).validate({submitHandler:function(t){disable_and_submit(n,t,"false",e)}})}function initialize_update_account_info_form(e,t,n,i,r){$(".account-new-email-link").click(function(e){e.preventDefault(),$(".account-new-email-link").hide(),$(".account-settings-hidden-email-form").show(),$("#person_email_attributes_address").removeAttr("disabled"),$("#person_email_attributes_send_notifications").removeAttr("disabled")}),$(".account-hide-new-email-link").click(function(e){e.preventDefault(),$(".account-new-email-link").show(),$(".account-settings-hidden-email-form").hide(),$("#person_email_attributes_address").attr("disabled","disabled"),$("#person_email_attributes_send_notifications").attr("disabled","disabled")}),$("#account_password_link").toggle(function(){$("#account_password_form").show(),$(this).text(n),$("#person_password").focus()},function(){$("#account_password_form").hide(),$(this).text(t)});var o="#email_form";$(o).validate({errorPlacement:function(e,t){e.insertAfter("person[send_notifications][]"==t.attr("name")?$("#account-settings-email-content-rows"):t)},rules:{"person[email_attributes][address]":{required:!0,email:!0,remote:"/people/check_email_availability"},"person[send_notifications][]":{required:!0}},messages:{"person[email_attributes][address]":{remote:i},"person[send_notifications][]":{required:r}},submitHandler:function(t){disable_and_submit(o,t,"false",e)}});var a="#password_form";$(a).validate({rules:{"person[password]":{required:!0,minlength:4},"person[password2]":{required:!0,minlength:4,equalTo:"#person_password"}},submitHandler:function(t){disable_and_submit(a,t,"false",e)}})}function initialize_reset_password_form(){var e="#new_person";$(e).validate({errorPlacement:function(e,t){e.insertAfter(t)},rules:{"person[password]":{required:!0,minlength:4},"person[password_confirmation]":{required:!0,minlength:4,equalTo:"#person_password"}},submitHandler:function(t){disable_and_submit(e,t,"false",locale)}})}function initialize_profile_view(e){$("#load-more-listings a").on("click",function(){var e=$(this).data().url;return $.get(e,function(e){$("#profile-listings-list").html(e)}),!1}),$("#load-more-followed-people").on("ajax:complete",function(e,t){$("#profile-followed-people-list").html(t.responseText),$(this).hide()}),$("#load-more-testimonials").click(function(){return request_path=e+"/testimonials",$.get(request_path,{per_page:200,page:1},function(e){$("#profile-testimonials-list").html(e)}),!1}),$("#description_preview_link").click(function(){$("#profile_description_preview").hide(),$("#profile_description_full").show()}),$("#description_full_link").click(function(){$("#profile_description_preview").show(),$("#profile_description_full").hide()}),$("#trustcloud_description_link").click(function(){$("#trustcloud_description").lightbox_me({centered:!0})})}function initialize_homepage(){$(".map-button").click(function(){return $("#hidden-map-toggle").val(!0),$("#homepage-filters").submit(),!1}),$(".list-button").click(function(){return $("#hidden-map-toggle").val(void 0),$("#homepage-filters").submit(),!1})}function initialize_invitation_form(e,t){$("#new_invitation").validate({rules:{"invitation[email]":{required:!0,email_list:!0},"invitation[message]":{required:!1,maxlength:5e3}},messages:{"invitation[email]":{email_list:t}},onkeyup:!1,onclick:!1,onfocusout:!1,onsubmit:!0,submitHandler:function(t){disable_and_submit("#new_invitation",t,"false",e)}})}function initialize_private_community_defaults(e){add_validator_methods(),translate_validation_messages(e),$("select.language_select").selectmenu({style:"dropdown",width:"100px"}),$("#close_notification_link").click(function(){$("#notifications").slideUp("fast")}),$(".wrapper").addClass("js_enabled")}function initialize_admin_edit_tribe_form(e,t){auto_resize_text_areas("new_tribe_text_area"),translate_validation_messages(e),$("#invite_only_help_text_link").click(function(){$("#invite_only_help_text").lightbox_me({centered:!0})});var n="#edit_community_"+t;$(n).validate({rules:{"community[name]":{required:!0,minlength:2,maxlength:50},"community[slogan]":{required:!0,minlength:2,maxlength:100},"community[description]":{required:!0,minlength:2}},submitHandler:function(t){disable_and_submit(n,t,"false",e)}})}function initialize_admin_edit_tribe_look_and_feel_form(e,t,n){translate_validation_messages(e);var i="#edit_community_"+t;$(i).validate({rules:{"community[custom_color1]":{required:!1,minlength:6,maxlength:6,regex:"^([a-fA-F0-9]+)?$"}},messages:{"community[custom_color1]":{regex:n}},submitHandler:function(t){disable_and_submit(i,t,"false",e)}})}function initialize_admin_social_media_form(e,t,n,i,r){translate_validation_messages(e);var o="#edit_community_"+t;$(o).validate({rules:{"community[twitter_handle]":{required:!1,minlength:1,maxlength:15,regex:"^([A-Za-z0-9_]+)?$"},"community[facebook_connect_id]":{required:!1,minlength:1,maxlength:16,regex:"^([0-9]+)?$"},"community[facebook_connect_secret]":{required:!1,minlength:32,maxlength:32,regex:"^([a-f0-9]+)?$"}},messages:{"community[twitter_handle]":{regex:n},"community[facebook_connect_id]":{regex:i},"community[facebook_connect_secret]":{regex:r}},submitHandler:function(t){disable_and_submit(o,t,"false",e)}})}function initialize_admin_listing_field_form_view(e,t,n,i){translate_validation_messages(e);var r=($(t),"custom_field[category_attributes][][category_id]"),o="custom_field[min]",a="custom_field[max]",s="custom_field[allow_decimals]",u={};u[r]={required:!0},u[o]={min_bound:a,number_conditional_decimals:s},u[a]={max_bound:o,number_conditional_decimals:s},$(t).validate({rules:u,errorPlacement:function(e,t){if(t.attr("name")===r){var n=$("#custom-field-categories-container");e.insertAfter(n)}else e.insertAfter(t)},submitHandler:function(n){disable_and_submit(t,n,"false",e)}}),window.ST=window.ST||{},ST.newOptionAdded=function(e,t,n,i){function r(){o=a>t,$links=$(i),$links.addClass(o?"enabled":"disabled"),$links.removeClass(o?"disabled":"enabled")}var o,a=e;return r(),$(n).on("click",i,function(e){if(e.preventDefault(),o){var t=$(e.currentTarget),n=t.closest(".custom-field-option-container");n.remove(),ST.customFieldOptionOrder.remove(n.data("field-id")),a-=1,r()}}),{add:function(){a+=1,r()}}}(n,i,"#options",".custom-field-option-remove").add}function initialize_admin_category_form_view(e,t){translate_validation_messages(e);var n=($(t),"category[transaction_type_attributes][][transaction_type_id]"),i={};i[n]={required:!0},$(t).validate({rules:i,errorPlacement:function(e,t){if(t.attr("name")===n){var i=$("#category-transaction-types-container");e.insertAfter(i)}else e.insertAfter(t)},submitHandler:function(n){disable_and_submit(t,n,"false",e)}})}function initialize_new_community_membership_form(e,t,n){$("#help_invitation_code_link").click(function(){$("#help_invitation_code").lightbox_me({centered:!0,zIndex:1e6})}),$("#terms_link").click(function(e){e.preventDefault(),$("#terms").lightbox_me({centered:!0,zIndex:1e6})}),$("#new_community_membership").validate({errorPlacement:function(e,t){"community_membership[consent]"==t.attr("name")?e.appendTo(t.parent().parent()):e.insertAfter(t)},rules:{"community_membership[email]":{required:!0,email:!0,remote:"/people/check_email_availability_and_validity"},"community_membership[consent]":{required:!0},invitation_code:{required:t,remote:"/people/check_invitation_code"}},messages:{"community_membership[email]":{remote:e},invitation_code:{remote:n}}})}function initialize_braintree_preauthorize_form(e,t){$("#transaction-agreement-read-more").click(function(){$("#transaction-agreement-content").lightbox_me({centered:!0,zIndex:1e6})});var n={errorPlacement:function(e,t){"listing_conversation[contract_agreed]"==t.attr("name")?e.appendTo(t.parent().parent()):e.insertAfter(t)}};validateBraintreeForm(e,t,n)}function initialize_braintree_payment_form(e,t){validateBraintreeForm(e,t)}function validateBraintreeForm(e,t,n){n=n||{},t=t||function(e){e()};var i="#braintree-payment-form",r={rules:{"braintree_payment[cardholder_name]":{required:!0,minlength:2,maxlength:50},"braintree_payment[credit_card_number]":{required:!0,creditcard:!0},"braintree_payment[cvv]":{required:!0,digits:!0,minlength:3,maxlength:4}},submitHandler:function(n){t(function(){disable_and_submit(i,n,"false",e)})}},o=_.defaults(n,r);$(i).validate(o)}function set_textarea_maxlength(){var e=[8,9,13,33,34,35,36,37,38,39,40,46],t="keypress";$("textarea[maxlength]").live(t,function(){var t=$(this),n=t.attr("maxlength"),i=$.data(this,"keycode");return n&&n>0?t.val().length<n||-1!==$.inArray(i,e):void 0}).live("keydown",function(e){$.data(this,"keycode",e.keyCode||e.which)})}function get_date_from_date_select(){return year=$("#listing_valid_until_1i").val(),month=$("#listing_valid_until_2i").val(),day=$("#listing_valid_until_3i").val(),date=new Date(year,month-1,day,"23","59","58"),date}function get_datetime_from_datetime_select(){return year=$("#listing_valid_until_1i").val(),month=$("#listing_valid_until_2i").val(),day=$("#listing_valid_until_3i").val(),hours=$("#listing_valid_until_4i").val(),minutes=$("#listing_valid_until_5i").val(),date=new Date(year,month-1,day,hours,minutes),date}function enableSamePageScroll(){function e(e){return e.replace(/^\//,"").replace(/(index|default).[a-zA-Z]{3,4}$/,"").replace(/\/$/,"")}function t(){for(var e=0,t=arguments.length;t>e;e++){var n=arguments[e],i=$(n);if(i.scrollTop()>0)return n;i.scrollTop(1);var r=i.scrollTop()>0;if(i.scrollTop(0),r)return n}return[]}var n=e(location.pathname),i=t("html","body");$("a[href*=#]").each(function(){var t=e(this.pathname)||n;if(n==t&&(location.hostname==this.hostname||!this.hostname)&&this.hash.replace(/#/,"")){var r=$(this.hash),o=this.hash;if(o){var a=r.offset().top;$(this).click(function(e){e.preventDefault(),$(i).animate({scrollTop:a},400,function(){location.hash=o})})}}})}function timed_input(e){clearTimeout(timer),invalid_locations(),timer=setTimeout(function(){update_map(e)
},1500)}function timed_input_on_route(){clearTimeout(timer),invalid_locations("listing_origin_loc_attributes"),invalid_locations("listing_destination_loc_attributes"),timer=setTimeout(function(){startRoute()},1500)}function googlemapMarkerInit(e,t,n,i,r,o,a){prefix=t,textfield=n,void 0==i&&(i=!1);var s=document.getElementById(prefix+"_latitude"),u=document.getElementById(prefix+"_longitude"),l=!0,c={zoom:12,streetViewControl:!1,mapTypeControl:!1,mapTypeId:google.maps.MapTypeId.ROADMAP};map=new google.maps.Map(document.getElementById(e),c),""!=s.value?setMapCenter(s.value,u.value,!0):setMapCenter(r,o,!1),geocoder=new google.maps.Geocoder,""!=s.value?markerPosition=new google.maps.LatLng(s.value,u.value):(markerPosition=defaultCenter,l=!1),marker=new google.maps.Marker({map:map,draggable:i,animation:google.maps.Animation.DROP,position:markerPosition}),infowindow=new google.maps.InfoWindow,void 0!=a&&google.maps.event.addListener(marker,"click",function(){infowindow.close(),infowindow.setContent(a),infowindow.open(map,marker)}),i&&(google.maps.event.addListener(map,"click",function(e){marker.setPosition(e.latLng),marker.setVisible(!0),geocoder.geocode({latLng:e.latLng},update_source)}),google.maps.event.addListener(marker,"dragend",function(){geocoder.geocode({latLng:marker.getPosition()},update_source)})),l||marker.setVisible(!1)}function update_map(e){return geocoder?void geocoder.geocode({address:e.value},function(e,t){t==google.maps.GeocoderStatus.OK?(marker.setVisible(!0),map.setCenter(e[0].geometry.location),marker.setPosition(e[0].geometry.location),update_model_location(e)):(marker.setVisible(!1),nil_locations())}):!1}function update_source(e,t){t==google.maps.GeocoderStatus.OK?(update_model_location(e),source=document.getElementById(textfield),source.value=e[0].formatted_address):(marker.setPosition(new google.maps.LatLng(60.1894,24.8358)),marker.setVisible(!1),nil_locations())}function manually_validate(e){var t=e.split("_"),n="#",i="#";t[0].match("person")?(n+="person_settings_form",i+="person_street_address"):t[0].match("community")?(n+="new_tribe_form",i+="community_address"):t[0].match("listing")&&(n+="new_listing_form",t[1].match("origin")?i+="listing_origin":t[1].match("destination")&&(i+="listing_destination")),$(n).validate().element(i)}function nil_locations(e){e||(e=prefix);var t=document.getElementById(e+"_address"),n=document.getElementById(e+"_latitude"),i=document.getElementById(e+"_longitude"),r=document.getElementById(e+"_google_address");t.value=null,n.value=null,i.value=null,r.value=null,manually_validate(e)}function invalid_locations(e){e||(e=prefix);var t=document.getElementById(e+"_latitude");t.value=null}function update_model_location(e,t){t||(t=prefix);var n=document.getElementById(t+"_address"),i=document.getElementById(t+"_latitude"),r=document.getElementById(t+"_longitude"),o=document.getElementById(t+"_google_address");n.value=e[0].formatted_address,i.value=e[0].geometry.location.lat(),r.value=e[0].geometry.location.lng(),o.value=e[0].formatted_address,manually_validate(t)}function googlemapRouteInit(e){geocoder=new google.maps.Geocoder,directionsService=new google.maps.DirectionsService,defaultCenter=new google.maps.LatLng(60.17,24.94);var t={mapTypeId:google.maps.MapTypeId.ROADMAP,disableDefaultUI:!1,streetViewControl:!1,mapTypeControl:!1};map=new google.maps.Map(document.getElementById(e),t);var n={animation:google.maps.Animation.DROP};directionsDisplay=new google.maps.DirectionsRenderer({map:map,hideRouteList:!0,preserveViewport:!1,draggable:!1,markerOptions:n}),google.maps.event.addListener(directionsDisplay,"directions_changed",function(){currentDirections||(currentDirections=directionsDisplay.getDirections())})}function startRoute(e,t){var n=document.getElementById("listing_origin").value,i=document.getElementById("listing_destination").value;directionsDisplay.setMap(map),document.getElementById("listing_origin_loc_attributes_address").value=n,document.getElementById("listing_destination_loc_attributes_address").value=i,""!=n&&""!=i?calcRoute(n,i):(removeRoute(),""==n&&""==i&&(setMapCenter(e,t,!0),map.setZoom(12)))}function wrongLocationRoute(e){document.getElementById(e).value="Address not found",document.getElementById(e+"_loc_attributes_address").value=null,document.getElementById(e+"_loc_attributes_google_address").value=null,document.getElementById(e+"_loc_attributes_latitude").value=null,document.getElementById(e+"_loc_attributes_longitude").value=null}function wipeFieldsRoute(e){document.getElementById(e+"_loc_attributes_address").value=null,document.getElementById(e+"_loc_attributes_google_address").value=null,document.getElementById(e+"_loc_attributes_latitude").value=null,document.getElementById(e+"_loc_attributes_longitude").value=null}function removeRoute(){directionsDisplay.setMap(null)}function showRoute(e,t){var n=e,i=t,r={origin:n,destination:i,travelMode:google.maps.DirectionsTravelMode.DRIVING,unitSystem:google.maps.DirectionsUnitSystem.METRIC};directionsService.route(r,function(e,t){t==google.maps.DirectionsStatus.OK&&directionsDisplay.setDirections(e)})}function route_not_found(e,t){e?geocoder.geocode({address:e},function(e,t){t!=google.maps.GeocoderStatus.OK?(nil_locations("listing_origin_loc_attributes"),removeRoute()):update_model_location(e,"listing_origin_loc_attributes")}):nil_locations("listing_origin_loc_attributes"),t?geocoder.geocode({address:t},function(e,t){t!=google.maps.GeocoderStatus.OK?(nil_locations("listing_destination_loc_attributes"),removeRoute()):(update_model_location(e,"listing_destination_loc_attributes"),calcRoute(foo,bar))}):nil_locations("listing_destination_loc_attributes")}function calcRoute(e,t){var n=e,i=t;if(e.match(t))removeRoute();else{var r={origin:n,destination:i,travelMode:google.maps.DirectionsTravelMode.DRIVING,unitSystem:google.maps.DirectionsUnitSystem.METRIC};directionsService.route(r,function(n,i){i==google.maps.DirectionsStatus.OK?(directionsDisplay.setDirections(n),updateEditTextBoxes()):(removeRoute(),route_not_found(e,t))})}}function updateEditTextBoxes(){var e=directionsDisplay.getDirections().routes[0].legs[0].start_address,t=directionsDisplay.getDirections().routes[0].legs[0].end_address;document.getElementById("listing_origin_loc_attributes_google_address").value=e,document.getElementById("listing_destination_loc_attributes_google_address").value=t,document.getElementById("listing_origin_loc_attributes_latitude").value=directionsDisplay.getDirections().routes[0].legs[0].start_location.lat(),document.getElementById("listing_origin_loc_attributes_longitude").value=directionsDisplay.getDirections().routes[0].legs[0].start_location.lng(),document.getElementById("listing_destination_loc_attributes_latitude").value=directionsDisplay.getDirections().routes[0].legs[0].end_location.lat(),document.getElementById("listing_destination_loc_attributes_longitude").value=directionsDisplay.getDirections().routes[0].legs[0].end_location.lng(),manually_validate("listing_destination"),manually_validate("listing_origin")}function addCommunityMarkers(){markerContents=[],markers=[];var e="/en/tribes";$.getJSON(e,{dataType:"json"},function(e){var t=e.data;for(i in t)!function(){var e=t[i];if(markerContents[i]=e.id,e.latitude){var n;n=new google.maps.LatLng(e.latitude,e.longitude);var r=new google.maps.Marker({position:n,title:e.name,map:map,icon:"/assets/dashboard/map_icons/tribe.png"});markers.push(r),markersArr.push(r);{i}google.maps.event.addListener(r,"click",function(){infowindow.close(),showingMarker==r.getTitle()?showingMarker="":(showingMarker=r.getTitle(),infowindow.setContent("<div id='map_bubble'><div style='text-align: center; width: 360px; height: 70px; padding-top: 25px;'><img src='https://s3.amazonaws.com/sharetribe/assets/ajax-loader-grey.gif'></div></div>"),infowindow.open(map,r),$.get("/en/tribes/"+e.id,function(e){$("#map_bubble").html(e)}))}),google.maps.event.addListener(infowindow,"closeclick",function(){showingMarker=""})}}()})}function initialize_listing_map(e,t,n,i,r){locale=i,infowindow=new InfoBubble({shadowStyle:0,borderRadius:5,borderWidth:1,arrowPosition:30,arrowStyle:0,padding:0,maxHeight:150,maxWidth:200,hideCloseButton:!0}),$(window).width()>=768?(infowindow.setMinHeight(235),infowindow.setMinWidth(425)):(infowindow.setMinHeight(150),infowindow.setMinWidth(225)),directionsService=new google.maps.DirectionsService,directionsDisplay=new google.maps.DirectionsRenderer,directionsDisplay.setOptions({suppressMarkers:!0}),helsinki=new google.maps.LatLng(60.17,24.94),flagMarker=new google.maps.Marker;var o={zoom:13,mapTypeId:google.maps.MapTypeId.ROADMAP};map=new google.maps.Map(document.getElementById("map-canvas"),o);var a="true"===r;addListingMarkers(e,t,n,a)}function setMapCenter(e,t,n){function i(){map.setCenter(o?new google.maps.LatLng(e,t):new google.maps.LatLng(0,0))}function r(e){map.setCenter(new google.maps.LatLng(e.coords.latitude,e.coords.longitude))}var o=e&&t,a=o&&n;a?map.setCenter(new google.maps.LatLng(e,t)):navigator.geolocation?navigator.geolocation.getCurrentPosition(r,i):i()}function addListingMarkers(e){markerContents=[],markers=[];for(i in e)!function(){var t=e[i];if(t.latitude){var n;n=new google.maps.LatLng(t.latitude,t.longitude);var r=new google.maps.Marker({position:n,title:t.title}),o=new Label({map:map});o.set("zIndex",1234),o.bindTo("position",r,"position"),o.set("text",""),o.set("color","#FFF"),r.set("label",o),markers.push(r),markerContents.push(t.id),markersArr.push(r);{i}google.maps.event.addListener(map,"mousedown",function(){infowindow.close(),showingMarker=""}),google.maps.event.addListener(r,"click",function(){infowindow.close(),directionsDisplay.setMap(null),flagMarker.setOptions({map:null}),showingMarker==r.getTitle()?showingMarker="":(showingMarker=r.getTitle(),infowindow.setContent("<div id='map_bubble'><img class='bubble-loader-gif' src='https://s3.amazonaws.com/sharetribe/assets/ajax-loader-grey.gif'></div>"),infowindow.setMaxHeight(150),infowindow.setMinHeight(150),infowindow.open(map,r),$.get("/"+locale+"/listing_bubble/"+t.id,function(e){$("#map_bubble").html(e)}))})}}();var t=_(e).pluck("latitude").filter().map(Number).value(),n=_(e).pluck("longitude").filter().map(Number).value();t.length&&n.length&&map.fitBounds(new google.maps.LatLngBounds(new google.maps.LatLng(_.min(t),_.min(n)),new google.maps.LatLng(_.max(t),_.max(n)))),markerCluster=new MarkerClusterer(map,markers,markerContents,infowindow,showingMarker,locale,{})}function clearMarkers(){if(markersArr)for(i in markersArr)markersArr[i].setMap(null);if(directionsDisplay.setMap(null),flagMarker.setOptions({map:null}),markerCluster&&(markerCluster.resetViewport(!0),markerCluster.clearMarkers(),delete markerCluster,markerCluster=null),markers)for(n in markers)markers[n].setMap(null)}function Label(e){this.setValues(e);var t=this.span_=document.createElement("span");t.style.cssText="position: relative; left: -50%; top: -10px; white-space: nowrap;padding: 2px;font-family: Arial; font-weight: bold;font-size: 12px;";var n=this.div_=document.createElement("div");n.appendChild(t),n.style.cssText="position: absolute; display: none"}function initialize_labels(){Label.prototype=new google.maps.OverlayView,Label.prototype.onAdd=function(){var e=this.getPanes().overlayImage;e.appendChild(this.div_);var t=this;this.listeners_=[google.maps.event.addListener(this,"position_changed",function(){t.draw()}),google.maps.event.addListener(this,"text_changed",function(){t.draw()}),google.maps.event.addListener(this,"zindex_changed",function(){t.draw()})]},Label.prototype.onRemove=function(){this.div_.parentNode.removeChild(this.div_);for(var e=0,t=this.listeners_.length;t>e;++e)google.maps.event.removeListener(this.listeners_[e])},Label.prototype.draw=function(){var e=this.getProjection(),t=e.fromLatLngToDivPixel(this.get("position")),n=this.div_;n.style.left=t.x+"px",n.style.top=t.y-40+"px",n.style.display="block",n.style.zIndex=this.get("zIndex"),this.span_.style.cssText+="color:#"+this.get("color").toString(),this.span_.innerHTML=this.get("text").toString()}}!function(e,t){function n(e){var t=ht[e]={};return K.each(e.split(tt),function(e,n){t[n]=!0}),t}function i(e,n,i){if(i===t&&1===e.nodeType){var r="data-"+n.replace(gt,"-$1").toLowerCase();if(i=e.getAttribute(r),"string"==typeof i){try{i="true"===i?!0:"false"===i?!1:"null"===i?null:+i+""===i?+i:mt.test(i)?K.parseJSON(i):i}catch(o){}K.data(e,n,i)}else i=t}return i}function r(e){var t;for(t in e)if(("data"!==t||!K.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}function o(){return!1}function a(){return!0}function s(e){return!e||!e.parentNode||11===e.parentNode.nodeType}function u(e,t){do e=e[t];while(e&&1!==e.nodeType);return e}function l(e,t,n){if(t=t||0,K.isFunction(t))return K.grep(e,function(e,i){var r=!!t.call(e,i,e);return r===n});if(t.nodeType)return K.grep(e,function(e){return e===t===n});if("string"==typeof t){var i=K.grep(e,function(e){return 1===e.nodeType});if(Nt.test(t))return K.filter(t,i,!n);t=K.filter(t,i)}return K.grep(e,function(e){return K.inArray(e,t)>=0===n})}function c(e){var t=Lt.split("|"),n=e.createDocumentFragment();if(n.createElement)for(;t.length;)n.createElement(t.pop());return n}function d(e,t){return e.getElementsByTagName(t)[0]||e.appendChild(e.ownerDocument.createElement(t))}function f(e,t){if(1===t.nodeType&&K.hasData(e)){var n,i,r,o=K._data(e),a=K._data(t,o),s=o.events;if(s){delete a.handle,a.events={};for(n in s)for(i=0,r=s[n].length;r>i;i++)K.event.add(t,n,s[n][i])}a.data&&(a.data=K.extend({},a.data))}}function p(e,t){var n;1===t.nodeType&&(t.clearAttributes&&t.clearAttributes(),t.mergeAttributes&&t.mergeAttributes(e),n=t.nodeName.toLowerCase(),"object"===n?(t.parentNode&&(t.outerHTML=e.outerHTML),K.support.html5Clone&&e.innerHTML&&!K.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):"input"===n&&Qt.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):"option"===n?t.selected=e.defaultSelected:"input"===n||"textarea"===n?t.defaultValue=e.defaultValue:"script"===n&&t.text!==e.text&&(t.text=e.text),t.removeAttribute(K.expando))}function h(e){return"undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName("*"):"undefined"!=typeof e.querySelectorAll?e.querySelectorAll("*"):[]}function m(e){Qt.test(e.type)&&(e.defaultChecked=e.checked)}function g(e,t){if(t in e)return t;for(var n=t.charAt(0).toUpperCase()+t.slice(1),i=t,r=yn.length;r--;)if(t=yn[r]+n,t in e)return t;return i}function v(e,t){return e=t||e,"none"===K.css(e,"display")||!K.contains(e.ownerDocument,e)}function y(e,t){for(var n,i,r=[],o=0,a=e.length;a>o;o++)n=e[o],n.style&&(r[o]=K._data(n,"olddisplay"),t?(r[o]||"none"!==n.style.display||(n.style.display=""),""===n.style.display&&v(n)&&(r[o]=K._data(n,"olddisplay",x(n.nodeName)))):(i=nn(n,"display"),r[o]||"none"===i||K._data(n,"olddisplay",i)));for(o=0;a>o;o++)n=e[o],n.style&&(t&&"none"!==n.style.display&&""!==n.style.display||(n.style.display=t?r[o]||"":"none"));return e}function b(e,t,n){var i=dn.exec(t);return i?Math.max(0,i[1]-(n||0))+(i[2]||"px"):t}function _(e,t,n,i){for(var r=n===(i?"border":"content")?4:"width"===t?1:0,o=0;4>r;r+=2)"margin"===n&&(o+=K.css(e,n+vn[r],!0)),i?("content"===n&&(o-=parseFloat(nn(e,"padding"+vn[r]))||0),"margin"!==n&&(o-=parseFloat(nn(e,"border"+vn[r]+"Width"))||0)):(o+=parseFloat(nn(e,"padding"+vn[r]))||0,"padding"!==n&&(o+=parseFloat(nn(e,"border"+vn[r]+"Width"))||0));return o}function w(e,t,n){var i="width"===t?e.offsetWidth:e.offsetHeight,r=!0,o=K.support.boxSizing&&"border-box"===K.css(e,"boxSizing");if(0>=i||null==i){if(i=nn(e,t),(0>i||null==i)&&(i=e.style[t]),fn.test(i))return i;r=o&&(K.support.boxSizingReliable||i===e.style[t]),i=parseFloat(i)||0}return i+_(e,t,n||(o?"border":"content"),r)+"px"}function x(e){if(hn[e])return hn[e];var t=K("<"+e+">").appendTo(R.body),n=t.css("display");return t.remove(),("none"===n||""===n)&&(rn=R.body.appendChild(rn||K.extend(R.createElement("iframe"),{frameBorder:0,width:0,height:0})),on&&rn.createElement||(on=(rn.contentWindow||rn.contentDocument).document,on.write("<!doctype html><html><body>"),on.close()),t=on.body.appendChild(on.createElement(e)),n=nn(t,"display"),R.body.removeChild(rn)),hn[e]=n,n}function k(e,t,n,i){var r;if(K.isArray(t))K.each(t,function(t,r){n||wn.test(e)?i(e,r):k(e+"["+("object"==typeof r?t:"")+"]",r,n,i)});else if(n||"object"!==K.type(t))i(e,t);else for(r in t)k(e+"["+r+"]",t[r],n,i)}function S(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var i,r,o,a=t.toLowerCase().split(tt),s=0,u=a.length;if(K.isFunction(n))for(;u>s;s++)i=a[s],o=/^\+/.test(i),o&&(i=i.substr(1)||"*"),r=e[i]=e[i]||[],r[o?"unshift":"push"](n)}}function C(e,n,i,r,o,a){o=o||n.dataTypes[0],a=a||{},a[o]=!0;for(var s,u=e[o],l=0,c=u?u.length:0,d=e===On;c>l&&(d||!s);l++)s=u[l](n,i,r),"string"==typeof s&&(!d||a[s]?s=t:(n.dataTypes.unshift(s),s=C(e,n,i,r,s,a)));return!d&&s||a["*"]||(s=C(e,n,i,r,"*",a)),s}function T(e,n){var i,r,o=K.ajaxSettings.flatOptions||{};for(i in n)n[i]!==t&&((o[i]?e:r||(r={}))[i]=n[i]);r&&K.extend(!0,e,r)}function E(e,n,i){var r,o,a,s,u=e.contents,l=e.dataTypes,c=e.responseFields;for(o in c)o in i&&(n[c[o]]=i[o]);for(;"*"===l[0];)l.shift(),r===t&&(r=e.mimeType||n.getResponseHeader("content-type"));if(r)for(o in u)if(u[o]&&u[o].test(r)){l.unshift(o);break}if(l[0]in i)a=l[0];else{for(o in i){if(!l[0]||e.converters[o+" "+l[0]]){a=o;break}s||(s=o)}a=a||s}return a?(a!==l[0]&&l.unshift(a),i[a]):void 0}function D(e,t){var n,i,r,o,a=e.dataTypes.slice(),s=a[0],u={},l=0;if(e.dataFilter&&(t=e.dataFilter(t,e.dataType)),a[1])for(n in e.converters)u[n.toLowerCase()]=e.converters[n];for(;r=a[++l];)if("*"!==r){if("*"!==s&&s!==r){if(n=u[s+" "+r]||u["* "+r],!n)for(i in u)if(o=i.split(" "),o[1]===r&&(n=u[s+" "+o[0]]||u["* "+o[0]])){n===!0?n=u[i]:u[i]!==!0&&(r=o[0],a.splice(l--,0,r));break}if(n!==!0)if(n&&e["throws"])t=n(t);else try{t=n(t)}catch(c){return{state:"parsererror",error:n?c:"No conversion from "+s+" to "+r}}}s=r}return{state:"success",data:t}}function F(){try{return new e.XMLHttpRequest}catch(t){}}function I(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function M(){return setTimeout(function(){Yn=t},0),Yn=K.now()}function B(e,t){K.each(t,function(t,n){for(var i=(ei[t]||[]).concat(ei["*"]),r=0,o=i.length;o>r;r++)if(i[r].call(e,t,n))return})}function A(e,t,n){var i,r=0,o=Jn.length,a=K.Deferred().always(function(){delete s.elem}),s=function(){for(var t=Yn||M(),n=Math.max(0,u.startTime+u.duration-t),i=n/u.duration||0,r=1-i,o=0,s=u.tweens.length;s>o;o++)u.tweens[o].run(r);return a.notifyWith(e,[u,r,n]),1>r&&s?n:(a.resolveWith(e,[u]),!1)},u=a.promise({elem:e,props:K.extend({},t),opts:K.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:Yn||M(),duration:n.duration,tweens:[],createTween:function(t,n){var i=K.Tween(e,u.opts,t,n,u.opts.specialEasing[t]||u.opts.easing);return u.tweens.push(i),i},stop:function(t){for(var n=0,i=t?u.tweens.length:0;i>n;n++)u.tweens[n].run(1);return t?a.resolveWith(e,[u,t]):a.rejectWith(e,[u,t]),this}}),l=u.props;for(j(l,u.opts.specialEasing);o>r;r++)if(i=Jn[r].call(u,e,l,u.opts))return i;return B(u,l),K.isFunction(u.opts.start)&&u.opts.start.call(e,u),K.fx.timer(K.extend(s,{anim:u,queue:u.opts.queue,elem:e})),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always)}function j(e,t){var n,i,r,o,a;for(n in e)if(i=K.camelCase(n),r=t[i],o=e[n],K.isArray(o)&&(r=o[1],o=e[n]=o[0]),n!==i&&(e[i]=o,delete e[n]),a=K.cssHooks[i],a&&"expand"in a){o=a.expand(o),delete e[i];for(n in o)n in e||(e[n]=o[n],t[n]=r)}else t[i]=r}function $(e,t,n){var i,r,o,a,s,u,l,c,d,f=this,p=e.style,h={},m=[],g=e.nodeType&&v(e);n.queue||(c=K._queueHooks(e,"fx"),null==c.unqueued&&(c.unqueued=0,d=c.empty.fire,c.empty.fire=function(){c.unqueued||d()}),c.unqueued++,f.always(function(){f.always(function(){c.unqueued--,K.queue(e,"fx").length||c.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],"inline"===K.css(e,"display")&&"none"===K.css(e,"float")&&(K.support.inlineBlockNeedsLayout&&"inline"!==x(e.nodeName)?p.zoom=1:p.display="inline-block")),n.overflow&&(p.overflow="hidden",K.support.shrinkWrapBlocks||f.done(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]}));for(i in t)if(o=t[i],Gn.exec(o)){if(delete t[i],u=u||"toggle"===o,o===(g?"hide":"show"))continue;m.push(i)}if(a=m.length){s=K._data(e,"fxshow")||K._data(e,"fxshow",{}),"hidden"in s&&(g=s.hidden),u&&(s.hidden=!g),g?K(e).show():f.done(function(){K(e).hide()}),f.done(function(){var t;K.removeData(e,"fxshow",!0);for(t in h)K.style(e,t,h[t])});for(i=0;a>i;i++)r=m[i],l=f.createTween(r,g?s[r]:0),h[r]=s[r]||K.style(e,r),r in s||(s[r]=l.start,g&&(l.end=l.start,l.start="width"===r||"height"===r?1:0))}}function N(e,t,n,i,r){return new N.prototype.init(e,t,n,i,r)}function O(e,t){var n,i={height:e},r=0;for(t=t?1:0;4>r;r+=2-t)n=vn[r],i["margin"+n]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function P(e){return K.isWindow(e)?e:9===e.nodeType?e.defaultView||e.parentWindow:!1}var L,z,R=e.document,H=e.location,q=e.navigator,W=e.jQuery,U=e.$,V=Array.prototype.push,X=Array.prototype.slice,Y=Array.prototype.indexOf,Q=Object.prototype.toString,G=Object.prototype.hasOwnProperty,Z=String.prototype.trim,K=function(e,t){return new K.fn.init(e,t,L)},J=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,et=/\S/,tt=/\s+/,nt=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,it=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,rt=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,ot=/^[\],:{}\s]*$/,at=/(?:^|:|,)(?:\s*\[)+/g,st=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,ut=/"[^"\\\r\n]*"|true|false|null|-?(?:\d\d*\.|)\d+(?:[eE][\-+]?\d+|)/g,lt=/^-ms-/,ct=/-([\da-z])/gi,dt=function(e,t){return(t+"").toUpperCase()},ft=function(){R.addEventListener?(R.removeEventListener("DOMContentLoaded",ft,!1),K.ready()):"complete"===R.readyState&&(R.detachEvent("onreadystatechange",ft),K.ready())},pt={};K.fn=K.prototype={constructor:K,init:function(e,n,i){var r,o,a;if(!e)return this;if(e.nodeType)return this.context=this[0]=e,this.length=1,this;if("string"==typeof e){if(r="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:it.exec(e),!r||!r[1]&&n)return!n||n.jquery?(n||i).find(e):this.constructor(n).find(e);if(r[1])return n=n instanceof K?n[0]:n,a=n&&n.nodeType?n.ownerDocument||n:R,e=K.parseHTML(r[1],a,!0),rt.test(r[1])&&K.isPlainObject(n)&&this.attr.call(e,n,!0),K.merge(this,e);if(o=R.getElementById(r[2]),o&&o.parentNode){if(o.id!==r[2])return i.find(e);this.length=1,this[0]=o}return this.context=R,this.selector=e,this}return K.isFunction(e)?i.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),K.makeArray(e,this))},selector:"",jquery:"1.8.3",length:0,size:function(){return this.length},toArray:function(){return X.call(this)},get:function(e){return null==e?this.toArray():0>e?this[this.length+e]:this[e]},pushStack:function(e,t,n){var i=K.merge(this.constructor(),e);return i.prevObject=this,i.context=this.context,"find"===t?i.selector=this.selector+(this.selector?" ":"")+n:t&&(i.selector=this.selector+"."+t+"("+n+")"),i},each:function(e,t){return K.each(this,e,t)},ready:function(e){return K.ready.promise().done(e),this},eq:function(e){return e=+e,-1===e?this.slice(e):this.slice(e,e+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(X.apply(this,arguments),"slice",X.call(arguments).join(","))},map:function(e){return this.pushStack(K.map(this,function(t,n){return e.call(t,n,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:V,sort:[].sort,splice:[].splice},K.fn.init.prototype=K.fn,K.extend=K.fn.extend=function(){var e,n,i,r,o,a,s=arguments[0]||{},u=1,l=arguments.length,c=!1;for("boolean"==typeof s&&(c=s,s=arguments[1]||{},u=2),"object"==typeof s||K.isFunction(s)||(s={}),l===u&&(s=this,--u);l>u;u++)if(null!=(e=arguments[u]))for(n in e)i=s[n],r=e[n],s!==r&&(c&&r&&(K.isPlainObject(r)||(o=K.isArray(r)))?(o?(o=!1,a=i&&K.isArray(i)?i:[]):a=i&&K.isPlainObject(i)?i:{},s[n]=K.extend(c,a,r)):r!==t&&(s[n]=r));return s},K.extend({noConflict:function(t){return e.$===K&&(e.$=U),t&&e.jQuery===K&&(e.jQuery=W),K},isReady:!1,readyWait:1,holdReady:function(e){e?K.readyWait++:K.ready(!0)},ready:function(e){if(e===!0?!--K.readyWait:!K.isReady){if(!R.body)return setTimeout(K.ready,1);K.isReady=!0,e!==!0&&--K.readyWait>0||(z.resolveWith(R,[K]),K.fn.trigger&&K(R).trigger("ready").off("ready"))}},isFunction:function(e){return"function"===K.type(e)},isArray:Array.isArray||function(e){return"array"===K.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return null==e?String(e):pt[Q.call(e)]||"object"},isPlainObject:function(e){if(!e||"object"!==K.type(e)||e.nodeType||K.isWindow(e))return!1;try{if(e.constructor&&!G.call(e,"constructor")&&!G.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}var i;for(i in e);return i===t||G.call(e,i)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},error:function(e){throw new Error(e)},parseHTML:function(e,t,n){var i;return e&&"string"==typeof e?("boolean"==typeof t&&(n=t,t=0),t=t||R,(i=rt.exec(e))?[t.createElement(i[1])]:(i=K.buildFragment([e],t,n?null:[]),K.merge([],(i.cacheable?K.clone(i.fragment):i.fragment).childNodes))):null},parseJSON:function(t){return t&&"string"==typeof t?(t=K.trim(t),e.JSON&&e.JSON.parse?e.JSON.parse(t):ot.test(t.replace(st,"@").replace(ut,"]").replace(at,""))?new Function("return "+t)():void K.error("Invalid JSON: "+t)):null},parseXML:function(n){var i,r;if(!n||"string"!=typeof n)return null;try{e.DOMParser?(r=new DOMParser,i=r.parseFromString(n,"text/xml")):(i=new ActiveXObject("Microsoft.XMLDOM"),i.async="false",i.loadXML(n))}catch(o){i=t}return i&&i.documentElement&&!i.getElementsByTagName("parsererror").length||K.error("Invalid XML: "+n),i},noop:function(){},globalEval:function(t){t&&et.test(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(lt,"ms-").replace(ct,dt)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,n,i){var r,o=0,a=e.length,s=a===t||K.isFunction(e);if(i)if(s){for(r in e)if(n.apply(e[r],i)===!1)break}else for(;a>o&&n.apply(e[o++],i)!==!1;);else if(s){for(r in e)if(n.call(e[r],r,e[r])===!1)break}else for(;a>o&&n.call(e[o],o,e[o++])!==!1;);return e},trim:Z&&!Z.call("\ufeff\xa0")?function(e){return null==e?"":Z.call(e)}:function(e){return null==e?"":(e+"").replace(nt,"")},makeArray:function(e,t){var n,i=t||[];return null!=e&&(n=K.type(e),null==e.length||"string"===n||"function"===n||"regexp"===n||K.isWindow(e)?V.call(i,e):K.merge(i,e)),i},inArray:function(e,t,n){var i;if(t){if(Y)return Y.call(t,e,n);for(i=t.length,n=n?0>n?Math.max(0,i+n):n:0;i>n;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,n){var i=n.length,r=e.length,o=0;if("number"==typeof i)for(;i>o;o++)e[r++]=n[o];else for(;n[o]!==t;)e[r++]=n[o++];return e.length=r,e},grep:function(e,t,n){var i,r=[],o=0,a=e.length;for(n=!!n;a>o;o++)i=!!t(e[o],o),n!==i&&r.push(e[o]);return r},map:function(e,n,i){var r,o,a=[],s=0,u=e.length,l=e instanceof K||u!==t&&"number"==typeof u&&(u>0&&e[0]&&e[u-1]||0===u||K.isArray(e));if(l)for(;u>s;s++)r=n(e[s],s,i),null!=r&&(a[a.length]=r);else for(o in e)r=n(e[o],o,i),null!=r&&(a[a.length]=r);return a.concat.apply([],a)},guid:1,proxy:function(e,n){var i,r,o;return"string"==typeof n&&(i=e[n],n=e,e=i),K.isFunction(e)?(r=X.call(arguments,2),o=function(){return e.apply(n,r.concat(X.call(arguments)))},o.guid=e.guid=e.guid||K.guid++,o):t},access:function(e,n,i,r,o,a,s){var u,l=null==i,c=0,d=e.length;if(i&&"object"==typeof i){for(c in i)K.access(e,n,c,i[c],1,a,r);o=1}else if(r!==t){if(u=s===t&&K.isFunction(r),l&&(u?(u=n,n=function(e,t,n){return u.call(K(e),n)}):(n.call(e,r),n=null)),n)for(;d>c;c++)n(e[c],i,u?r.call(e[c],c,n(e[c],i)):r,s);o=1}return o?e:l?n.call(e):d?n(e[0],i):a},now:function(){return(new Date).getTime()}}),K.ready.promise=function(t){if(!z)if(z=K.Deferred(),"complete"===R.readyState)setTimeout(K.ready,1);else if(R.addEventListener)R.addEventListener("DOMContentLoaded",ft,!1),e.addEventListener("load",K.ready,!1);else{R.attachEvent("onreadystatechange",ft),e.attachEvent("onload",K.ready);var n=!1;try{n=null==e.frameElement&&R.documentElement}catch(i){}n&&n.doScroll&&!function r(){if(!K.isReady){try{n.doScroll("left")}catch(e){return setTimeout(r,50)}K.ready()}}()}return z.promise(t)},K.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(e,t){pt["[object "+t+"]"]=t.toLowerCase()}),L=K(R);var ht={};K.Callbacks=function(e){e="string"==typeof e?ht[e]||n(e):K.extend({},e);var i,r,o,a,s,u,l=[],c=!e.once&&[],d=function(t){for(i=e.memory&&t,r=!0,u=a||0,a=0,s=l.length,o=!0;l&&s>u;u++)if(l[u].apply(t[0],t[1])===!1&&e.stopOnFalse){i=!1;break}o=!1,l&&(c?c.length&&d(c.shift()):i?l=[]:f.disable())},f={add:function(){if(l){var t=l.length;!function n(t){K.each(t,function(t,i){var r=K.type(i);"function"===r?e.unique&&f.has(i)||l.push(i):i&&i.length&&"string"!==r&&n(i)})}(arguments),o?s=l.length:i&&(a=t,d(i))}return this},remove:function(){return l&&K.each(arguments,function(e,t){for(var n;(n=K.inArray(t,l,n))>-1;)l.splice(n,1),o&&(s>=n&&s--,u>=n&&u--)}),this},has:function(e){return K.inArray(e,l)>-1},empty:function(){return l=[],this},disable:function(){return l=c=i=t,this},disabled:function(){return!l},lock:function(){return c=t,i||f.disable(),this},locked:function(){return!c},fireWith:function(e,t){return t=t||[],t=[e,t.slice?t.slice():t],!l||r&&!c||(o?c.push(t):d(t)),this},fire:function(){return f.fireWith(this,arguments),this},fired:function(){return!!r}};return f},K.extend({Deferred:function(e){var t=[["resolve","done",K.Callbacks("once memory"),"resolved"],["reject","fail",K.Callbacks("once memory"),"rejected"],["notify","progress",K.Callbacks("memory")]],n="pending",i={state:function(){return n},always:function(){return r.done(arguments).fail(arguments),this},then:function(){var e=arguments;return K.Deferred(function(n){K.each(t,function(t,i){var o=i[0],a=e[t];r[i[1]](K.isFunction(a)?function(){var e=a.apply(this,arguments);e&&K.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[o+"With"](this===r?n:this,[e])}:n[o])}),e=null}).promise()},promise:function(e){return null!=e?K.extend(e,i):i}},r={};return i.pipe=i.then,K.each(t,function(e,o){var a=o[2],s=o[3];i[o[1]]=a.add,s&&a.add(function(){n=s},t[1^e][2].disable,t[2][2].lock),r[o[0]]=a.fire,r[o[0]+"With"]=a.fireWith}),i.promise(r),e&&e.call(r,r),r},when:function(e){var t,n,i,r=0,o=X.call(arguments),a=o.length,s=1!==a||e&&K.isFunction(e.promise)?a:0,u=1===s?e:K.Deferred(),l=function(e,n,i){return function(r){n[e]=this,i[e]=arguments.length>1?X.call(arguments):r,i===t?u.notifyWith(n,i):--s||u.resolveWith(n,i)}};if(a>1)for(t=new Array(a),n=new Array(a),i=new Array(a);a>r;r++)o[r]&&K.isFunction(o[r].promise)?o[r].promise().done(l(r,i,o)).fail(u.reject).progress(l(r,n,t)):--s;return s||u.resolveWith(i,o),u.promise()}}),K.support=function(){var t,n,i,r,o,a,s,u,l,c,d,f=R.createElement("div");if(f.setAttribute("className","t"),f.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",n=f.getElementsByTagName("*"),i=f.getElementsByTagName("a")[0],!n||!i||!n.length)return{};r=R.createElement("select"),o=r.appendChild(R.createElement("option")),a=f.getElementsByTagName("input")[0],i.style.cssText="top:1px;float:left;opacity:.5",t={leadingWhitespace:3===f.firstChild.nodeType,tbody:!f.getElementsByTagName("tbody").length,htmlSerialize:!!f.getElementsByTagName("link").length,style:/top/.test(i.getAttribute("style")),hrefNormalized:"/a"===i.getAttribute("href"),opacity:/^0.5/.test(i.style.opacity),cssFloat:!!i.style.cssFloat,checkOn:"on"===a.value,optSelected:o.selected,getSetAttribute:"t"!==f.className,enctype:!!R.createElement("form").enctype,html5Clone:"<:nav></:nav>"!==R.createElement("nav").cloneNode(!0).outerHTML,boxModel:"CSS1Compat"===R.compatMode,submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1},a.checked=!0,t.noCloneChecked=a.cloneNode(!0).checked,r.disabled=!0,t.optDisabled=!o.disabled;try{delete f.test}catch(p){t.deleteExpando=!1}if(!f.addEventListener&&f.attachEvent&&f.fireEvent&&(f.attachEvent("onclick",d=function(){t.noCloneEvent=!1}),f.cloneNode(!0).fireEvent("onclick"),f.detachEvent("onclick",d)),a=R.createElement("input"),a.value="t",a.setAttribute("type","radio"),t.radioValue="t"===a.value,a.setAttribute("checked","checked"),a.setAttribute("name","t"),f.appendChild(a),s=R.createDocumentFragment(),s.appendChild(f.lastChild),t.checkClone=s.cloneNode(!0).cloneNode(!0).lastChild.checked,t.appendChecked=a.checked,s.removeChild(a),s.appendChild(f),f.attachEvent)for(l in{submit:!0,change:!0,focusin:!0})u="on"+l,c=u in f,c||(f.setAttribute(u,"return;"),c="function"==typeof f[u]),t[l+"Bubbles"]=c;
return K(function(){var n,i,r,o,a="padding:0;margin:0;border:0;display:block;overflow:hidden;",s=R.getElementsByTagName("body")[0];s&&(n=R.createElement("div"),n.style.cssText="visibility:hidden;border:0;width:0;height:0;position:static;top:0;margin-top:1px",s.insertBefore(n,s.firstChild),i=R.createElement("div"),n.appendChild(i),i.innerHTML="<table><tr><td></td><td>t</td></tr></table>",r=i.getElementsByTagName("td"),r[0].style.cssText="padding:0;margin:0;border:0;display:none",c=0===r[0].offsetHeight,r[0].style.display="",r[1].style.display="none",t.reliableHiddenOffsets=c&&0===r[0].offsetHeight,i.innerHTML="",i.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",t.boxSizing=4===i.offsetWidth,t.doesNotIncludeMarginInBodyOffset=1!==s.offsetTop,e.getComputedStyle&&(t.pixelPosition="1%"!==(e.getComputedStyle(i,null)||{}).top,t.boxSizingReliable="4px"===(e.getComputedStyle(i,null)||{width:"4px"}).width,o=R.createElement("div"),o.style.cssText=i.style.cssText=a,o.style.marginRight=o.style.width="0",i.style.width="1px",i.appendChild(o),t.reliableMarginRight=!parseFloat((e.getComputedStyle(o,null)||{}).marginRight)),"undefined"!=typeof i.style.zoom&&(i.innerHTML="",i.style.cssText=a+"width:1px;padding:1px;display:inline;zoom:1",t.inlineBlockNeedsLayout=3===i.offsetWidth,i.style.display="block",i.style.overflow="visible",i.innerHTML="<div></div>",i.firstChild.style.width="5px",t.shrinkWrapBlocks=3!==i.offsetWidth,n.style.zoom=1),s.removeChild(n),n=i=r=o=null)}),s.removeChild(f),n=i=r=o=a=s=f=null,t}();var mt=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,gt=/([A-Z])/g;K.extend({cache:{},deletedIds:[],uuid:0,expando:"jQuery"+(K.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(e){return e=e.nodeType?K.cache[e[K.expando]]:e[K.expando],!!e&&!r(e)},data:function(e,n,i,r){if(K.acceptData(e)){var o,a,s=K.expando,u="string"==typeof n,l=e.nodeType,c=l?K.cache:e,d=l?e[s]:e[s]&&s;if(d&&c[d]&&(r||c[d].data)||!u||i!==t)return d||(l?e[s]=d=K.deletedIds.pop()||K.guid++:d=s),c[d]||(c[d]={},l||(c[d].toJSON=K.noop)),("object"==typeof n||"function"==typeof n)&&(r?c[d]=K.extend(c[d],n):c[d].data=K.extend(c[d].data,n)),o=c[d],r||(o.data||(o.data={}),o=o.data),i!==t&&(o[K.camelCase(n)]=i),u?(a=o[n],null==a&&(a=o[K.camelCase(n)])):a=o,a}},removeData:function(e,t,n){if(K.acceptData(e)){var i,o,a,s=e.nodeType,u=s?K.cache:e,l=s?e[K.expando]:K.expando;if(u[l]){if(t&&(i=n?u[l]:u[l].data)){K.isArray(t)||(t in i?t=[t]:(t=K.camelCase(t),t=t in i?[t]:t.split(" ")));for(o=0,a=t.length;a>o;o++)delete i[t[o]];if(!(n?r:K.isEmptyObject)(i))return}(n||(delete u[l].data,r(u[l])))&&(s?K.cleanData([e],!0):K.support.deleteExpando||u!=u.window?delete u[l]:u[l]=null)}}},_data:function(e,t,n){return K.data(e,t,n,!0)},acceptData:function(e){var t=e.nodeName&&K.noData[e.nodeName.toLowerCase()];return!t||t!==!0&&e.getAttribute("classid")===t}}),K.fn.extend({data:function(e,n){var r,o,a,s,u,l=this[0],c=0,d=null;if(e===t){if(this.length&&(d=K.data(l),1===l.nodeType&&!K._data(l,"parsedAttrs"))){for(a=l.attributes,u=a.length;u>c;c++)s=a[c].name,s.indexOf("data-")||(s=K.camelCase(s.substring(5)),i(l,s,d[s]));K._data(l,"parsedAttrs",!0)}return d}return"object"==typeof e?this.each(function(){K.data(this,e)}):(r=e.split(".",2),r[1]=r[1]?"."+r[1]:"",o=r[1]+"!",K.access(this,function(n){return n===t?(d=this.triggerHandler("getData"+o,[r[0]]),d===t&&l&&(d=K.data(l,e),d=i(l,e,d)),d===t&&r[1]?this.data(r[0]):d):(r[1]=n,void this.each(function(){var t=K(this);t.triggerHandler("setData"+o,r),K.data(this,e,n),t.triggerHandler("changeData"+o,r)}))},null,n,arguments.length>1,null,!1))},removeData:function(e){return this.each(function(){K.removeData(this,e)})}}),K.extend({queue:function(e,t,n){var i;return e?(t=(t||"fx")+"queue",i=K._data(e,t),n&&(!i||K.isArray(n)?i=K._data(e,t,K.makeArray(n)):i.push(n)),i||[]):void 0},dequeue:function(e,t){t=t||"fx";var n=K.queue(e,t),i=n.length,r=n.shift(),o=K._queueHooks(e,t),a=function(){K.dequeue(e,t)};"inprogress"===r&&(r=n.shift(),i--),r&&("fx"===t&&n.unshift("inprogress"),delete o.stop,r.call(e,a,o)),!i&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return K._data(e,n)||K._data(e,n,{empty:K.Callbacks("once memory").add(function(){K.removeData(e,t+"queue",!0),K.removeData(e,n,!0)})})}}),K.fn.extend({queue:function(e,n){var i=2;return"string"!=typeof e&&(n=e,e="fx",i--),arguments.length<i?K.queue(this[0],e):n===t?this:this.each(function(){var t=K.queue(this,e,n);K._queueHooks(this,e),"fx"===e&&"inprogress"!==t[0]&&K.dequeue(this,e)})},dequeue:function(e){return this.each(function(){K.dequeue(this,e)})},delay:function(e,t){return e=K.fx?K.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var i=setTimeout(t,e);n.stop=function(){clearTimeout(i)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,n){var i,r=1,o=K.Deferred(),a=this,s=this.length,u=function(){--r||o.resolveWith(a,[a])};for("string"!=typeof e&&(n=e,e=t),e=e||"fx";s--;)i=K._data(a[s],e+"queueHooks"),i&&i.empty&&(r++,i.empty.add(u));return u(),o.promise(n)}});var vt,yt,bt,_t=/[\t\r\n]/g,wt=/\r/g,xt=/^(?:button|input)$/i,kt=/^(?:button|input|object|select|textarea)$/i,St=/^a(?:rea|)$/i,Ct=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,Tt=K.support.getSetAttribute;K.fn.extend({attr:function(e,t){return K.access(this,K.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){K.removeAttr(this,e)})},prop:function(e,t){return K.access(this,K.prop,e,t,arguments.length>1)},removeProp:function(e){return e=K.propFix[e]||e,this.each(function(){try{this[e]=t,delete this[e]}catch(n){}})},addClass:function(e){var t,n,i,r,o,a,s;if(K.isFunction(e))return this.each(function(t){K(this).addClass(e.call(this,t,this.className))});if(e&&"string"==typeof e)for(t=e.split(tt),n=0,i=this.length;i>n;n++)if(r=this[n],1===r.nodeType)if(r.className||1!==t.length){for(o=" "+r.className+" ",a=0,s=t.length;s>a;a++)o.indexOf(" "+t[a]+" ")<0&&(o+=t[a]+" ");r.className=K.trim(o)}else r.className=e;return this},removeClass:function(e){var n,i,r,o,a,s,u;if(K.isFunction(e))return this.each(function(t){K(this).removeClass(e.call(this,t,this.className))});if(e&&"string"==typeof e||e===t)for(n=(e||"").split(tt),s=0,u=this.length;u>s;s++)if(r=this[s],1===r.nodeType&&r.className){for(i=(" "+r.className+" ").replace(_t," "),o=0,a=n.length;a>o;o++)for(;i.indexOf(" "+n[o]+" ")>=0;)i=i.replace(" "+n[o]+" "," ");r.className=e?K.trim(i):""}return this},toggleClass:function(e,t){var n=typeof e,i="boolean"==typeof t;return this.each(K.isFunction(e)?function(n){K(this).toggleClass(e.call(this,n,this.className,t),t)}:function(){if("string"===n)for(var r,o=0,a=K(this),s=t,u=e.split(tt);r=u[o++];)s=i?s:!a.hasClass(r),a[s?"addClass":"removeClass"](r);else("undefined"===n||"boolean"===n)&&(this.className&&K._data(this,"__className__",this.className),this.className=this.className||e===!1?"":K._data(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",n=0,i=this.length;i>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(_t," ").indexOf(t)>=0)return!0;return!1},val:function(e){var n,i,r,o=this[0];{if(arguments.length)return r=K.isFunction(e),this.each(function(i){var o,a=K(this);1===this.nodeType&&(o=r?e.call(this,i,a.val()):e,null==o?o="":"number"==typeof o?o+="":K.isArray(o)&&(o=K.map(o,function(e){return null==e?"":e+""})),n=K.valHooks[this.type]||K.valHooks[this.nodeName.toLowerCase()],n&&"set"in n&&n.set(this,o,"value")!==t||(this.value=o))});if(o)return n=K.valHooks[o.type]||K.valHooks[o.nodeName.toLowerCase()],n&&"get"in n&&(i=n.get(o,"value"))!==t?i:(i=o.value,"string"==typeof i?i.replace(wt,""):null==i?"":i)}}}),K.extend({valHooks:{option:{get:function(e){var t=e.attributes.value;return!t||t.specified?e.value:e.text}},select:{get:function(e){for(var t,n,i=e.options,r=e.selectedIndex,o="select-one"===e.type||0>r,a=o?null:[],s=o?r+1:i.length,u=0>r?s:o?r:0;s>u;u++)if(n=i[u],!(!n.selected&&u!==r||(K.support.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&K.nodeName(n.parentNode,"optgroup"))){if(t=K(n).val(),o)return t;a.push(t)}return a},set:function(e,t){var n=K.makeArray(t);return K(e).find("option").each(function(){this.selected=K.inArray(K(this).val(),n)>=0}),n.length||(e.selectedIndex=-1),n}}},attrFn:{},attr:function(e,n,i,r){var o,a,s,u=e.nodeType;if(e&&3!==u&&8!==u&&2!==u)return r&&K.isFunction(K.fn[n])?K(e)[n](i):"undefined"==typeof e.getAttribute?K.prop(e,n,i):(s=1!==u||!K.isXMLDoc(e),s&&(n=n.toLowerCase(),a=K.attrHooks[n]||(Ct.test(n)?yt:vt)),i!==t?null===i?void K.removeAttr(e,n):a&&"set"in a&&s&&(o=a.set(e,i,n))!==t?o:(e.setAttribute(n,i+""),i):a&&"get"in a&&s&&null!==(o=a.get(e,n))?o:(o=e.getAttribute(n),null===o?t:o))},removeAttr:function(e,t){var n,i,r,o,a=0;if(t&&1===e.nodeType)for(i=t.split(tt);a<i.length;a++)r=i[a],r&&(n=K.propFix[r]||r,o=Ct.test(r),o||K.attr(e,r,""),e.removeAttribute(Tt?r:n),o&&n in e&&(e[n]=!1))},attrHooks:{type:{set:function(e,t){if(xt.test(e.nodeName)&&e.parentNode)K.error("type property can't be changed");else if(!K.support.radioValue&&"radio"===t&&K.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}},value:{get:function(e,t){return vt&&K.nodeName(e,"button")?vt.get(e,t):t in e?e.value:null},set:function(e,t,n){return vt&&K.nodeName(e,"button")?vt.set(e,t,n):void(e.value=t)}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(e,n,i){var r,o,a,s=e.nodeType;if(e&&3!==s&&8!==s&&2!==s)return a=1!==s||!K.isXMLDoc(e),a&&(n=K.propFix[n]||n,o=K.propHooks[n]),i!==t?o&&"set"in o&&(r=o.set(e,i,n))!==t?r:e[n]=i:o&&"get"in o&&null!==(r=o.get(e,n))?r:e[n]},propHooks:{tabIndex:{get:function(e){var n=e.getAttributeNode("tabindex");return n&&n.specified?parseInt(n.value,10):kt.test(e.nodeName)||St.test(e.nodeName)&&e.href?0:t}}}}),yt={get:function(e,n){var i,r=K.prop(e,n);return r===!0||"boolean"!=typeof r&&(i=e.getAttributeNode(n))&&i.nodeValue!==!1?n.toLowerCase():t},set:function(e,t,n){var i;return t===!1?K.removeAttr(e,n):(i=K.propFix[n]||n,i in e&&(e[i]=!0),e.setAttribute(n,n.toLowerCase())),n}},Tt||(bt={name:!0,id:!0,coords:!0},vt=K.valHooks.button={get:function(e,n){var i;return i=e.getAttributeNode(n),i&&(bt[n]?""!==i.value:i.specified)?i.value:t},set:function(e,t,n){var i=e.getAttributeNode(n);return i||(i=R.createAttribute(n),e.setAttributeNode(i)),i.value=t+""}},K.each(["width","height"],function(e,t){K.attrHooks[t]=K.extend(K.attrHooks[t],{set:function(e,n){return""===n?(e.setAttribute(t,"auto"),n):void 0}})}),K.attrHooks.contenteditable={get:vt.get,set:function(e,t,n){""===t&&(t="false"),vt.set(e,t,n)}}),K.support.hrefNormalized||K.each(["href","src","width","height"],function(e,n){K.attrHooks[n]=K.extend(K.attrHooks[n],{get:function(e){var i=e.getAttribute(n,2);return null===i?t:i}})}),K.support.style||(K.attrHooks.style={get:function(e){return e.style.cssText.toLowerCase()||t},set:function(e,t){return e.style.cssText=t+""}}),K.support.optSelected||(K.propHooks.selected=K.extend(K.propHooks.selected,{get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}})),K.support.enctype||(K.propFix.enctype="encoding"),K.support.checkOn||K.each(["radio","checkbox"],function(){K.valHooks[this]={get:function(e){return null===e.getAttribute("value")?"on":e.value}}}),K.each(["radio","checkbox"],function(){K.valHooks[this]=K.extend(K.valHooks[this],{set:function(e,t){return K.isArray(t)?e.checked=K.inArray(K(e).val(),t)>=0:void 0}})});var Et=/^(?:textarea|input|select)$/i,Dt=/^([^\.]*|)(?:\.(.+)|)$/,Ft=/(?:^|\s)hover(\.\S+|)\b/,It=/^key/,Mt=/^(?:mouse|contextmenu)|click/,Bt=/^(?:focusinfocus|focusoutblur)$/,At=function(e){return K.event.special.hover?e:e.replace(Ft,"mouseenter$1 mouseleave$1")};K.event={add:function(e,n,i,r,o){var a,s,u,l,c,d,f,p,h,m,g;if(3!==e.nodeType&&8!==e.nodeType&&n&&i&&(a=K._data(e))){for(i.handler&&(h=i,i=h.handler,o=h.selector),i.guid||(i.guid=K.guid++),u=a.events,u||(a.events=u={}),s=a.handle,s||(a.handle=s=function(e){return"undefined"==typeof K||e&&K.event.triggered===e.type?t:K.event.dispatch.apply(s.elem,arguments)},s.elem=e),n=K.trim(At(n)).split(" "),l=0;l<n.length;l++)c=Dt.exec(n[l])||[],d=c[1],f=(c[2]||"").split(".").sort(),g=K.event.special[d]||{},d=(o?g.delegateType:g.bindType)||d,g=K.event.special[d]||{},p=K.extend({type:d,origType:c[1],data:r,handler:i,guid:i.guid,selector:o,needsContext:o&&K.expr.match.needsContext.test(o),namespace:f.join(".")},h),m=u[d],m||(m=u[d]=[],m.delegateCount=0,g.setup&&g.setup.call(e,r,f,s)!==!1||(e.addEventListener?e.addEventListener(d,s,!1):e.attachEvent&&e.attachEvent("on"+d,s))),g.add&&(g.add.call(e,p),p.handler.guid||(p.handler.guid=i.guid)),o?m.splice(m.delegateCount++,0,p):m.push(p),K.event.global[d]=!0;e=null}},global:{},remove:function(e,t,n,i,r){var o,a,s,u,l,c,d,f,p,h,m,g=K.hasData(e)&&K._data(e);if(g&&(f=g.events)){for(t=K.trim(At(t||"")).split(" "),o=0;o<t.length;o++)if(a=Dt.exec(t[o])||[],s=u=a[1],l=a[2],s){for(p=K.event.special[s]||{},s=(i?p.delegateType:p.bindType)||s,h=f[s]||[],c=h.length,l=l?new RegExp("(^|\\.)"+l.split(".").sort().join("\\.(?:.*\\.|)")+"(\\.|$)"):null,d=0;d<h.length;d++)m=h[d],!r&&u!==m.origType||n&&n.guid!==m.guid||l&&!l.test(m.namespace)||i&&i!==m.selector&&("**"!==i||!m.selector)||(h.splice(d--,1),m.selector&&h.delegateCount--,p.remove&&p.remove.call(e,m));0===h.length&&c!==h.length&&(p.teardown&&p.teardown.call(e,l,g.handle)!==!1||K.removeEvent(e,s,g.handle),delete f[s])}else for(s in f)K.event.remove(e,s+t[o],n,i,!0);K.isEmptyObject(f)&&(delete g.handle,K.removeData(e,"events",!0))}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(n,i,r,o){if(!r||3!==r.nodeType&&8!==r.nodeType){var a,s,u,l,c,d,f,p,h,m,g=n.type||n,v=[];if(!Bt.test(g+K.event.triggered)&&(g.indexOf("!")>=0&&(g=g.slice(0,-1),s=!0),g.indexOf(".")>=0&&(v=g.split("."),g=v.shift(),v.sort()),r&&!K.event.customEvent[g]||K.event.global[g]))if(n="object"==typeof n?n[K.expando]?n:new K.Event(g,n):new K.Event(g),n.type=g,n.isTrigger=!0,n.exclusive=s,n.namespace=v.join("."),n.namespace_re=n.namespace?new RegExp("(^|\\.)"+v.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,d=g.indexOf(":")<0?"on"+g:"",r){if(n.result=t,n.target||(n.target=r),i=null!=i?K.makeArray(i):[],i.unshift(n),f=K.event.special[g]||{},!f.trigger||f.trigger.apply(r,i)!==!1){if(h=[[r,f.bindType||g]],!o&&!f.noBubble&&!K.isWindow(r)){for(m=f.delegateType||g,l=Bt.test(m+g)?r:r.parentNode,c=r;l;l=l.parentNode)h.push([l,m]),c=l;c===(r.ownerDocument||R)&&h.push([c.defaultView||c.parentWindow||e,m])}for(u=0;u<h.length&&!n.isPropagationStopped();u++)l=h[u][0],n.type=h[u][1],p=(K._data(l,"events")||{})[n.type]&&K._data(l,"handle"),p&&p.apply(l,i),p=d&&l[d],p&&K.acceptData(l)&&p.apply&&p.apply(l,i)===!1&&n.preventDefault();return n.type=g,o||n.isDefaultPrevented()||f._default&&f._default.apply(r.ownerDocument,i)!==!1||"click"===g&&K.nodeName(r,"a")||!K.acceptData(r)||d&&r[g]&&("focus"!==g&&"blur"!==g||0!==n.target.offsetWidth)&&!K.isWindow(r)&&(c=r[d],c&&(r[d]=null),K.event.triggered=g,r[g](),K.event.triggered=t,c&&(r[d]=c)),n.result}}else{a=K.cache;for(u in a)a[u].events&&a[u].events[g]&&K.event.trigger(n,i,a[u].handle.elem,!0)}}},dispatch:function(n){n=K.event.fix(n||e.event);var i,r,o,a,s,u,l,c,d,f=(K._data(this,"events")||{})[n.type]||[],p=f.delegateCount,h=X.call(arguments),m=!n.exclusive&&!n.namespace,g=K.event.special[n.type]||{},v=[];if(h[0]=n,n.delegateTarget=this,!g.preDispatch||g.preDispatch.call(this,n)!==!1){if(p&&(!n.button||"click"!==n.type))for(o=n.target;o!=this;o=o.parentNode||this)if(o.disabled!==!0||"click"!==n.type){for(s={},l=[],i=0;p>i;i++)c=f[i],d=c.selector,s[d]===t&&(s[d]=c.needsContext?K(d,this).index(o)>=0:K.find(d,this,null,[o]).length),s[d]&&l.push(c);l.length&&v.push({elem:o,matches:l})}for(f.length>p&&v.push({elem:this,matches:f.slice(p)}),i=0;i<v.length&&!n.isPropagationStopped();i++)for(u=v[i],n.currentTarget=u.elem,r=0;r<u.matches.length&&!n.isImmediatePropagationStopped();r++)c=u.matches[r],(m||!n.namespace&&!c.namespace||n.namespace_re&&n.namespace_re.test(c.namespace))&&(n.data=c.data,n.handleObj=c,a=((K.event.special[c.origType]||{}).handle||c.handler).apply(u.elem,h),a!==t&&(n.result=a,a===!1&&(n.preventDefault(),n.stopPropagation())));return g.postDispatch&&g.postDispatch.call(this,n),n.result}},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,n){var i,r,o,a=n.button,s=n.fromElement;return null==e.pageX&&null!=n.clientX&&(i=e.target.ownerDocument||R,r=i.documentElement,o=i.body,e.pageX=n.clientX+(r&&r.scrollLeft||o&&o.scrollLeft||0)-(r&&r.clientLeft||o&&o.clientLeft||0),e.pageY=n.clientY+(r&&r.scrollTop||o&&o.scrollTop||0)-(r&&r.clientTop||o&&o.clientTop||0)),!e.relatedTarget&&s&&(e.relatedTarget=s===e.target?n.toElement:s),e.which||a===t||(e.which=1&a?1:2&a?3:4&a?2:0),e}},fix:function(e){if(e[K.expando])return e;var t,n,i=e,r=K.event.fixHooks[e.type]||{},o=r.props?this.props.concat(r.props):this.props;for(e=K.Event(i),t=o.length;t;)n=o[--t],e[n]=i[n];return e.target||(e.target=i.srcElement||R),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,r.filter?r.filter(e,i):e},special:{load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(e,t,n){K.isWindow(this)&&(this.onbeforeunload=n)},teardown:function(e,t){this.onbeforeunload===t&&(this.onbeforeunload=null)}}},simulate:function(e,t,n,i){var r=K.extend(new K.Event,n,{type:e,isSimulated:!0,originalEvent:{}});i?K.event.trigger(r,null,t):K.event.dispatch.call(t,r),r.isDefaultPrevented()&&n.preventDefault()}},K.event.handle=K.event.dispatch,K.removeEvent=R.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){var i="on"+t;e.detachEvent&&("undefined"==typeof e[i]&&(e[i]=null),e.detachEvent(i,n))},K.Event=function(e,t){return this instanceof K.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault()?a:o):this.type=e,t&&K.extend(this,t),this.timeStamp=e&&e.timeStamp||K.now(),void(this[K.expando]=!0)):new K.Event(e,t)},K.Event.prototype={preventDefault:function(){this.isDefaultPrevented=a;var e=this.originalEvent;e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=a;var e=this.originalEvent;e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=a,this.stopPropagation()},isDefaultPrevented:o,isPropagationStopped:o,isImmediatePropagationStopped:o},K.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){K.event.special[e]={delegateType:t,bindType:t,handle:function(e){{var n,i=this,r=e.relatedTarget,o=e.handleObj;o.selector}return(!r||r!==i&&!K.contains(i,r))&&(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}}),K.support.submitBubbles||(K.event.special.submit={setup:function(){return K.nodeName(this,"form")?!1:void K.event.add(this,"click._submit keypress._submit",function(e){var n=e.target,i=K.nodeName(n,"input")||K.nodeName(n,"button")?n.form:t;i&&!K._data(i,"_submit_attached")&&(K.event.add(i,"submit._submit",function(e){e._submit_bubble=!0}),K._data(i,"_submit_attached",!0))})},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&K.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){return K.nodeName(this,"form")?!1:void K.event.remove(this,"._submit")}}),K.support.changeBubbles||(K.event.special.change={setup:function(){return Et.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(K.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)}),K.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),K.event.simulate("change",this,e,!0)})),!1):void K.event.add(this,"beforeactivate._change",function(e){var t=e.target;Et.test(t.nodeName)&&!K._data(t,"_change_attached")&&(K.event.add(t,"change._change",function(e){!this.parentNode||e.isSimulated||e.isTrigger||K.event.simulate("change",this.parentNode,e,!0)}),K._data(t,"_change_attached",!0))})},handle:function(e){var t=e.target;return this!==t||e.isSimulated||e.isTrigger||"radio"!==t.type&&"checkbox"!==t.type?e.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return K.event.remove(this,"._change"),!Et.test(this.nodeName)}}),K.support.focusinBubbles||K.each({focus:"focusin",blur:"focusout"},function(e,t){var n=0,i=function(e){K.event.simulate(t,e.target,K.event.fix(e),!0)};K.event.special[t]={setup:function(){0===n++&&R.addEventListener(e,i,!0)},teardown:function(){0===--n&&R.removeEventListener(e,i,!0)}}}),K.fn.extend({on:function(e,n,i,r,a){var s,u;if("object"==typeof e){"string"!=typeof n&&(i=i||n,n=t);for(u in e)this.on(u,n,i,e[u],a);return this}if(null==i&&null==r?(r=n,i=n=t):null==r&&("string"==typeof n?(r=i,i=t):(r=i,i=n,n=t)),r===!1)r=o;else if(!r)return this;return 1===a&&(s=r,r=function(e){return K().off(e),s.apply(this,arguments)},r.guid=s.guid||(s.guid=K.guid++)),this.each(function(){K.event.add(this,e,r,i,n)})},one:function(e,t,n,i){return this.on(e,t,n,i,1)},off:function(e,n,i){var r,a;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,K(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(a in e)this.off(a,n,e[a]);return this}return(n===!1||"function"==typeof n)&&(i=n,n=t),i===!1&&(i=o),this.each(function(){K.event.remove(this,e,i,n)})},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},live:function(e,t,n){return K(this.context).on(e,this.selector,t,n),this},die:function(e,t){return K(this.context).off(e,this.selector||"**",t),this},delegate:function(e,t,n,i){return this.on(t,e,n,i)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},trigger:function(e,t){return this.each(function(){K.event.trigger(e,t,this)})},triggerHandler:function(e,t){return this[0]?K.event.trigger(e,t,this[0],!0):void 0},toggle:function(e){var t=arguments,n=e.guid||K.guid++,i=0,r=function(n){var r=(K._data(this,"lastToggle"+e.guid)||0)%i;return K._data(this,"lastToggle"+e.guid,r+1),n.preventDefault(),t[r].apply(this,arguments)||!1};for(r.guid=n;i<t.length;)t[i++].guid=n;return this.click(r)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),K.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){K.fn[t]=function(e,n){return null==n&&(n=e,e=null),arguments.length>0?this.on(t,null,e,n):this.trigger(t)},It.test(t)&&(K.event.fixHooks[t]=K.event.keyHooks),Mt.test(t)&&(K.event.fixHooks[t]=K.event.mouseHooks)}),/*!
 * Sizzle CSS Selector Engine
 * Copyright 2012 jQuery Foundation and other contributors
 * Released under the MIT license
 * http://sizzlejs.com/
 */
function(e,t){function n(e,t,n,i){n=n||[],t=t||M;var r,o,a,s,u=t.nodeType;if(!e||"string"!=typeof e)return n;if(1!==u&&9!==u)return[];if(a=w(t),!a&&!i&&(r=nt.exec(e)))if(s=r[1]){if(9===u){if(o=t.getElementById(s),!o||!o.parentNode)return n;if(o.id===s)return n.push(o),n}else if(t.ownerDocument&&(o=t.ownerDocument.getElementById(s))&&x(t,o)&&o.id===s)return n.push(o),n}else{if(r[2])return N.apply(n,O.call(t.getElementsByTagName(e),0)),n;if((s=r[3])&&ft&&t.getElementsByClassName)return N.apply(n,O.call(t.getElementsByClassName(s),0)),n}return m(e.replace(Z,"$1"),t,n,i,a)}function i(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function r(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function o(e){return L(function(t){return t=+t,L(function(n,i){for(var r,o=e([],n.length,t),a=o.length;a--;)n[r=o[a]]&&(n[r]=!(i[r]=n[r]))})})}function a(e,t,n){if(e===t)return n;for(var i=e.nextSibling;i;){if(i===t)return-1;i=i.nextSibling}return 1}function s(e,t){var i,r,o,a,s,u,l,c=H[F][e+" "];if(c)return t?0:c.slice(0);for(s=e,u=[],l=b.preFilter;s;){(!i||(r=J.exec(s)))&&(r&&(s=s.slice(r[0].length)||s),u.push(o=[])),i=!1,(r=et.exec(s))&&(o.push(i=new I(r.shift())),s=s.slice(i.length),i.type=r[0].replace(Z," "));for(a in b.filter)!(r=st[a].exec(s))||l[a]&&!(r=l[a](r))||(o.push(i=new I(r.shift())),s=s.slice(i.length),i.type=a,i.matches=r);if(!i)break}return t?s.length:s?n.error(e):H(e,u).slice(0)}function u(e,t,n){var i=t.dir,r=n&&"parentNode"===t.dir,o=j++;return t.first?function(t,n,o){for(;t=t[i];)if(r||1===t.nodeType)return e(t,n,o)}:function(t,n,a){if(a){for(;t=t[i];)if((r||1===t.nodeType)&&e(t,n,a))return t}else for(var s,u=A+" "+o+" ",l=u+v;t=t[i];)if(r||1===t.nodeType){if((s=t[F])===l)return t.sizset;if("string"==typeof s&&0===s.indexOf(u)){if(t.sizset)return t}else{if(t[F]=l,e(t,n,a))return t.sizset=!0,t;t.sizset=!1}}}}function l(e){return e.length>1?function(t,n,i){for(var r=e.length;r--;)if(!e[r](t,n,i))return!1;return!0}:e[0]}function c(e,t,n,i,r){for(var o,a=[],s=0,u=e.length,l=null!=t;u>s;s++)(o=e[s])&&(!n||n(o,i,r))&&(a.push(o),l&&t.push(s));return a}function d(e,t,n,i,r,o){return i&&!i[F]&&(i=d(i)),r&&!r[F]&&(r=d(r,o)),L(function(o,a,s,u){var l,d,f,p=[],m=[],g=a.length,v=o||h(t||"*",s.nodeType?[s]:s,[]),y=!e||!o&&t?v:c(v,p,e,s,u),b=n?r||(o?e:g||i)?[]:a:y;if(n&&n(y,b,s,u),i)for(l=c(b,m),i(l,[],s,u),d=l.length;d--;)(f=l[d])&&(b[m[d]]=!(y[m[d]]=f));if(o){if(r||e){if(r){for(l=[],d=b.length;d--;)(f=b[d])&&l.push(y[d]=f);r(null,b=[],l,u)}for(d=b.length;d--;)(f=b[d])&&(l=r?P.call(o,f):p[d])>-1&&(o[l]=!(a[l]=f))}}else b=c(b===a?b.splice(g,b.length):b),r?r(null,a,b,u):N.apply(a,b)})}function f(e){for(var t,n,i,r=e.length,o=b.relative[e[0].type],a=o||b.relative[" "],s=o?1:0,c=u(function(e){return e===t},a,!0),p=u(function(e){return P.call(t,e)>-1},a,!0),h=[function(e,n,i){return!o&&(i||n!==T)||((t=n).nodeType?c(e,n,i):p(e,n,i))}];r>s;s++)if(n=b.relative[e[s].type])h=[u(l(h),n)];else{if(n=b.filter[e[s].type].apply(null,e[s].matches),n[F]){for(i=++s;r>i&&!b.relative[e[i].type];i++);return d(s>1&&l(h),s>1&&e.slice(0,s-1).join("").replace(Z,"$1"),n,i>s&&f(e.slice(s,i)),r>i&&f(e=e.slice(i)),r>i&&e.join(""))}h.push(n)}return l(h)}function p(e,t){var i=t.length>0,r=e.length>0,o=function(a,s,u,l,d){var f,p,h,m=[],g=0,y="0",_=a&&[],w=null!=d,x=T,k=a||r&&b.find.TAG("*",d&&s.parentNode||s),S=A+=null==x?1:Math.E;for(w&&(T=s!==M&&s,v=o.el);null!=(f=k[y]);y++){if(r&&f){for(p=0;h=e[p];p++)if(h(f,s,u)){l.push(f);break}w&&(A=S,v=++o.el)}i&&((f=!h&&f)&&g--,a&&_.push(f))}if(g+=y,i&&y!==g){for(p=0;h=t[p];p++)h(_,m,s,u);if(a){if(g>0)for(;y--;)_[y]||m[y]||(m[y]=$.call(l));m=c(m)}N.apply(l,m),w&&!a&&m.length>0&&g+t.length>1&&n.uniqueSort(l)}return w&&(A=S,T=x),_};return o.el=0,i?L(o):o}function h(e,t,i){for(var r=0,o=t.length;o>r;r++)n(e,t[r],i);return i}function m(e,t,n,i,r){{var o,a,u,l,c,d=s(e);d.length}if(!i&&1===d.length){if(a=d[0]=d[0].slice(0),a.length>2&&"ID"===(u=a[0]).type&&9===t.nodeType&&!r&&b.relative[a[1].type]){if(t=b.find.ID(u.matches[0].replace(at,""),t,r)[0],!t)return n;e=e.slice(a.shift().length)}for(o=st.POS.test(e)?-1:a.length-1;o>=0&&(u=a[o],!b.relative[l=u.type]);o--)if((c=b.find[l])&&(i=c(u.matches[0].replace(at,""),it.test(a[0].type)&&t.parentNode||t,r))){if(a.splice(o,1),e=i.length&&a.join(""),!e)return N.apply(n,O.call(i,0)),n;break}}return k(e,d)(i,t,r,n,it.test(e)),n}function g(){}var v,y,b,_,w,x,k,S,C,T,E=!0,D="undefined",F=("sizcache"+Math.random()).replace(".",""),I=String,M=e.document,B=M.documentElement,A=0,j=0,$=[].pop,N=[].push,O=[].slice,P=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(this[t]===e)return t;return-1},L=function(e,t){return e[F]=null==t||t,e},z=function(){var e={},t=[];return L(function(n,i){return t.push(n)>b.cacheLength&&delete e[t.shift()],e[n+" "]=i},e)},R=z(),H=z(),q=z(),W="[\\x20\\t\\r\\n\\f]",U="(?:\\\\.|[-\\w]|[^\\x00-\\xa0])+",V=U.replace("w","w#"),X="([*^$|!~]?=)",Y="\\["+W+"*("+U+")"+W+"*(?:"+X+W+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+V+")|)|)"+W+"*\\]",Q=":("+U+")(?:\\((?:(['\"])((?:\\\\.|[^\\\\])*?)\\2|([^()[\\]]*|(?:(?:"+Y+")|[^:]|\\\\.)*|.*))\\)|)",G=":(even|odd|eq|gt|lt|nth|first|last)(?:\\("+W+"*((?:-\\d)?\\d*)"+W+"*\\)|)(?=[^-]|$)",Z=new RegExp("^"+W+"+|((?:^|[^\\\\])(?:\\\\.)*)"+W+"+$","g"),J=new RegExp("^"+W+"*,"+W+"*"),et=new RegExp("^"+W+"*([\\x20\\t\\r\\n\\f>+~])"+W+"*"),tt=new RegExp(Q),nt=/^(?:#([\w\-]+)|(\w+)|\.([\w\-]+))$/,it=/[\x20\t\r\n\f]*[+~]/,rt=/h\d/i,ot=/input|select|textarea|button/i,at=/\\(?!\\)/g,st={ID:new RegExp("^#("+U+")"),CLASS:new RegExp("^\\.("+U+")"),NAME:new RegExp("^\\[name=['\"]?("+U+")['\"]?\\]"),TAG:new RegExp("^("+U.replace("w","w*")+")"),ATTR:new RegExp("^"+Y),PSEUDO:new RegExp("^"+Q),POS:new RegExp(G,"i"),CHILD:new RegExp("^:(only|nth|first|last)-child(?:\\("+W+"*(even|odd|(([+-]|)(\\d*)n|)"+W+"*(?:([+-]|)"+W+"*(\\d+)|))"+W+"*\\)|)","i"),needsContext:new RegExp("^"+W+"*[>+~]|"+G,"i")},ut=function(e){var t=M.createElement("div");try{return e(t)}catch(n){return!1}finally{t=null}},lt=ut(function(e){return e.appendChild(M.createComment("")),!e.getElementsByTagName("*").length}),ct=ut(function(e){return e.innerHTML="<a href='#'></a>",e.firstChild&&typeof e.firstChild.getAttribute!==D&&"#"===e.firstChild.getAttribute("href")}),dt=ut(function(e){e.innerHTML="<select></select>";var t=typeof e.lastChild.getAttribute("multiple");return"boolean"!==t&&"string"!==t}),ft=ut(function(e){return e.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",e.getElementsByClassName&&e.getElementsByClassName("e").length?(e.lastChild.className="e",2===e.getElementsByClassName("e").length):!1}),pt=ut(function(e){e.id=F+0,e.innerHTML="<a name='"+F+"'></a><div name='"+F+"'></div>",B.insertBefore(e,B.firstChild);var t=M.getElementsByName&&M.getElementsByName(F).length===2+M.getElementsByName(F+0).length;return y=!M.getElementById(F),B.removeChild(e),t});try{O.call(B.childNodes,0)[0].nodeType}catch(ht){O=function(e){for(var t,n=[];t=this[e];e++)n.push(t);return n}}n.matches=function(e,t){return n(e,null,null,t)},n.matchesSelector=function(e,t){return n(t,null,null,[e]).length>0},_=n.getText=function(e){var t,n="",i=0,r=e.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=_(e)}else if(3===r||4===r)return e.nodeValue}else for(;t=e[i];i++)n+=_(t);return n},w=n.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},x=n.contains=B.contains?function(e,t){var n=9===e.nodeType?e.documentElement:e,i=t&&t.parentNode;return e===i||!!(i&&1===i.nodeType&&n.contains&&n.contains(i))}:B.compareDocumentPosition?function(e,t){return t&&!!(16&e.compareDocumentPosition(t))}:function(e,t){for(;t=t.parentNode;)if(t===e)return!0;return!1},n.attr=function(e,t){var n,i=w(e);return i||(t=t.toLowerCase()),(n=b.attrHandle[t])?n(e):i||dt?e.getAttribute(t):(n=e.getAttributeNode(t),n?"boolean"==typeof e[t]?e[t]?t:null:n.specified?n.value:null:null)},b=n.selectors={cacheLength:50,createPseudo:L,match:st,attrHandle:ct?{}:{href:function(e){return e.getAttribute("href",2)},type:function(e){return e.getAttribute("type")}},find:{ID:y?function(e,t,n){if(typeof t.getElementById!==D&&!n){var i=t.getElementById(e);return i&&i.parentNode?[i]:[]}}:function(e,n,i){if(typeof n.getElementById!==D&&!i){var r=n.getElementById(e);return r?r.id===e||typeof r.getAttributeNode!==D&&r.getAttributeNode("id").value===e?[r]:t:[]}},TAG:lt?function(e,t){return typeof t.getElementsByTagName!==D?t.getElementsByTagName(e):void 0}:function(e,t){var n=t.getElementsByTagName(e);if("*"===e){for(var i,r=[],o=0;i=n[o];o++)1===i.nodeType&&r.push(i);return r}return n},NAME:pt&&function(e,t){return typeof t.getElementsByName!==D?t.getElementsByName(name):void 0},CLASS:ft&&function(e,t,n){return typeof t.getElementsByClassName===D||n?void 0:t.getElementsByClassName(e)}},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(at,""),e[3]=(e[4]||e[5]||"").replace(at,""),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1]?(e[2]||n.error(e[0]),e[3]=+(e[3]?e[4]+(e[5]||1):2*("even"===e[2]||"odd"===e[2])),e[4]=+(e[6]+e[7]||"odd"===e[2])):e[2]&&n.error(e[0]),e},PSEUDO:function(e){var t,n;return st.CHILD.test(e[0])?null:(e[3]?e[2]=e[3]:(t=e[4])&&(tt.test(t)&&(n=s(t,!0))&&(n=t.indexOf(")",t.length-n)-t.length)&&(t=t.slice(0,n),e[0]=e[0].slice(0,n)),e[2]=t),e.slice(0,3))}},filter:{ID:y?function(e){return e=e.replace(at,""),function(t){return t.getAttribute("id")===e}}:function(e){return e=e.replace(at,""),function(t){var n=typeof t.getAttributeNode!==D&&t.getAttributeNode("id");return n&&n.value===e}},TAG:function(e){return"*"===e?function(){return!0}:(e=e.replace(at,"").toLowerCase(),function(t){return t.nodeName&&t.nodeName.toLowerCase()===e})},CLASS:function(e){var t=R[F][e+" "];return t||(t=new RegExp("(^|"+W+")"+e+"("+W+"|$)"))&&R(e,function(e){return t.test(e.className||typeof e.getAttribute!==D&&e.getAttribute("class")||"")})},ATTR:function(e,t,i){return function(r){var o=n.attr(r,e);return null==o?"!="===t:t?(o+="","="===t?o===i:"!="===t?o!==i:"^="===t?i&&0===o.indexOf(i):"*="===t?i&&o.indexOf(i)>-1:"$="===t?i&&o.substr(o.length-i.length)===i:"~="===t?(" "+o+" ").indexOf(i)>-1:"|="===t?o===i||o.substr(0,i.length+1)===i+"-":!1):!0}},CHILD:function(e,t,n,i){return"nth"===e?function(e){var t,r,o=e.parentNode;if(1===n&&0===i)return!0;if(o)for(r=0,t=o.firstChild;t&&(1!==t.nodeType||(r++,e!==t));t=t.nextSibling);return r-=i,r===n||r%n===0&&r/n>=0}:function(t){var n=t;switch(e){case"only":case"first":for(;n=n.previousSibling;)if(1===n.nodeType)return!1;if("first"===e)return!0;n=t;case"last":for(;n=n.nextSibling;)if(1===n.nodeType)return!1;return!0}}},PSEUDO:function(e,t){var i,r=b.pseudos[e]||b.setFilters[e.toLowerCase()]||n.error("unsupported pseudo: "+e);return r[F]?r(t):r.length>1?(i=[e,e,"",t],b.setFilters.hasOwnProperty(e.toLowerCase())?L(function(e,n){for(var i,o=r(e,t),a=o.length;a--;)i=P.call(e,o[a]),e[i]=!(n[i]=o[a])}):function(e){return r(e,0,i)}):r}},pseudos:{not:L(function(e){var t=[],n=[],i=k(e.replace(Z,"$1"));return i[F]?L(function(e,t,n,r){for(var o,a=i(e,null,r,[]),s=e.length;s--;)(o=a[s])&&(e[s]=!(t[s]=o))}):function(e,r,o){return t[0]=e,i(t,null,o,n),!n.pop()}}),has:L(function(e){return function(t){return n(e,t).length>0}}),contains:L(function(e){return function(t){return(t.textContent||t.innerText||_(t)).indexOf(e)>-1}}),enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},parent:function(e){return!b.pseudos.empty(e)},empty:function(e){var t;for(e=e.firstChild;e;){if(e.nodeName>"@"||3===(t=e.nodeType)||4===t)return!1;e=e.nextSibling}return!0},header:function(e){return rt.test(e.nodeName)},text:function(e){var t,n;return"input"===e.nodeName.toLowerCase()&&"text"===(t=e.type)&&(null==(n=e.getAttribute("type"))||n.toLowerCase()===t)},radio:i("radio"),checkbox:i("checkbox"),file:i("file"),password:i("password"),image:i("image"),submit:r("submit"),reset:r("reset"),button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},input:function(e){return ot.test(e.nodeName)},focus:function(e){var t=e.ownerDocument;return e===t.activeElement&&(!t.hasFocus||t.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},active:function(e){return e===e.ownerDocument.activeElement},first:o(function(){return[0]}),last:o(function(e,t){return[t-1]}),eq:o(function(e,t,n){return[0>n?n+t:n]}),even:o(function(e,t){for(var n=0;t>n;n+=2)e.push(n);return e}),odd:o(function(e,t){for(var n=1;t>n;n+=2)e.push(n);return e}),lt:o(function(e,t,n){for(var i=0>n?n+t:n;--i>=0;)e.push(i);return e}),gt:o(function(e,t,n){for(var i=0>n?n+t:n;++i<t;)e.push(i);return e})}},S=B.compareDocumentPosition?function(e,t){return e===t?(C=!0,0):(e.compareDocumentPosition&&t.compareDocumentPosition?4&e.compareDocumentPosition(t):e.compareDocumentPosition)?-1:1}:function(e,t){if(e===t)return C=!0,0;if(e.sourceIndex&&t.sourceIndex)return e.sourceIndex-t.sourceIndex;var n,i,r=[],o=[],s=e.parentNode,u=t.parentNode,l=s;if(s===u)return a(e,t);if(!s)return-1;if(!u)return 1;for(;l;)r.unshift(l),l=l.parentNode;for(l=u;l;)o.unshift(l),l=l.parentNode;n=r.length,i=o.length;for(var c=0;n>c&&i>c;c++)if(r[c]!==o[c])return a(r[c],o[c]);return c===n?a(e,o[c],-1):a(r[c],t,1)},[0,0].sort(S),E=!C,n.uniqueSort=function(e){var t,n=[],i=1,r=0;if(C=E,e.sort(S),C){for(;t=e[i];i++)t===e[i-1]&&(r=n.push(i));for(;r--;)e.splice(n[r],1)}return e},n.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},k=n.compile=function(e,t){var n,i=[],r=[],o=q[F][e+" "];if(!o){for(t||(t=s(e)),n=t.length;n--;)o=f(t[n]),o[F]?i.push(o):r.push(o);o=q(e,p(r,i))}return o},M.querySelectorAll&&!function(){var e,t=m,i=/'|\\/g,r=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,o=[":focus"],a=[":active"],u=B.matchesSelector||B.mozMatchesSelector||B.webkitMatchesSelector||B.oMatchesSelector||B.msMatchesSelector;ut(function(e){e.innerHTML="<select><option selected=''></option></select>",e.querySelectorAll("[selected]").length||o.push("\\["+W+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)"),e.querySelectorAll(":checked").length||o.push(":checked")}),ut(function(e){e.innerHTML="<p test=''></p>",e.querySelectorAll("[test^='']").length&&o.push("[*^$]="+W+"*(?:\"\"|'')"),e.innerHTML="<input type='hidden'/>",e.querySelectorAll(":enabled").length||o.push(":enabled",":disabled")}),o=new RegExp(o.join("|")),m=function(e,n,r,a,u){if(!a&&!u&&!o.test(e)){var l,c,d=!0,f=F,p=n,h=9===n.nodeType&&e;if(1===n.nodeType&&"object"!==n.nodeName.toLowerCase()){for(l=s(e),(d=n.getAttribute("id"))?f=d.replace(i,"\\$&"):n.setAttribute("id",f),f="[id='"+f+"'] ",c=l.length;c--;)l[c]=f+l[c].join("");p=it.test(e)&&n.parentNode||n,h=l.join(",")}if(h)try{return N.apply(r,O.call(p.querySelectorAll(h),0)),r}catch(m){}finally{d||n.removeAttribute("id")}}return t(e,n,r,a,u)},u&&(ut(function(t){e=u.call(t,"div");try{u.call(t,"[test!='']:sizzle"),a.push("!=",Q)}catch(n){}}),a=new RegExp(a.join("|")),n.matchesSelector=function(t,i){if(i=i.replace(r,"='$1']"),!w(t)&&!a.test(i)&&!o.test(i))try{var s=u.call(t,i);if(s||e||t.document&&11!==t.document.nodeType)return s}catch(l){}return n(i,null,null,[t]).length>0})}(),b.pseudos.nth=b.pseudos.eq,b.filters=g.prototype=b.pseudos,b.setFilters=new g,n.attr=K.attr,K.find=n,K.expr=n.selectors,K.expr[":"]=K.expr.pseudos,K.unique=n.uniqueSort,K.text=n.getText,K.isXMLDoc=n.isXML,K.contains=n.contains}(e);var jt=/Until$/,$t=/^(?:parents|prev(?:Until|All))/,Nt=/^.[^:#\[\.,]*$/,Ot=K.expr.match.needsContext,Pt={children:!0,contents:!0,next:!0,prev:!0};K.fn.extend({find:function(e){var t,n,i,r,o,a,s=this;if("string"!=typeof e)return K(e).filter(function(){for(t=0,n=s.length;n>t;t++)if(K.contains(s[t],this))return!0});for(a=this.pushStack("","find",e),t=0,n=this.length;n>t;t++)if(i=a.length,K.find(e,this[t],a),t>0)for(r=i;r<a.length;r++)for(o=0;i>o;o++)if(a[o]===a[r]){a.splice(r--,1);break}return a},has:function(e){var t,n=K(e,this),i=n.length;return this.filter(function(){for(t=0;i>t;t++)if(K.contains(this,n[t]))return!0})},not:function(e){return this.pushStack(l(this,e,!1),"not",e)},filter:function(e){return this.pushStack(l(this,e,!0),"filter",e)},is:function(e){return!!e&&("string"==typeof e?Ot.test(e)?K(e,this.context).index(this[0])>=0:K.filter(e,this).length>0:this.filter(e).length>0)},closest:function(e,t){for(var n,i=0,r=this.length,o=[],a=Ot.test(e)||"string"!=typeof e?K(e,t||this.context):0;r>i;i++)for(n=this[i];n&&n.ownerDocument&&n!==t&&11!==n.nodeType;){if(a?a.index(n)>-1:K.find.matchesSelector(n,e)){o.push(n);break}n=n.parentNode}return o=o.length>1?K.unique(o):o,this.pushStack(o,"closest",e)},index:function(e){return e?"string"==typeof e?K.inArray(this[0],K(e)):K.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(e,t){var n="string"==typeof e?K(e,t):K.makeArray(e&&e.nodeType?[e]:e),i=K.merge(this.get(),n);return this.pushStack(s(n[0])||s(i[0])?i:K.unique(i))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),K.fn.andSelf=K.fn.addBack,K.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return K.dir(e,"parentNode")},parentsUntil:function(e,t,n){return K.dir(e,"parentNode",n)},next:function(e){return u(e,"nextSibling")},prev:function(e){return u(e,"previousSibling")},nextAll:function(e){return K.dir(e,"nextSibling")},prevAll:function(e){return K.dir(e,"previousSibling")},nextUntil:function(e,t,n){return K.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return K.dir(e,"previousSibling",n)},siblings:function(e){return K.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return K.sibling(e.firstChild)},contents:function(e){return K.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:K.merge([],e.childNodes)}},function(e,t){K.fn[e]=function(n,i){var r=K.map(this,t,n);return jt.test(e)||(i=n),i&&"string"==typeof i&&(r=K.filter(i,r)),r=this.length>1&&!Pt[e]?K.unique(r):r,this.length>1&&$t.test(e)&&(r=r.reverse()),this.pushStack(r,e,X.call(arguments).join(","))}}),K.extend({filter:function(e,t,n){return n&&(e=":not("+e+")"),1===t.length?K.find.matchesSelector(t[0],e)?[t[0]]:[]:K.find.matches(e,t)},dir:function(e,n,i){for(var r=[],o=e[n];o&&9!==o.nodeType&&(i===t||1!==o.nodeType||!K(o).is(i));)1===o.nodeType&&r.push(o),o=o[n];return r},sibling:function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}});var Lt="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",zt=/ jQuery\d+="(?:null|\d+)"/g,Rt=/^\s+/,Ht=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,qt=/<([\w:]+)/,Wt=/<tbody/i,Ut=/<|&#?\w+;/,Vt=/<(?:script|style|link)/i,Xt=/<(?:script|object|embed|option|style)/i,Yt=new RegExp("<(?:"+Lt+")[\\s/>]","i"),Qt=/^(?:checkbox|radio)$/,Gt=/checked\s*(?:[^=]|=\s*.checked.)/i,Zt=/\/(java|ecma)script/i,Kt=/^\s*<!(?:\[CDATA\[|\-\-)|[\]\-]{2}>\s*$/g,Jt={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},en=c(R),tn=en.appendChild(R.createElement("div"));Jt.optgroup=Jt.option,Jt.tbody=Jt.tfoot=Jt.colgroup=Jt.caption=Jt.thead,Jt.th=Jt.td,K.support.htmlSerialize||(Jt._default=[1,"X<div>","</div>"]),K.fn.extend({text:function(e){return K.access(this,function(e){return e===t?K.text(this):this.empty().append((this[0]&&this[0].ownerDocument||R).createTextNode(e))},null,e,arguments.length)},wrapAll:function(e){if(K.isFunction(e))return this.each(function(t){K(this).wrapAll(e.call(this,t))});if(this[0]){var t=K(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstChild&&1===e.firstChild.nodeType;)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return this.each(K.isFunction(e)?function(t){K(this).wrapInner(e.call(this,t))}:function(){var t=K(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=K.isFunction(e);return this.each(function(n){K(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){K.nodeName(this,"body")||K(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(e){(1===this.nodeType||11===this.nodeType)&&this.appendChild(e)})},prepend:function(){return this.domManip(arguments,!0,function(e){(1===this.nodeType||11===this.nodeType)&&this.insertBefore(e,this.firstChild)})},before:function(){if(!s(this[0]))return this.domManip(arguments,!1,function(e){this.parentNode.insertBefore(e,this)});if(arguments.length){var e=K.clean(arguments);return this.pushStack(K.merge(e,this),"before",this.selector)}},after:function(){if(!s(this[0]))return this.domManip(arguments,!1,function(e){this.parentNode.insertBefore(e,this.nextSibling)});if(arguments.length){var e=K.clean(arguments);return this.pushStack(K.merge(this,e),"after",this.selector)}},remove:function(e,t){for(var n,i=0;null!=(n=this[i]);i++)(!e||K.filter(e,[n]).length)&&(t||1!==n.nodeType||(K.cleanData(n.getElementsByTagName("*")),K.cleanData([n])),n.parentNode&&n.parentNode.removeChild(n));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)for(1===e.nodeType&&K.cleanData(e.getElementsByTagName("*"));e.firstChild;)e.removeChild(e.firstChild);return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return K.clone(this,e,t)})},html:function(e){return K.access(this,function(e){var n=this[0]||{},i=0,r=this.length;if(e===t)return 1===n.nodeType?n.innerHTML.replace(zt,""):t;if(!("string"!=typeof e||Vt.test(e)||!K.support.htmlSerialize&&Yt.test(e)||!K.support.leadingWhitespace&&Rt.test(e)||Jt[(qt.exec(e)||["",""])[1].toLowerCase()])){e=e.replace(Ht,"<$1></$2>");try{for(;r>i;i++)n=this[i]||{},1===n.nodeType&&(K.cleanData(n.getElementsByTagName("*")),n.innerHTML=e);n=0}catch(o){}}n&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(e){return s(this[0])?this.length?this.pushStack(K(K.isFunction(e)?e():e),"replaceWith",e):this:K.isFunction(e)?this.each(function(t){var n=K(this),i=n.html();n.replaceWith(e.call(this,t,i))}):("string"!=typeof e&&(e=K(e).detach()),this.each(function(){var t=this.nextSibling,n=this.parentNode;K(this).remove(),t?K(t).before(e):K(n).append(e)}))},detach:function(e){return this.remove(e,!0)},domManip:function(e,n,i){e=[].concat.apply([],e);var r,o,a,s,u=0,l=e[0],c=[],f=this.length;if(!K.support.checkClone&&f>1&&"string"==typeof l&&Gt.test(l))return this.each(function(){K(this).domManip(e,n,i)});if(K.isFunction(l))return this.each(function(r){var o=K(this);e[0]=l.call(this,r,n?o.html():t),o.domManip(e,n,i)});if(this[0]){if(r=K.buildFragment(e,this,c),a=r.fragment,o=a.firstChild,1===a.childNodes.length&&(a=o),o)for(n=n&&K.nodeName(o,"tr"),s=r.cacheable||f-1;f>u;u++)i.call(n&&K.nodeName(this[u],"table")?d(this[u],"tbody"):this[u],u===s?a:K.clone(a,!0,!0));a=o=null,c.length&&K.each(c,function(e,t){t.src?K.ajax?K.ajax({url:t.src,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0}):K.error("no ajax"):K.globalEval((t.text||t.textContent||t.innerHTML||"").replace(Kt,"")),t.parentNode&&t.parentNode.removeChild(t)})}return this}}),K.buildFragment=function(e,n,i){var r,o,a,s=e[0];return n=n||R,n=!n.nodeType&&n[0]||n,n=n.ownerDocument||n,!(1===e.length&&"string"==typeof s&&s.length<512&&n===R&&"<"===s.charAt(0))||Xt.test(s)||!K.support.checkClone&&Gt.test(s)||!K.support.html5Clone&&Yt.test(s)||(o=!0,r=K.fragments[s],a=r!==t),r||(r=n.createDocumentFragment(),K.clean(e,n,r,i),o&&(K.fragments[s]=a&&r)),{fragment:r,cacheable:o}},K.fragments={},K.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){K.fn[e]=function(n){var i,r=0,o=[],a=K(n),s=a.length,u=1===this.length&&this[0].parentNode;if((null==u||u&&11===u.nodeType&&1===u.childNodes.length)&&1===s)return a[t](this[0]),this;for(;s>r;r++)i=(r>0?this.clone(!0):this).get(),K(a[r])[t](i),o=o.concat(i);return this.pushStack(o,e,a.selector)}}),K.extend({clone:function(e,t,n){var i,r,o,a;if(K.support.html5Clone||K.isXMLDoc(e)||!Yt.test("<"+e.nodeName+">")?a=e.cloneNode(!0):(tn.innerHTML=e.outerHTML,tn.removeChild(a=tn.firstChild)),!(K.support.noCloneEvent&&K.support.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||K.isXMLDoc(e)))for(p(e,a),i=h(e),r=h(a),o=0;i[o];++o)r[o]&&p(i[o],r[o]);if(t&&(f(e,a),n))for(i=h(e),r=h(a),o=0;i[o];++o)f(i[o],r[o]);return i=r=null,a},clean:function(e,t,n,i){var r,o,a,s,u,l,d,f,p,h,g,v=t===R&&en,y=[];for(t&&"undefined"!=typeof t.createDocumentFragment||(t=R),r=0;null!=(a=e[r]);r++)if("number"==typeof a&&(a+=""),a){if("string"==typeof a)if(Ut.test(a)){for(v=v||c(t),d=t.createElement("div"),v.appendChild(d),a=a.replace(Ht,"<$1></$2>"),s=(qt.exec(a)||["",""])[1].toLowerCase(),u=Jt[s]||Jt._default,l=u[0],d.innerHTML=u[1]+a+u[2];l--;)d=d.lastChild;if(!K.support.tbody)for(f=Wt.test(a),p="table"!==s||f?"<table>"!==u[1]||f?[]:d.childNodes:d.firstChild&&d.firstChild.childNodes,o=p.length-1;o>=0;--o)K.nodeName(p[o],"tbody")&&!p[o].childNodes.length&&p[o].parentNode.removeChild(p[o]);!K.support.leadingWhitespace&&Rt.test(a)&&d.insertBefore(t.createTextNode(Rt.exec(a)[0]),d.firstChild),a=d.childNodes,d.parentNode.removeChild(d)}else a=t.createTextNode(a);a.nodeType?y.push(a):K.merge(y,a)}if(d&&(a=d=v=null),!K.support.appendChecked)for(r=0;null!=(a=y[r]);r++)K.nodeName(a,"input")?m(a):"undefined"!=typeof a.getElementsByTagName&&K.grep(a.getElementsByTagName("input"),m);if(n)for(h=function(e){return!e.type||Zt.test(e.type)?i?i.push(e.parentNode?e.parentNode.removeChild(e):e):n.appendChild(e):void 0},r=0;null!=(a=y[r]);r++)K.nodeName(a,"script")&&h(a)||(n.appendChild(a),"undefined"!=typeof a.getElementsByTagName&&(g=K.grep(K.merge([],a.getElementsByTagName("script")),h),y.splice.apply(y,[r+1,0].concat(g)),r+=g.length));return y},cleanData:function(e,t){for(var n,i,r,o,a=0,s=K.expando,u=K.cache,l=K.support.deleteExpando,c=K.event.special;null!=(r=e[a]);a++)if((t||K.acceptData(r))&&(i=r[s],n=i&&u[i])){if(n.events)for(o in n.events)c[o]?K.event.remove(r,o):K.removeEvent(r,o,n.handle);u[i]&&(delete u[i],l?delete r[s]:r.removeAttribute?r.removeAttribute(s):r[s]=null,K.deletedIds.push(i))}}}),function(){var e,t;K.uaMatch=function(e){e=e.toLowerCase();var t=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0"}},e=K.uaMatch(q.userAgent),t={},e.browser&&(t[e.browser]=!0,t.version=e.version),t.chrome?t.webkit=!0:t.webkit&&(t.safari=!0),K.browser=t,K.sub=function(){function e(t,n){return new e.fn.init(t,n)}K.extend(!0,e,this),e.superclass=this,e.fn=e.prototype=this(),e.fn.constructor=e,e.sub=this.sub,e.fn.init=function(n,i){return i&&i instanceof K&&!(i instanceof e)&&(i=e(i)),K.fn.init.call(this,n,i,t)},e.fn.init.prototype=e.fn;var t=e(R);return e}}();var nn,rn,on,an=/alpha\([^)]*\)/i,sn=/opacity=([^)]*)/,un=/^(top|right|bottom|left)$/,ln=/^(none|table(?!-c[ea]).+)/,cn=/^margin/,dn=new RegExp("^("+J+")(.*)$","i"),fn=new RegExp("^("+J+")(?!px)[a-z%]+$","i"),pn=new RegExp("^([-+])=("+J+")","i"),hn={BODY:"block"},mn={position:"absolute",visibility:"hidden",display:"block"},gn={letterSpacing:0,fontWeight:400},vn=["Top","Right","Bottom","Left"],yn=["Webkit","O","Moz","ms"],bn=K.fn.toggle;K.fn.extend({css:function(e,n){return K.access(this,function(e,n,i){return i!==t?K.style(e,n,i):K.css(e,n)},e,n,arguments.length>1)},show:function(){return y(this,!0)},hide:function(){return y(this)},toggle:function(e,t){var n="boolean"==typeof e;return K.isFunction(e)&&K.isFunction(t)?bn.apply(this,arguments):this.each(function(){(n?e:v(this))?K(this).show():K(this).hide()})}}),K.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=nn(e,"opacity");return""===n?"1":n}}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":K.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,n,i,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var o,a,s,u=K.camelCase(n),l=e.style;if(n=K.cssProps[u]||(K.cssProps[u]=g(l,u)),s=K.cssHooks[n]||K.cssHooks[u],i===t)return s&&"get"in s&&(o=s.get(e,!1,r))!==t?o:l[n];if(a=typeof i,"string"===a&&(o=pn.exec(i))&&(i=(o[1]+1)*o[2]+parseFloat(K.css(e,n)),a="number"),!(null==i||"number"===a&&isNaN(i)||("number"!==a||K.cssNumber[u]||(i+="px"),s&&"set"in s&&(i=s.set(e,i,r))===t)))try{l[n]=i}catch(c){}}},css:function(e,n,i,r){var o,a,s,u=K.camelCase(n);return n=K.cssProps[u]||(K.cssProps[u]=g(e.style,u)),s=K.cssHooks[n]||K.cssHooks[u],s&&"get"in s&&(o=s.get(e,!0,r)),o===t&&(o=nn(e,n)),"normal"===o&&n in gn&&(o=gn[n]),i||r!==t?(a=parseFloat(o),i||K.isNumeric(a)?a||0:o):o},swap:function(e,t,n){var i,r,o={};for(r in t)o[r]=e.style[r],e.style[r]=t[r];i=n.call(e);for(r in t)e.style[r]=o[r];return i}}),e.getComputedStyle?nn=function(t,n){var i,r,o,a,s=e.getComputedStyle(t,null),u=t.style;return s&&(i=s.getPropertyValue(n)||s[n],""!==i||K.contains(t.ownerDocument,t)||(i=K.style(t,n)),fn.test(i)&&cn.test(n)&&(r=u.width,o=u.minWidth,a=u.maxWidth,u.minWidth=u.maxWidth=u.width=i,i=s.width,u.width=r,u.minWidth=o,u.maxWidth=a)),i}:R.documentElement.currentStyle&&(nn=function(e,t){var n,i,r=e.currentStyle&&e.currentStyle[t],o=e.style;return null==r&&o&&o[t]&&(r=o[t]),fn.test(r)&&!un.test(t)&&(n=o.left,i=e.runtimeStyle&&e.runtimeStyle.left,i&&(e.runtimeStyle.left=e.currentStyle.left),o.left="fontSize"===t?"1em":r,r=o.pixelLeft+"px",o.left=n,i&&(e.runtimeStyle.left=i)),""===r?"auto":r}),K.each(["height","width"],function(e,t){K.cssHooks[t]={get:function(e,n,i){return n?0===e.offsetWidth&&ln.test(nn(e,"display"))?K.swap(e,mn,function(){return w(e,t,i)}):w(e,t,i):void 0},set:function(e,n,i){return b(e,n,i?_(e,t,i,K.support.boxSizing&&"border-box"===K.css(e,"boxSizing")):0)}}}),K.support.opacity||(K.cssHooks.opacity={get:function(e,t){return sn.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,i=e.currentStyle,r=K.isNumeric(t)?"alpha(opacity="+100*t+")":"",o=i&&i.filter||n.filter||"";n.zoom=1,t>=1&&""===K.trim(o.replace(an,""))&&n.removeAttribute&&(n.removeAttribute("filter"),i&&!i.filter)||(n.filter=an.test(o)?o.replace(an,r):o+" "+r)}}),K(function(){K.support.reliableMarginRight||(K.cssHooks.marginRight={get:function(e,t){return K.swap(e,{display:"inline-block"},function(){return t?nn(e,"marginRight"):void 0})}}),!K.support.pixelPosition&&K.fn.position&&K.each(["top","left"],function(e,t){K.cssHooks[t]={get:function(e,n){if(n){var i=nn(e,t);return fn.test(i)?K(e).position()[t]+"px":i}}}})}),K.expr&&K.expr.filters&&(K.expr.filters.hidden=function(e){return 0===e.offsetWidth&&0===e.offsetHeight||!K.support.reliableHiddenOffsets&&"none"===(e.style&&e.style.display||nn(e,"display"))},K.expr.filters.visible=function(e){return!K.expr.filters.hidden(e)}),K.each({margin:"",padding:"",border:"Width"},function(e,t){K.cssHooks[e+t]={expand:function(n){var i,r="string"==typeof n?n.split(" "):[n],o={};for(i=0;4>i;i++)o[e+vn[i]+t]=r[i]||r[i-2]||r[0];return o}},cn.test(e)||(K.cssHooks[e+t].set=b)});var _n=/%20/g,wn=/\[\]$/,xn=/\r?\n/g,kn=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,Sn=/^(?:select|textarea)/i;K.fn.extend({serialize:function(){return K.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?K.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||Sn.test(this.nodeName)||kn.test(this.type))}).map(function(e,t){var n=K(this).val();return null==n?null:K.isArray(n)?K.map(n,function(e){return{name:t.name,value:e.replace(xn,"\r\n")}}):{name:t.name,value:n.replace(xn,"\r\n")}}).get()}}),K.param=function(e,n){var i,r=[],o=function(e,t){t=K.isFunction(t)?t():null==t?"":t,r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)
};if(n===t&&(n=K.ajaxSettings&&K.ajaxSettings.traditional),K.isArray(e)||e.jquery&&!K.isPlainObject(e))K.each(e,function(){o(this.name,this.value)});else for(i in e)k(i,e[i],n,o);return r.join("&").replace(_n,"+")};var Cn,Tn,En=/#.*$/,Dn=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Fn=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,In=/^(?:GET|HEAD)$/,Mn=/^\/\//,Bn=/\?/,An=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,jn=/([?&])_=[^&]*/,$n=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,Nn=K.fn.load,On={},Pn={},Ln=["*/"]+["*"];try{Tn=H.href}catch(zn){Tn=R.createElement("a"),Tn.href="",Tn=Tn.href}Cn=$n.exec(Tn.toLowerCase())||[],K.fn.load=function(e,n,i){if("string"!=typeof e&&Nn)return Nn.apply(this,arguments);if(!this.length)return this;var r,o,a,s=this,u=e.indexOf(" ");return u>=0&&(r=e.slice(u,e.length),e=e.slice(0,u)),K.isFunction(n)?(i=n,n=t):n&&"object"==typeof n&&(o="POST"),K.ajax({url:e,type:o,dataType:"html",data:n,complete:function(e,t){i&&s.each(i,a||[e.responseText,t,e])}}).done(function(e){a=arguments,s.html(r?K("<div>").append(e.replace(An,"")).find(r):e)}),this},K.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(e,t){K.fn[t]=function(e){return this.on(t,e)}}),K.each(["get","post"],function(e,n){K[n]=function(e,i,r,o){return K.isFunction(i)&&(o=o||r,r=i,i=t),K.ajax({type:n,url:e,data:i,success:r,dataType:o})}}),K.extend({getScript:function(e,n){return K.get(e,t,n,"script")},getJSON:function(e,t,n){return K.get(e,t,n,"json")},ajaxSetup:function(e,t){return t?T(e,K.ajaxSettings):(t=e,e=K.ajaxSettings),T(e,t),e},ajaxSettings:{url:Tn,isLocal:Fn.test(Cn[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":Ln},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":e.String,"text html":!0,"text json":K.parseJSON,"text xml":K.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:S(On),ajaxTransport:S(Pn),ajax:function(e,n){function i(e,n,i,a){var l,d,y,b,w,k=n;2!==_&&(_=2,u&&clearTimeout(u),s=t,o=a||"",x.readyState=e>0?4:0,i&&(b=E(f,x,i)),e>=200&&300>e||304===e?(f.ifModified&&(w=x.getResponseHeader("Last-Modified"),w&&(K.lastModified[r]=w),w=x.getResponseHeader("Etag"),w&&(K.etag[r]=w)),304===e?(k="notmodified",l=!0):(l=D(f,b),k=l.state,d=l.data,y=l.error,l=!y)):(y=k,(!k||e)&&(k="error",0>e&&(e=0))),x.status=e,x.statusText=(n||k)+"",l?m.resolveWith(p,[d,k,x]):m.rejectWith(p,[x,k,y]),x.statusCode(v),v=t,c&&h.trigger("ajax"+(l?"Success":"Error"),[x,f,l?d:y]),g.fireWith(p,[x,k]),c&&(h.trigger("ajaxComplete",[x,f]),--K.active||K.event.trigger("ajaxStop")))}"object"==typeof e&&(n=e,e=t),n=n||{};var r,o,a,s,u,l,c,d,f=K.ajaxSetup({},n),p=f.context||f,h=p!==f&&(p.nodeType||p instanceof K)?K(p):K.event,m=K.Deferred(),g=K.Callbacks("once memory"),v=f.statusCode||{},y={},b={},_=0,w="canceled",x={readyState:0,setRequestHeader:function(e,t){if(!_){var n=e.toLowerCase();e=b[n]=b[n]||e,y[e]=t}return this},getAllResponseHeaders:function(){return 2===_?o:null},getResponseHeader:function(e){var n;if(2===_){if(!a)for(a={};n=Dn.exec(o);)a[n[1].toLowerCase()]=n[2];n=a[e.toLowerCase()]}return n===t?null:n},overrideMimeType:function(e){return _||(f.mimeType=e),this},abort:function(e){return e=e||w,s&&s.abort(e),i(0,e),this}};if(m.promise(x),x.success=x.done,x.error=x.fail,x.complete=g.add,x.statusCode=function(e){if(e){var t;if(2>_)for(t in e)v[t]=[v[t],e[t]];else t=e[x.status],x.always(t)}return this},f.url=((e||f.url)+"").replace(En,"").replace(Mn,Cn[1]+"//"),f.dataTypes=K.trim(f.dataType||"*").toLowerCase().split(tt),null==f.crossDomain&&(l=$n.exec(f.url.toLowerCase()),f.crossDomain=!(!l||l[1]===Cn[1]&&l[2]===Cn[2]&&(l[3]||("http:"===l[1]?80:443))==(Cn[3]||("http:"===Cn[1]?80:443)))),f.data&&f.processData&&"string"!=typeof f.data&&(f.data=K.param(f.data,f.traditional)),C(On,f,n,x),2===_)return x;if(c=f.global,f.type=f.type.toUpperCase(),f.hasContent=!In.test(f.type),c&&0===K.active++&&K.event.trigger("ajaxStart"),!f.hasContent&&(f.data&&(f.url+=(Bn.test(f.url)?"&":"?")+f.data,delete f.data),r=f.url,f.cache===!1)){var k=K.now(),S=f.url.replace(jn,"$1_="+k);f.url=S+(S===f.url?(Bn.test(f.url)?"&":"?")+"_="+k:"")}(f.data&&f.hasContent&&f.contentType!==!1||n.contentType)&&x.setRequestHeader("Content-Type",f.contentType),f.ifModified&&(r=r||f.url,K.lastModified[r]&&x.setRequestHeader("If-Modified-Since",K.lastModified[r]),K.etag[r]&&x.setRequestHeader("If-None-Match",K.etag[r])),x.setRequestHeader("Accept",f.dataTypes[0]&&f.accepts[f.dataTypes[0]]?f.accepts[f.dataTypes[0]]+("*"!==f.dataTypes[0]?", "+Ln+"; q=0.01":""):f.accepts["*"]);for(d in f.headers)x.setRequestHeader(d,f.headers[d]);if(f.beforeSend&&(f.beforeSend.call(p,x,f)===!1||2===_))return x.abort();w="abort";for(d in{success:1,error:1,complete:1})x[d](f[d]);if(s=C(Pn,f,n,x)){x.readyState=1,c&&h.trigger("ajaxSend",[x,f]),f.async&&f.timeout>0&&(u=setTimeout(function(){x.abort("timeout")},f.timeout));try{_=1,s.send(y,i)}catch(T){if(!(2>_))throw T;i(-1,T)}}else i(-1,"No Transport");return x},active:0,lastModified:{},etag:{}});var Rn=[],Hn=/\?/,qn=/(=)\?(?=&|$)|\?\?/,Wn=K.now();K.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Rn.pop()||K.expando+"_"+Wn++;return this[e]=!0,e}}),K.ajaxPrefilter("json jsonp",function(n,i,r){var o,a,s,u=n.data,l=n.url,c=n.jsonp!==!1,d=c&&qn.test(l),f=c&&!d&&"string"==typeof u&&!(n.contentType||"").indexOf("application/x-www-form-urlencoded")&&qn.test(u);return"jsonp"===n.dataTypes[0]||d||f?(o=n.jsonpCallback=K.isFunction(n.jsonpCallback)?n.jsonpCallback():n.jsonpCallback,a=e[o],d?n.url=l.replace(qn,"$1"+o):f?n.data=u.replace(qn,"$1"+o):c&&(n.url+=(Hn.test(l)?"&":"?")+n.jsonp+"="+o),n.converters["script json"]=function(){return s||K.error(o+" was not called"),s[0]},n.dataTypes[0]="json",e[o]=function(){s=arguments},r.always(function(){e[o]=a,n[o]&&(n.jsonpCallback=i.jsonpCallback,Rn.push(o)),s&&K.isFunction(a)&&a(s[0]),s=a=t}),"script"):void 0}),K.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(e){return K.globalEval(e),e}}}),K.ajaxPrefilter("script",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),K.ajaxTransport("script",function(e){if(e.crossDomain){var n,i=R.head||R.getElementsByTagName("head")[0]||R.documentElement;return{send:function(r,o){n=R.createElement("script"),n.async="async",e.scriptCharset&&(n.charset=e.scriptCharset),n.src=e.url,n.onload=n.onreadystatechange=function(e,r){(r||!n.readyState||/loaded|complete/.test(n.readyState))&&(n.onload=n.onreadystatechange=null,i&&n.parentNode&&i.removeChild(n),n=t,r||o(200,"success"))},i.insertBefore(n,i.firstChild)},abort:function(){n&&n.onload(0,1)}}}});var Un,Vn=e.ActiveXObject?function(){for(var e in Un)Un[e](0,1)}:!1,Xn=0;K.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&F()||I()}:F,function(e){K.extend(K.support,{ajax:!!e,cors:!!e&&"withCredentials"in e})}(K.ajaxSettings.xhr()),K.support.ajax&&K.ajaxTransport(function(n){if(!n.crossDomain||K.support.cors){var i;return{send:function(r,o){var a,s,u=n.xhr();if(n.username?u.open(n.type,n.url,n.async,n.username,n.password):u.open(n.type,n.url,n.async),n.xhrFields)for(s in n.xhrFields)u[s]=n.xhrFields[s];n.mimeType&&u.overrideMimeType&&u.overrideMimeType(n.mimeType),n.crossDomain||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest");try{for(s in r)u.setRequestHeader(s,r[s])}catch(l){}u.send(n.hasContent&&n.data||null),i=function(e,r){var s,l,c,d,f;try{if(i&&(r||4===u.readyState))if(i=t,a&&(u.onreadystatechange=K.noop,Vn&&delete Un[a]),r)4!==u.readyState&&u.abort();else{s=u.status,c=u.getAllResponseHeaders(),d={},f=u.responseXML,f&&f.documentElement&&(d.xml=f);try{d.text=u.responseText}catch(p){}try{l=u.statusText}catch(p){l=""}s||!n.isLocal||n.crossDomain?1223===s&&(s=204):s=d.text?200:404}}catch(h){r||o(-1,h)}d&&o(s,l,d,c)},n.async?4===u.readyState?setTimeout(i,0):(a=++Xn,Vn&&(Un||(Un={},K(e).unload(Vn)),Un[a]=i),u.onreadystatechange=i):i()},abort:function(){i&&i(0,1)}}}});var Yn,Qn,Gn=/^(?:toggle|show|hide)$/,Zn=new RegExp("^(?:([-+])=|)("+J+")([a-z%]*)$","i"),Kn=/queueHooks$/,Jn=[$],ei={"*":[function(e,t){var n,i,r=this.createTween(e,t),o=Zn.exec(t),a=r.cur(),s=+a||0,u=1,l=20;if(o){if(n=+o[2],i=o[3]||(K.cssNumber[e]?"":"px"),"px"!==i&&s){s=K.css(r.elem,e,!0)||n||1;do u=u||".5",s/=u,K.style(r.elem,e,s+i);while(u!==(u=r.cur()/a)&&1!==u&&--l)}r.unit=i,r.start=s,r.end=o[1]?s+(o[1]+1)*n:n}return r}]};K.Animation=K.extend(A,{tweener:function(e,t){K.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var n,i=0,r=e.length;r>i;i++)n=e[i],ei[n]=ei[n]||[],ei[n].unshift(t)},prefilter:function(e,t){t?Jn.unshift(e):Jn.push(e)}}),K.Tween=N,N.prototype={constructor:N,init:function(e,t,n,i,r,o){this.elem=e,this.prop=n,this.easing=r||"swing",this.options=t,this.start=this.now=this.cur(),this.end=i,this.unit=o||(K.cssNumber[n]?"":"px")},cur:function(){var e=N.propHooks[this.prop];return e&&e.get?e.get(this):N.propHooks._default.get(this)},run:function(e){var t,n=N.propHooks[this.prop];return this.pos=t=this.options.duration?K.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):N.propHooks._default.set(this),this}},N.prototype.init.prototype=N.prototype,N.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=K.css(e.elem,e.prop,!1,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){K.fx.step[e.prop]?K.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[K.cssProps[e.prop]]||K.cssHooks[e.prop])?K.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},N.propHooks.scrollTop=N.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},K.each(["toggle","show","hide"],function(e,t){var n=K.fn[t];K.fn[t]=function(i,r,o){return null==i||"boolean"==typeof i||!e&&K.isFunction(i)&&K.isFunction(r)?n.apply(this,arguments):this.animate(O(t,!0),i,r,o)}}),K.fn.extend({fadeTo:function(e,t,n,i){return this.filter(v).css("opacity",0).show().end().animate({opacity:t},e,n,i)},animate:function(e,t,n,i){var r=K.isEmptyObject(e),o=K.speed(t,n,i),a=function(){var t=A(this,K.extend({},e),o);r&&t.stop(!0)};return r||o.queue===!1?this.each(a):this.queue(o.queue,a)},stop:function(e,n,i){var r=function(e){var t=e.stop;delete e.stop,t(i)};return"string"!=typeof e&&(i=n,n=e,e=t),n&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,n=null!=e&&e+"queueHooks",o=K.timers,a=K._data(this);if(n)a[n]&&a[n].stop&&r(a[n]);else for(n in a)a[n]&&a[n].stop&&Kn.test(n)&&r(a[n]);for(n=o.length;n--;)o[n].elem!==this||null!=e&&o[n].queue!==e||(o[n].anim.stop(i),t=!1,o.splice(n,1));(t||!i)&&K.dequeue(this,e)})}}),K.each({slideDown:O("show"),slideUp:O("hide"),slideToggle:O("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){K.fn[e]=function(e,n,i){return this.animate(t,e,n,i)}}),K.speed=function(e,t,n){var i=e&&"object"==typeof e?K.extend({},e):{complete:n||!n&&t||K.isFunction(e)&&e,duration:e,easing:n&&t||t&&!K.isFunction(t)&&t};return i.duration=K.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in K.fx.speeds?K.fx.speeds[i.duration]:K.fx.speeds._default,(null==i.queue||i.queue===!0)&&(i.queue="fx"),i.old=i.complete,i.complete=function(){K.isFunction(i.old)&&i.old.call(this),i.queue&&K.dequeue(this,i.queue)},i},K.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},K.timers=[],K.fx=N.prototype.init,K.fx.tick=function(){var e,n=K.timers,i=0;for(Yn=K.now();i<n.length;i++)e=n[i],e()||n[i]!==e||n.splice(i--,1);n.length||K.fx.stop(),Yn=t},K.fx.timer=function(e){e()&&K.timers.push(e)&&!Qn&&(Qn=setInterval(K.fx.tick,K.fx.interval))},K.fx.interval=13,K.fx.stop=function(){clearInterval(Qn),Qn=null},K.fx.speeds={slow:600,fast:200,_default:400},K.fx.step={},K.expr&&K.expr.filters&&(K.expr.filters.animated=function(e){return K.grep(K.timers,function(t){return e===t.elem}).length});var ti=/^(?:body|html)$/i;K.fn.offset=function(e){if(arguments.length)return e===t?this:this.each(function(t){K.offset.setOffset(this,e,t)});var n,i,r,o,a,s,u,l={top:0,left:0},c=this[0],d=c&&c.ownerDocument;if(d)return(i=d.body)===c?K.offset.bodyOffset(c):(n=d.documentElement,K.contains(n,c)?("undefined"!=typeof c.getBoundingClientRect&&(l=c.getBoundingClientRect()),r=P(d),o=n.clientTop||i.clientTop||0,a=n.clientLeft||i.clientLeft||0,s=r.pageYOffset||n.scrollTop,u=r.pageXOffset||n.scrollLeft,{top:l.top+s-o,left:l.left+u-a}):l)},K.offset={bodyOffset:function(e){var t=e.offsetTop,n=e.offsetLeft;return K.support.doesNotIncludeMarginInBodyOffset&&(t+=parseFloat(K.css(e,"marginTop"))||0,n+=parseFloat(K.css(e,"marginLeft"))||0),{top:t,left:n}},setOffset:function(e,t,n){var i=K.css(e,"position");"static"===i&&(e.style.position="relative");var r,o,a=K(e),s=a.offset(),u=K.css(e,"top"),l=K.css(e,"left"),c=("absolute"===i||"fixed"===i)&&K.inArray("auto",[u,l])>-1,d={},f={};c?(f=a.position(),r=f.top,o=f.left):(r=parseFloat(u)||0,o=parseFloat(l)||0),K.isFunction(t)&&(t=t.call(e,n,s)),null!=t.top&&(d.top=t.top-s.top+r),null!=t.left&&(d.left=t.left-s.left+o),"using"in t?t.using.call(e,d):a.css(d)}},K.fn.extend({position:function(){if(this[0]){var e=this[0],t=this.offsetParent(),n=this.offset(),i=ti.test(t[0].nodeName)?{top:0,left:0}:t.offset();return n.top-=parseFloat(K.css(e,"marginTop"))||0,n.left-=parseFloat(K.css(e,"marginLeft"))||0,i.top+=parseFloat(K.css(t[0],"borderTopWidth"))||0,i.left+=parseFloat(K.css(t[0],"borderLeftWidth"))||0,{top:n.top-i.top,left:n.left-i.left}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||R.body;e&&!ti.test(e.nodeName)&&"static"===K.css(e,"position");)e=e.offsetParent;return e||R.body})}}),K.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,n){var i=/Y/.test(n);K.fn[e]=function(r){return K.access(this,function(e,r,o){var a=P(e);return o===t?a?n in a?a[n]:a.document.documentElement[r]:e[r]:void(a?a.scrollTo(i?K(a).scrollLeft():o,i?o:K(a).scrollTop()):e[r]=o)},e,r,arguments.length,null)}}),K.each({Height:"height",Width:"width"},function(e,n){K.each({padding:"inner"+e,content:n,"":"outer"+e},function(i,r){K.fn[r]=function(r,o){var a=arguments.length&&(i||"boolean"!=typeof r),s=i||(r===!0||o===!0?"margin":"border");return K.access(this,function(n,i,r){var o;return K.isWindow(n)?n.document.documentElement["client"+e]:9===n.nodeType?(o=n.documentElement,Math.max(n.body["scroll"+e],o["scroll"+e],n.body["offset"+e],o["offset"+e],o["client"+e])):r===t?K.css(n,i,r,s):K.style(n,i,r,s)},n,a?r:t,a,null)}})}),e.jQuery=e.$=K,"function"==typeof define&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return K})}(window),jQuery.effects||function(e,t){var n=e.uiBackCompat!==!1,i="ui-effects-";e.effects={effect:{}},/*!
 * jQuery Color Animations v2.0.0
 * http://jquery.com/
 *
 * Copyright 2012 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * Date: Mon Aug 13 13:41:02 2012 -0500
 */
function(t,n){function i(e,t,n){var i=f[t.type]||{};return null==e?n||!t.def?null:t.def:(e=i.floor?~~e:parseFloat(e),isNaN(e)?t.def:i.mod?(e+i.mod)%i.mod:0>e?0:i.max<e?i.max:e)}function r(e){var n=c(),i=n._rgba=[];return e=e.toLowerCase(),m(l,function(t,r){var o,a=r.re.exec(e),s=a&&r.parse(a),u=r.space||"rgba";return s?(o=n[u](s),n[d[u].cache]=o[d[u].cache],i=n._rgba=o._rgba,!1):void 0}),i.length?("0,0,0,0"===i.join()&&t.extend(i,a.transparent),n):a[e]}function o(e,t,n){return n=(n+1)%1,1>6*n?e+(t-e)*n*6:1>2*n?t:2>3*n?e+(t-e)*(2/3-n)*6:e}var a,s="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor".split(" "),u=/^([\-+])=\s*(\d+\.?\d*)/,l=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1],e[2],e[3],e[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(e){return[2.55*e[1],2.55*e[2],2.55*e[3],e[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(e){return[e[1],e[2]/100,e[3]/100,e[4]]}}],c=t.Color=function(e,n,i,r){return new t.Color.fn.parse(e,n,i,r)},d={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},f={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},p=c.support={},h=t("<p>")[0],m=t.each;h.style.cssText="background-color:rgba(1,1,1,.5)",p.rgba=h.style.backgroundColor.indexOf("rgba")>-1,m(d,function(e,t){t.cache="_"+e,t.props.alpha={idx:3,type:"percent",def:1}}),c.fn=t.extend(c.prototype,{parse:function(o,s,u,l){if(o===n)return this._rgba=[null,null,null,null],this;(o.jquery||o.nodeType)&&(o=t(o).css(s),s=n);var f=this,p=t.type(o),h=this._rgba=[];return s!==n&&(o=[o,s,u,l],p="array"),"string"===p?this.parse(r(o)||a._default):"array"===p?(m(d.rgba.props,function(e,t){h[t.idx]=i(o[t.idx],t)}),this):"object"===p?(o instanceof c?m(d,function(e,t){o[t.cache]&&(f[t.cache]=o[t.cache].slice())}):m(d,function(t,n){var r=n.cache;m(n.props,function(e,t){if(!f[r]&&n.to){if("alpha"===e||null==o[e])return;f[r]=n.to(f._rgba)}f[r][t.idx]=i(o[e],t,!0)}),f[r]&&e.inArray(null,f[r].slice(0,3))<0&&(f[r][3]=1,n.from&&(f._rgba=n.from(f[r])))}),this):void 0},is:function(e){var t=c(e),n=!0,i=this;return m(d,function(e,r){var o,a=t[r.cache];return a&&(o=i[r.cache]||r.to&&r.to(i._rgba)||[],m(r.props,function(e,t){return null!=a[t.idx]?n=a[t.idx]===o[t.idx]:void 0})),n}),n},_space:function(){var e=[],t=this;return m(d,function(n,i){t[i.cache]&&e.push(n)}),e.pop()},transition:function(e,t){var n=c(e),r=n._space(),o=d[r],a=0===this.alpha()?c("transparent"):this,s=a[o.cache]||o.to(a._rgba),u=s.slice();return n=n[o.cache],m(o.props,function(e,r){var o=r.idx,a=s[o],l=n[o],c=f[r.type]||{};null!==l&&(null===a?u[o]=l:(c.mod&&(l-a>c.mod/2?a+=c.mod:a-l>c.mod/2&&(a-=c.mod)),u[o]=i((l-a)*t+a,r)))}),this[r](u)},blend:function(e){if(1===this._rgba[3])return this;var n=this._rgba.slice(),i=n.pop(),r=c(e)._rgba;return c(t.map(n,function(e,t){return(1-i)*r[t]+i*e}))},toRgbaString:function(){var e="rgba(",n=t.map(this._rgba,function(e,t){return null==e?t>2?1:0:e});return 1===n[3]&&(n.pop(),e="rgb("),e+n.join()+")"},toHslaString:function(){var e="hsla(",n=t.map(this.hsla(),function(e,t){return null==e&&(e=t>2?1:0),t&&3>t&&(e=Math.round(100*e)+"%"),e});return 1===n[3]&&(n.pop(),e="hsl("),e+n.join()+")"},toHexString:function(e){var n=this._rgba.slice(),i=n.pop();return e&&n.push(~~(255*i)),"#"+t.map(n,function(e){return e=(e||0).toString(16),1===e.length?"0"+e:e}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),c.fn.parse.prototype=c.fn,d.hsla.to=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t,n,i=e[0]/255,r=e[1]/255,o=e[2]/255,a=e[3],s=Math.max(i,r,o),u=Math.min(i,r,o),l=s-u,c=s+u,d=.5*c;return t=u===s?0:i===s?60*(r-o)/l+360:r===s?60*(o-i)/l+120:60*(i-r)/l+240,n=0===d||1===d?d:.5>=d?l/c:l/(2-c),[Math.round(t)%360,n,d,null==a?1:a]},d.hsla.from=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t=e[0]/360,n=e[1],i=e[2],r=e[3],a=.5>=i?i*(1+n):i+n-i*n,s=2*i-a;return[Math.round(255*o(s,a,t+1/3)),Math.round(255*o(s,a,t)),Math.round(255*o(s,a,t-1/3)),r]},m(d,function(e,r){var o=r.props,a=r.cache,s=r.to,l=r.from;c.fn[e]=function(e){if(s&&!this[a]&&(this[a]=s(this._rgba)),e===n)return this[a].slice();var r,u=t.type(e),d="array"===u||"object"===u?e:arguments,f=this[a].slice();return m(o,function(e,t){var n=d["object"===u?e:t.idx];null==n&&(n=f[t.idx]),f[t.idx]=i(n,t)}),l?(r=c(l(f)),r[a]=f,r):c(f)},m(o,function(n,i){c.fn[n]||(c.fn[n]=function(r){var o,a=t.type(r),s="alpha"===n?this._hsla?"hsla":"rgba":e,l=this[s](),c=l[i.idx];return"undefined"===a?c:("function"===a&&(r=r.call(this,c),a=t.type(r)),null==r&&i.empty?this:("string"===a&&(o=u.exec(r),o&&(r=c+parseFloat(o[2])*("+"===o[1]?1:-1))),l[i.idx]=r,this[s](l)))})})}),m(s,function(e,n){t.cssHooks[n]={set:function(e,i){var o,a,s="";if("string"!==t.type(i)||(o=r(i))){if(i=c(o||i),!p.rgba&&1!==i._rgba[3]){for(a="backgroundColor"===n?e.parentNode:e;(""===s||"transparent"===s)&&a&&a.style;)try{s=t.css(a,"backgroundColor"),a=a.parentNode}catch(u){}i=i.blend(s&&"transparent"!==s?s:"_default")}i=i.toRgbaString()}try{e.style[n]=i}catch(l){}}},t.fx.step[n]=function(e){e.colorInit||(e.start=c(e.elem,n),e.end=c(e.end),e.colorInit=!0),t.cssHooks[n].set(e.elem,e.start.transition(e.end,e.pos))}}),t.cssHooks.borderColor={expand:function(e){var t={};return m(["Top","Right","Bottom","Left"],function(n,i){t["border"+i+"Color"]=e}),t}},a=t.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(jQuery),function(){function n(){var t,n,i=this.ownerDocument.defaultView?this.ownerDocument.defaultView.getComputedStyle(this,null):this.currentStyle,r={};if(i&&i.length&&i[0]&&i[i[0]])for(n=i.length;n--;)t=i[n],"string"==typeof i[t]&&(r[e.camelCase(t)]=i[t]);else for(t in i)"string"==typeof i[t]&&(r[t]=i[t]);return r}function i(t,n){var i,r,a={};for(i in n)r=n[i],t[i]!==r&&(o[i]||(e.fx.step[i]||!isNaN(parseFloat(r)))&&(a[i]=r));return a}var r=["add","remove","toggle"],o={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};e.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(t,n){e.fx.step[n]=function(e){("none"!==e.end&&!e.setAttr||1===e.pos&&!e.setAttr)&&(jQuery.style(e.elem,n,e.end),e.setAttr=!0)}}),e.effects.animateClass=function(t,o,a,s){var u=e.speed(o,a,s);return this.queue(function(){var o,a=e(this),s=a.attr("class")||"",l=u.children?a.find("*").andSelf():a;l=l.map(function(){var t=e(this);return{el:t,start:n.call(this)}}),o=function(){e.each(r,function(e,n){t[n]&&a[n+"Class"](t[n])})},o(),l=l.map(function(){return this.end=n.call(this.el[0]),this.diff=i(this.start,this.end),this}),a.attr("class",s),l=l.map(function(){var t=this,n=e.Deferred(),i=jQuery.extend({},u,{queue:!1,complete:function(){n.resolve(t)}});return this.el.animate(this.diff,i),n.promise()}),e.when.apply(e,l.get()).done(function(){o(),e.each(arguments,function(){var t=this.el;e.each(this.diff,function(e){t.css(e,"")})}),u.complete.call(a[0])})})},e.fn.extend({_addClass:e.fn.addClass,addClass:function(t,n,i,r){return n?e.effects.animateClass.call(this,{add:t},n,i,r):this._addClass(t)},_removeClass:e.fn.removeClass,removeClass:function(t,n,i,r){return n?e.effects.animateClass.call(this,{remove:t},n,i,r):this._removeClass(t)},_toggleClass:e.fn.toggleClass,toggleClass:function(n,i,r,o,a){return"boolean"==typeof i||i===t?r?e.effects.animateClass.call(this,i?{add:n}:{remove:n},r,o,a):this._toggleClass(n,i):e.effects.animateClass.call(this,{toggle:n},i,r,o)},switchClass:function(t,n,i,r,o){return e.effects.animateClass.call(this,{add:n,remove:t},i,r,o)}})}(),function(){function r(t,n,i,r){return e.isPlainObject(t)&&(n=t,t=t.effect),t={effect:t},null==n&&(n={}),e.isFunction(n)&&(r=n,i=null,n={}),("number"==typeof n||e.fx.speeds[n])&&(r=i,i=n,n={}),e.isFunction(i)&&(r=i,i=null),n&&e.extend(t,n),i=i||n.duration,t.duration=e.fx.off?0:"number"==typeof i?i:i in e.fx.speeds?e.fx.speeds[i]:e.fx.speeds._default,t.complete=r||n.complete,t}function o(t){return!t||"number"==typeof t||e.fx.speeds[t]?!0:"string"!=typeof t||e.effects.effect[t]?!1:n&&e.effects[t]?!1:!0}e.extend(e.effects,{version:"1.9.2",save:function(e,t){for(var n=0;n<t.length;n++)null!==t[n]&&e.data(i+t[n],e[0].style[t[n]])},restore:function(e,n){var r,o;for(o=0;o<n.length;o++)null!==n[o]&&(r=e.data(i+n[o]),r===t&&(r=""),e.css(n[o],r))},setMode:function(e,t){return"toggle"===t&&(t=e.is(":hidden")?"show":"hide"),t},getBaseline:function(e,t){var n,i;switch(e[0]){case"top":n=0;break;case"middle":n=.5;break;case"bottom":n=1;break;default:n=e[0]/t.height}switch(e[1]){case"left":i=0;break;case"center":i=.5;break;case"right":i=1;break;default:i=e[1]/t.width}return{x:i,y:n}},createWrapper:function(t){if(t.parent().is(".ui-effects-wrapper"))return t.parent();var n={width:t.outerWidth(!0),height:t.outerHeight(!0),"float":t.css("float")},i=e("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),r={width:t.width(),height:t.height()},o=document.activeElement;try{o.id}catch(a){o=document.body}return t.wrap(i),(t[0]===o||e.contains(t[0],o))&&e(o).focus(),i=t.parent(),"static"===t.css("position")?(i.css({position:"relative"}),t.css({position:"relative"})):(e.extend(n,{position:t.css("position"),zIndex:t.css("z-index")}),e.each(["top","left","bottom","right"],function(e,i){n[i]=t.css(i),isNaN(parseInt(n[i],10))&&(n[i]="auto")}),t.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),t.css(r),i.css(n).show()},removeWrapper:function(t){var n=document.activeElement;return t.parent().is(".ui-effects-wrapper")&&(t.parent().replaceWith(t),(t[0]===n||e.contains(t[0],n))&&e(n).focus()),t},setTransition:function(t,n,i,r){return r=r||{},e.each(n,function(e,n){var o=t.cssUnit(n);o[0]>0&&(r[n]=o[0]*i+o[1])}),r}}),e.fn.extend({effect:function(){function t(t){function n(){e.isFunction(o)&&o.call(r[0]),e.isFunction(t)&&t()}var r=e(this),o=i.complete,a=i.mode;(r.is(":hidden")?"hide"===a:"show"===a)?n():s.call(r[0],i,n)}var i=r.apply(this,arguments),o=i.mode,a=i.queue,s=e.effects.effect[i.effect],u=!s&&n&&e.effects[i.effect];return e.fx.off||!s&&!u?o?this[o](i.duration,i.complete):this.each(function(){i.complete&&i.complete.call(this)}):s?a===!1?this.each(t):this.queue(a||"fx",t):u.call(this,{options:i,duration:i.duration,callback:i.complete,mode:i.mode})},_show:e.fn.show,show:function(e){if(o(e))return this._show.apply(this,arguments);var t=r.apply(this,arguments);return t.mode="show",this.effect.call(this,t)},_hide:e.fn.hide,hide:function(e){if(o(e))return this._hide.apply(this,arguments);var t=r.apply(this,arguments);return t.mode="hide",this.effect.call(this,t)},__toggle:e.fn.toggle,toggle:function(t){if(o(t)||"boolean"==typeof t||e.isFunction(t))return this.__toggle.apply(this,arguments);var n=r.apply(this,arguments);return n.mode="toggle",this.effect.call(this,n)},cssUnit:function(t){var n=this.css(t),i=[];return e.each(["em","px","%","pt"],function(e,t){n.indexOf(t)>0&&(i=[parseFloat(n),t])}),i}})}(),function(){var t={};e.each(["Quad","Cubic","Quart","Quint","Expo"],function(e,n){t[n]=function(t){return Math.pow(t,e+2)}}),e.extend(t,{Sine:function(e){return 1-Math.cos(e*Math.PI/2)},Circ:function(e){return 1-Math.sqrt(1-e*e)},Elastic:function(e){return 0===e||1===e?e:-Math.pow(2,8*(e-1))*Math.sin((80*(e-1)-7.5)*Math.PI/15)},Back:function(e){return e*e*(3*e-2)},Bounce:function(e){for(var t,n=4;e<((t=Math.pow(2,--n))-1)/11;);return 1/Math.pow(4,3-n)-7.5625*Math.pow((3*t-2)/22-e,2)}}),e.each(t,function(t,n){e.easing["easeIn"+t]=n,e.easing["easeOut"+t]=function(e){return 1-n(1-e)},e.easing["easeInOut"+t]=function(e){return.5>e?n(2*e)/2:1-n(-2*e+2)/2}})}()}(jQuery),function(e){e.effects.effect.highlight=function(t,n){var i=e(this),r=["backgroundImage","backgroundColor","opacity"],o=e.effects.setMode(i,t.mode||"show"),a={backgroundColor:i.css("backgroundColor")};"hide"===o&&(a.opacity=0),e.effects.save(i,r),i.show().css({backgroundImage:"none",backgroundColor:t.color||"#ffff99"}).animate(a,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===o&&i.hide(),e.effects.restore(i,r),n()}})}}(jQuery),function(e,t){var n=function(){var t=e._data(document,"events");return t&&t.click&&e.grep(t.click,function(e){return"rails"===e.namespace}).length};n()&&e.error("jquery-ujs has already been loaded!");var i;e.rails=i={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote], a[data-disable-with]",inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type])",disableSelector:"input[data-disable-with], button[data-disable-with], textarea[data-disable-with]",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled",requiredInputSelector:"input[name][required]:not([disabled]),textarea[name][required]:not([disabled])",fileInputSelector:"input:file",linkDisableSelector:"a[data-disable-with]",CSRFProtection:function(t){var n=e('meta[name="csrf-token"]').attr("content");n&&t.setRequestHeader("X-CSRF-Token",n)},fire:function(t,n,i){var r=e.Event(n);return t.trigger(r,i),r.result!==!1},confirm:function(e){return confirm(e)},ajax:function(t){return e.ajax(t)},href:function(e){return e.attr("href")},handleRemote:function(n){var r,o,a,s,u,l,c,d;if(i.fire(n,"ajax:before")){if(s=n.data("cross-domain"),u=s===t?null:s,l=n.data("with-credentials")||null,c=n.data("type")||e.ajaxSettings&&e.ajaxSettings.dataType,n.is("form")){r=n.attr("method"),o=n.attr("action"),a=n.serializeArray();var f=n.data("ujs:submit-button");f&&(a.push(f),n.data("ujs:submit-button",null))}else n.is(i.inputChangeSelector)?(r=n.data("method"),o=n.data("url"),a=n.serialize(),n.data("params")&&(a=a+"&"+n.data("params"))):(r=n.data("method"),o=i.href(n),a=n.data("params")||null);d={type:r||"GET",data:a,dataType:c,beforeSend:function(e,r){return r.dataType===t&&e.setRequestHeader("accept","*/*;q=0.5, "+r.accepts.script),i.fire(n,"ajax:beforeSend",[e,r])},success:function(e,t,i){n.trigger("ajax:success",[e,t,i])},complete:function(e,t){n.trigger("ajax:complete",[e,t])},error:function(e,t,i){n.trigger("ajax:error",[e,t,i])},xhrFields:{withCredentials:l},crossDomain:u},o&&(d.url=o);var p=i.ajax(d);return n.trigger("ajax:send",p),p}return!1},handleMethod:function(n){var r=i.href(n),o=n.data("method"),a=n.attr("target"),s=e("meta[name=csrf-token]").attr("content"),u=e("meta[name=csrf-param]").attr("content"),l=e('<form method="post" action="'+r+'"></form>'),c='<input name="_method" value="'+o+'" type="hidden" />';u!==t&&s!==t&&(c+='<input name="'+u+'" value="'+s+'" type="hidden" />'),a&&l.attr("target",a),l.hide().append(c).appendTo("body"),l.submit()},disableFormElements:function(t){t.find(i.disableSelector).each(function(){var t=e(this),n=t.is("button")?"html":"val";t.data("ujs:enable-with",t[n]()),t[n](t.data("disable-with")),t.prop("disabled",!0)})},enableFormElements:function(t){t.find(i.enableSelector).each(function(){var t=e(this),n=t.is("button")?"html":"val";t.data("ujs:enable-with")&&t[n](t.data("ujs:enable-with")),t.prop("disabled",!1)})},allowAction:function(e){var t,n=e.data("confirm"),r=!1;return n?(i.fire(e,"confirm")&&(r=i.confirm(n),t=i.fire(e,"confirm:complete",[r])),r&&t):!0},blankInputs:function(t,n,i){var r,o,a=e(),s=n||"input,textarea",u=t.find(s);return u.each(function(){if(r=e(this),o=r.is(":checkbox,:radio")?r.is(":checked"):r.val(),!o==!i){if(r.is(":radio")&&u.filter('input:radio:checked[name="'+r.attr("name")+'"]').length)return!0;a=a.add(r)}}),a.length?a:!1},nonBlankInputs:function(e,t){return i.blankInputs(e,t,!0)},stopEverything:function(t){return e(t.target).trigger("ujs:everythingStopped"),t.stopImmediatePropagation(),!1},callFormSubmitBindings:function(n,i){var r=n.data("events"),o=!0;return r!==t&&r.submit!==t&&e.each(r.submit,function(e,t){return"function"==typeof t.handler?o=t.handler(i):void 0}),o},disableElement:function(e){e.data("ujs:enable-with",e.html()),e.html(e.data("disable-with")),e.bind("click.railsDisable",function(e){return i.stopEverything(e)})},enableElement:function(e){e.data("ujs:enable-with")!==t&&(e.html(e.data("ujs:enable-with")),e.data("ujs:enable-with",!1)),e.unbind("click.railsDisable")}},i.fire(e(document),"rails:attachBindings")&&(e.ajaxPrefilter(function(e,t,n){e.crossDomain||i.CSRFProtection(n)}),e(document).delegate(i.linkDisableSelector,"ajax:complete",function(){i.enableElement(e(this))}),e(document).delegate(i.linkClickSelector,"click.rails",function(n){var r=e(this),o=r.data("method"),a=r.data("params");if(!i.allowAction(r))return i.stopEverything(n);if(r.is(i.linkDisableSelector)&&i.disableElement(r),r.data("remote")!==t){if(!(!n.metaKey&&!n.ctrlKey||o&&"GET"!==o||a))return!0;var s=i.handleRemote(r);return s===!1?i.enableElement(r):s.error(function(){i.enableElement(r)}),!1}return r.data("method")?(i.handleMethod(r),!1):void 0}),e(document).delegate(i.inputChangeSelector,"change.rails",function(t){var n=e(this);return i.allowAction(n)?(i.handleRemote(n),!1):i.stopEverything(t)}),e(document).delegate(i.formSubmitSelector,"submit.rails",function(n){var r=e(this),o=r.data("remote")!==t,a=i.blankInputs(r,i.requiredInputSelector),s=i.nonBlankInputs(r,i.fileInputSelector);if(!i.allowAction(r))return i.stopEverything(n);if(a&&r.attr("novalidate")==t&&i.fire(r,"ajax:aborted:required",[a]))return i.stopEverything(n);if(o){if(s){setTimeout(function(){i.disableFormElements(r)},13);var u=i.fire(r,"ajax:aborted:file",[s]);return u||setTimeout(function(){i.enableFormElements(r)},13),u}return!e.support.submitBubbles&&e().jquery<"1.7"&&i.callFormSubmitBindings(r,n)===!1?i.stopEverything(n):(i.handleRemote(r),!1)}setTimeout(function(){i.disableFormElements(r)},13)}),e(document).delegate(i.formInputClickSelector,"click.rails",function(t){var n=e(this);if(!i.allowAction(n))return i.stopEverything(t);var r=n.attr("name"),o=r?{name:r,value:n.val()}:null;n.closest("form").data("ujs:submit-button",o)}),e(document).delegate(i.formSubmitSelector,"ajax:beforeSend.rails",function(t){this==t.target&&i.disableFormElements(e(this))}),e(document).delegate(i.formSubmitSelector,"ajax:complete.rails",function(t){this==t.target&&i.enableFormElements(e(this))}),e(function(){csrf_token=e("meta[name=csrf-token]").attr("content"),csrf_param=e("meta[name=csrf-param]").attr("content"),e('form input[name="'+csrf_param+'"]').val(csrf_token)}))}(jQuery),function(e){"use strict";function t(t){var n=t.data;t.isDefaultPrevented()||(t.preventDefault(),e(this).ajaxSubmit(n))}function n(t){var n=t.target,i=e(n);if(!i.is(":submit,input:image")){var r=i.closest(":submit");if(0===r.length)return;n=r[0]}var o=this;if(o.clk=n,"image"==n.type)if(void 0!==t.offsetX)o.clk_x=t.offsetX,o.clk_y=t.offsetY;else if("function"==typeof e.fn.offset){var a=i.offset();o.clk_x=t.pageX-a.left,o.clk_y=t.pageY-a.top}else o.clk_x=t.pageX-n.offsetLeft,o.clk_y=t.pageY-n.offsetTop;setTimeout(function(){o.clk=o.clk_x=o.clk_y=null},100)}function i(){if(e.fn.ajaxSubmit.debug){var t="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(t):window.opera&&window.opera.postError&&window.opera.postError(t)}}var r={};r.fileapi=void 0!==e("<input type='file'/>").get(0).files,r.formdata=void 0!==window.FormData,e.fn.ajaxSubmit=function(t){function n(n){for(var i=new FormData,r=0;r<n.length;r++)i.append(n[r].name,n[r].value);if(t.extraData)for(var o in t.extraData)t.extraData.hasOwnProperty(o)&&i.append(o,t.extraData[o]);t.data=null;var a=e.extend(!0,{},e.ajaxSettings,t,{contentType:!1,processData:!1,cache:!1,type:"POST"});t.uploadProgress&&(a.xhr=function(){var e=jQuery.ajaxSettings.xhr();return e.upload&&(e.upload.onprogress=function(e){var n=0,i=e.loaded||e.position,r=e.total;e.lengthComputable&&(n=Math.ceil(i/r*100)),t.uploadProgress(e,i,r,n)}),e}),a.data=null;var s=a.beforeSend;a.beforeSend=function(e,n){n.data=i,s&&s.call(n,e,t)},e.ajax(a)}function o(n){function r(e){var t=e.contentWindow?e.contentWindow.document:e.contentDocument?e.contentDocument:e.document;return t}function o(){function t(){try{var e=r(g).readyState;i("state = "+e),e&&"uninitialized"==e.toLowerCase()&&setTimeout(t,50)}catch(n){i("Server abort: ",n," (",n.name,")"),s(C),w&&clearTimeout(w),w=void 0}}var n=l.attr("target"),o=l.attr("action");x.setAttribute("target",h),a||x.setAttribute("method","POST"),o!=d.url&&x.setAttribute("action",d.url),d.skipEncodingOverride||a&&!/post/i.test(a)||l.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"}),d.timeout&&(w=setTimeout(function(){_=!0,s(S)},d.timeout));var u=[];try{if(d.extraData)for(var c in d.extraData)d.extraData.hasOwnProperty(c)&&u.push(e('<input type="hidden" name="'+c+'">').attr("value",d.extraData[c]).appendTo(x)[0]);d.iframeTarget||(m.appendTo("body"),g.attachEvent?g.attachEvent("onload",s):g.addEventListener("load",s,!1)),setTimeout(t,15),x.submit()}finally{x.setAttribute("action",o),n?x.setAttribute("target",n):l.removeAttr("target"),e(u).remove()}}function s(t){if(!v.aborted&&!I){try{F=r(g)}catch(n){i("cannot access response document: ",n),t=C}if(t===S&&v)return void v.abort("timeout");if(t==C&&v)return void v.abort("server abort");if(F&&F.location.href!=d.iframeSrc||_){g.detachEvent?g.detachEvent("onload",s):g.removeEventListener("load",s,!1);var o,a="success";try{if(_)throw"timeout";var u="xml"==d.dataType||F.XMLDocument||e.isXMLDoc(F);if(i("isXml="+u),!u&&window.opera&&(null===F.body||!F.body.innerHTML)&&--M)return i("requeing onLoad callback, DOM not available"),void setTimeout(s,250);var l=F.body?F.body:F.documentElement;v.responseText=l?l.innerHTML:null,v.responseXML=F.XMLDocument?F.XMLDocument:F,u&&(d.dataType="xml"),v.getResponseHeader=function(e){var t={"content-type":d.dataType};return t[e]},l&&(v.status=Number(l.getAttribute("status"))||v.status,v.statusText=l.getAttribute("statusText")||v.statusText);var c=(d.dataType||"").toLowerCase(),p=/(json|script|text)/.test(c);if(p||d.textarea){var h=F.getElementsByTagName("textarea")[0];if(h)v.responseText=h.value,v.status=Number(h.getAttribute("status"))||v.status,v.statusText=h.getAttribute("statusText")||v.statusText;else if(p){var y=F.getElementsByTagName("pre")[0],b=F.getElementsByTagName("body")[0];y?v.responseText=y.textContent?y.textContent:y.innerText:b&&(v.responseText=b.textContent?b.textContent:b.innerText)}}else"xml"==c&&!v.responseXML&&v.responseText&&(v.responseXML=B(v.responseText));try{D=j(v,c,d)}catch(t){a="parsererror",v.error=o=t||a}}catch(t){i("error caught: ",t),a="error",v.error=o=t||a}v.aborted&&(i("upload aborted"),a=null),v.status&&(a=v.status>=200&&v.status<300||304===v.status?"success":"error"),"success"===a?(d.success&&d.success.call(d.context,D,"success",v),f&&e.event.trigger("ajaxSuccess",[v,d])):a&&(void 0===o&&(o=v.statusText),d.error&&d.error.call(d.context,v,a,o),f&&e.event.trigger("ajaxError",[v,d,o])),f&&e.event.trigger("ajaxComplete",[v,d]),f&&!--e.active&&e.event.trigger("ajaxStop"),d.complete&&d.complete.call(d.context,v,a),I=!0,d.timeout&&clearTimeout(w),setTimeout(function(){d.iframeTarget||m.remove(),v.responseXML=null},100)}}}var u,c,d,f,h,m,g,v,y,b,_,w,x=l[0],k=!!e.fn.prop;if(e(":input[name=submit],:input[id=submit]",x).length)return void alert('Error: Form elements must not have name or id of "submit".');if(n)for(c=0;c<p.length;c++)u=e(p[c]),k?u.prop("disabled",!1):u.removeAttr("disabled");if(d=e.extend(!0,{},e.ajaxSettings,t),d.context=d.context||d,h="jqFormIO"+(new Date).getTime(),d.iframeTarget?(m=e(d.iframeTarget),b=m.attr("name"),b?h=b:m.attr("name",h)):(m=e('<iframe name="'+h+'" src="'+d.iframeSrc+'" />'),m.css({position:"absolute",top:"-1000px",left:"-1000px"})),g=m[0],v={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(t){var n="timeout"===t?"timeout":"aborted";i("aborting upload... "+n),this.aborted=1,m.attr("src",d.iframeSrc),v.error=n,d.error&&d.error.call(d.context,v,n,t),f&&e.event.trigger("ajaxError",[v,d,n]),d.complete&&d.complete.call(d.context,v,n)}},f=d.global,f&&0===e.active++&&e.event.trigger("ajaxStart"),f&&e.event.trigger("ajaxSend",[v,d]),d.beforeSend&&d.beforeSend.call(d.context,v,d)===!1)return void(d.global&&e.active--);if(!v.aborted){y=x.clk,y&&(b=y.name,b&&!y.disabled&&(d.extraData=d.extraData||{},d.extraData[b]=y.value,"image"==y.type&&(d.extraData[b+".x"]=x.clk_x,d.extraData[b+".y"]=x.clk_y)));var S=1,C=2,T=e("meta[name=csrf-token]").attr("content"),E=e("meta[name=csrf-param]").attr("content");E&&T&&(d.extraData=d.extraData||{},d.extraData[E]=T),d.forceSync?o():setTimeout(o,10);var D,F,I,M=50,B=e.parseXML||function(e,t){return window.ActiveXObject?(t=new ActiveXObject("Microsoft.XMLDOM"),t.async="false",t.loadXML(e)):t=(new DOMParser).parseFromString(e,"text/xml"),t&&t.documentElement&&"parsererror"!=t.documentElement.nodeName?t:null},A=e.parseJSON||function(e){return window.eval("("+e+")")},j=function(t,n,i){var r=t.getResponseHeader("content-type")||"",o="xml"===n||!n&&r.indexOf("xml")>=0,a=o?t.responseXML:t.responseText;return o&&"parsererror"===a.documentElement.nodeName&&e.error&&e.error("parsererror"),i&&i.dataFilter&&(a=i.dataFilter(a,n)),"string"==typeof a&&("json"===n||!n&&r.indexOf("json")>=0?a=A(a):("script"===n||!n&&r.indexOf("javascript")>=0)&&e.globalEval(a)),a}}}if(!this.length)return i("ajaxSubmit: skipping submit process - no element selected"),this;var a,s,u,l=this;"function"==typeof t&&(t={success:t}),a=this.attr("method"),s=this.attr("action"),u="string"==typeof s?e.trim(s):"",u=u||window.location.href||"",u&&(u=(u.match(/^([^#]+)/)||[])[1]),t=e.extend(!0,{url:u,success:e.ajaxSettings.success,type:a||"GET",iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},t);var c={};if(this.trigger("form-pre-serialize",[this,t,c]),c.veto)return i("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(t.beforeSerialize&&t.beforeSerialize(this,t)===!1)return i("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var d=t.traditional;void 0===d&&(d=e.ajaxSettings.traditional);var f,p=[],h=this.formToArray(t.semantic,p);if(t.data&&(t.extraData=t.data,f=e.param(t.data,d)),t.beforeSubmit&&t.beforeSubmit(h,this,t)===!1)return i("ajaxSubmit: submit aborted via beforeSubmit callback"),this;if(this.trigger("form-submit-validate",[h,this,t,c]),c.veto)return i("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;var m=e.param(h,d);f&&(m=m?m+"&"+f:f),"GET"==t.type.toUpperCase()?(t.url+=(t.url.indexOf("?")>=0?"&":"?")+m,t.data=null):t.data=m;var g=[];if(t.resetForm&&g.push(function(){l.resetForm()}),t.clearForm&&g.push(function(){l.clearForm(t.includeHidden)}),!t.dataType&&t.target){var v=t.success||function(){};g.push(function(n){var i=t.replaceTarget?"replaceWith":"html";e(t.target)[i](n).each(v,arguments)})}else t.success&&g.push(t.success);t.success=function(e,n,i){for(var r=t.context||t,o=0,a=g.length;a>o;o++)g[o].apply(r,[e,n,i||l,l])};var y=e("input:file:enabled[value]",this),b=y.length>0,_="multipart/form-data",w=l.attr("enctype")==_||l.attr("encoding")==_,x=r.fileapi&&r.formdata;i("fileAPI :"+x);var k=(b||w)&&!x;t.iframe!==!1&&(t.iframe||k)?t.closeKeepAlive?e.get(t.closeKeepAlive,function(){o(h)}):o(h):(b||w)&&x?n(h):e.ajax(t);for(var S=0;S<p.length;S++)p[S]=null;return this.trigger("form-submit-notify",[this,t]),this},e.fn.ajaxForm=function(r){if(r=r||{},r.delegation=r.delegation&&e.isFunction(e.fn.on),!r.delegation&&0===this.length){var o={s:this.selector,c:this.context};return!e.isReady&&o.s?(i("DOM not ready, queuing ajaxForm"),e(function(){e(o.s,o.c).ajaxForm(r)}),this):(i("terminating; zero elements found by selector"+(e.isReady?"":" (DOM not ready)")),this)}return r.delegation?(e(document).off("submit.form-plugin",this.selector,t).off("click.form-plugin",this.selector,n).on("submit.form-plugin",this.selector,r,t).on("click.form-plugin",this.selector,r,n),this):this.ajaxFormUnbind().bind("submit.form-plugin",r,t).bind("click.form-plugin",r,n)},e.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")},e.fn.formToArray=function(t,n){var i=[];if(0===this.length)return i;var o=this[0],a=t?o.getElementsByTagName("*"):o.elements;if(!a)return i;var s,u,l,c,d,f,p;for(s=0,f=a.length;f>s;s++)if(d=a[s],l=d.name)if(t&&o.clk&&"image"==d.type)d.disabled||o.clk!=d||(i.push({name:l,value:e(d).val(),type:d.type}),i.push({name:l+".x",value:o.clk_x},{name:l+".y",value:o.clk_y}));else if(c=e.fieldValue(d,!0),c&&c.constructor==Array)for(n&&n.push(d),u=0,p=c.length;p>u;u++)i.push({name:l,value:c[u]});else if(r.fileapi&&"file"==d.type&&!d.disabled){n&&n.push(d);var h=d.files;if(h.length)for(u=0;u<h.length;u++)i.push({name:l,value:h[u],type:d.type});else i.push({name:l,value:"",type:d.type})}else null!==c&&"undefined"!=typeof c&&(n&&n.push(d),i.push({name:l,value:c,type:d.type,required:d.required}));if(!t&&o.clk){var m=e(o.clk),g=m[0];l=g.name,l&&!g.disabled&&"image"==g.type&&(i.push({name:l,value:m.val()}),i.push({name:l+".x",value:o.clk_x},{name:l+".y",value:o.clk_y}))}return i},e.fn.formSerialize=function(t){return e.param(this.formToArray(t))},e.fn.fieldSerialize=function(t){var n=[];return this.each(function(){var i=this.name;if(i){var r=e.fieldValue(this,t);if(r&&r.constructor==Array)for(var o=0,a=r.length;a>o;o++)n.push({name:i,value:r[o]});else null!==r&&"undefined"!=typeof r&&n.push({name:this.name,value:r})}}),e.param(n)},e.fn.fieldValue=function(t){for(var n=[],i=0,r=this.length;r>i;i++){var o=this[i],a=e.fieldValue(o,t);null===a||"undefined"==typeof a||a.constructor==Array&&!a.length||(a.constructor==Array?e.merge(n,a):n.push(a))}return n},e.fieldValue=function(t,n){var i=t.name,r=t.type,o=t.tagName.toLowerCase();if(void 0===n&&(n=!0),n&&(!i||t.disabled||"reset"==r||"button"==r||("checkbox"==r||"radio"==r)&&!t.checked||("submit"==r||"image"==r)&&t.form&&t.form.clk!=t||"select"==o&&-1==t.selectedIndex))return null;if("select"==o){var a=t.selectedIndex;if(0>a)return null;for(var s=[],u=t.options,l="select-one"==r,c=l?a+1:u.length,d=l?a:0;c>d;d++){var f=u[d];if(f.selected){var p=f.value;if(p||(p=f.attributes&&f.attributes.value&&!f.attributes.value.specified?f.text:f.value),l)return p;s.push(p)}}return s}return e(t).val()},e.fn.clearForm=function(t){return this.each(function(){e("input,select,textarea",this).clearFields(t)})},e.fn.clearFields=e.fn.clearInputs=function(t){var n=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var i=this.type,r=this.tagName.toLowerCase();n.test(i)||"textarea"==r?this.value="":"checkbox"==i||"radio"==i?this.checked=!1:"select"==r?this.selectedIndex=-1:t&&(t===!0&&/hidden/.test(i)||"string"==typeof t&&e(this).is(t))&&(this.value="")})},e.fn.resetForm=function(){return this.each(function(){("function"==typeof this.reset||"object"==typeof this.reset&&!this.reset.nodeType)&&this.reset()})},e.fn.enable=function(e){return void 0===e&&(e=!0),this.each(function(){this.disabled=!e})},e.fn.selected=function(t){return void 0===t&&(t=!0),this.each(function(){var n=this.type;if("checkbox"==n||"radio"==n)this.checked=t;else if("option"==this.tagName.toLowerCase()){var i=e(this).parent("select");t&&i[0]&&"select-one"==i[0].type&&i.find("option").selected(!1),this.selected=t}})},e.fn.ajaxSubmit.debug=!1}(jQuery),/**
 * jQuery Validation Plugin 1.10.0
 *
 * http://bassistance.de/jquery-plugins/jquery-plugin-validation/
 * http://docs.jquery.com/Plugins/Validation
 *
 * Copyright (c) 2012 Jrn Zaefferer
 *
 * Dual licensed under the MIT and GPL licenses:
 *   http://www.opensource.org/licenses/mit-license.php
 *   http://www.gnu.org/licenses/gpl.html
 */
function(e){e.extend(e.fn,{validate:function(t){if(!this.length)return void(t&&t.debug&&window.console&&console.warn("nothing selected, can't validate, returning nothing"));var n=e.data(this[0],"validator");return n?n:(this.attr("novalidate","novalidate"),n=new e.validator(t,this[0]),e.data(this[0],"validator",n),n.settings.onsubmit&&(this.validateDelegate(":submit","click",function(t){n.settings.submitHandler&&(n.submitButton=t.target),e(t.target).hasClass("cancel")&&(n.cancelSubmit=!0)}),this.submit(function(t){function i(){var i;return n.settings.submitHandler?(n.submitButton&&(i=e("<input type='hidden'/>").attr("name",n.submitButton.name).val(n.submitButton.value).appendTo(n.currentForm)),n.settings.submitHandler.call(n,n.currentForm,t),n.submitButton&&i.remove(),!1):!0}return n.settings.debug&&t.preventDefault(),n.cancelSubmit?(n.cancelSubmit=!1,i()):n.form()?n.pendingRequest?(n.formSubmitted=!0,!1):i():(n.focusInvalid(),!1)})),n)},valid:function(){if(e(this[0]).is("form"))return this.validate().form();var t=!0,n=e(this[0].form).validate();return this.each(function(){t&=n.element(this)}),t},removeAttrs:function(t){var n={},i=this;return e.each(t.split(/\s/),function(e,t){n[t]=i.attr(t),i.removeAttr(t)}),n},rules:function(t,n){var i=this[0];if(t){var r=e.data(i.form,"validator").settings,o=r.rules,a=e.validator.staticRules(i);switch(t){case"add":e.extend(a,e.validator.normalizeRule(n)),o[i.name]=a,n.messages&&(r.messages[i.name]=e.extend(r.messages[i.name],n.messages));break;case"remove":if(!n)return delete o[i.name],a;var s={};return e.each(n.split(/\s/),function(e,t){s[t]=a[t],delete a[t]}),s}}var u=e.validator.normalizeRules(e.extend({},e.validator.metadataRules(i),e.validator.classRules(i),e.validator.attributeRules(i),e.validator.staticRules(i)),i);if(u.required){var l=u.required;delete u.required,u=e.extend({required:l},u)}return u}}),e.extend(e.expr[":"],{blank:function(t){return!e.trim(""+t.value)},filled:function(t){return!!e.trim(""+t.value)},unchecked:function(e){return!e.checked}}),e.validator=function(t,n){this.settings=e.extend(!0,{},e.validator.defaults,t),this.currentForm=n,this.init()},e.validator.format=function(t,n){return 1===arguments.length?function(){var n=e.makeArray(arguments);return n.unshift(t),e.validator.format.apply(this,n)}:(arguments.length>2&&n.constructor!==Array&&(n=e.makeArray(arguments).slice(1)),n.constructor!==Array&&(n=[n]),e.each(n,function(e,n){t=t.replace(new RegExp("\\{"+e+"\\}","g"),n)}),t)},e.extend(e.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusInvalid:!0,errorContainer:e([]),errorLabelContainer:e([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(e){this.lastActive=e,this.settings.focusCleanup&&!this.blockFocusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,e,this.settings.errorClass,this.settings.validClass),this.addWrapper(this.errorsFor(e)).hide())},onfocusout:function(e){this.checkable(e)||!(e.name in this.submitted)&&this.optional(e)||this.element(e)},onkeyup:function(e,t){(9!==t.which||""!==this.elementValue(e))&&(e.name in this.submitted||e===this.lastActive)&&this.element(e)},onclick:function(e){e.name in this.submitted?this.element(e):e.parentNode.name in this.submitted&&this.element(e.parentNode)},highlight:function(t,n,i){"radio"===t.type?this.findByName(t.name).addClass(n).removeClass(i):e(t).addClass(n).removeClass(i)},unhighlight:function(t,n,i){"radio"===t.type?this.findByName(t.name).removeClass(n).addClass(i):e(t).removeClass(n).addClass(i)}},setDefaults:function(t){e.extend(e.validator.defaults,t)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",maxlength:e.validator.format("Please enter no more than {0} characters."),minlength:e.validator.format("Please enter at least {0} characters."),rangelength:e.validator.format("Please enter a value between {0} and {1} characters long."),range:e.validator.format("Please enter a value between {0} and {1}."),max:e.validator.format("Please enter a value less than or equal to {0}."),min:e.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:!1,prototype:{init:function(){function t(t){var n=e.data(this[0].form,"validator"),i="on"+t.type.replace(/^validate/,"");n.settings[i]&&n.settings[i].call(n,this[0],t)}this.labelContainer=e(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||e(this.currentForm),this.containers=e(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var n=this.groups={};e.each(this.settings.groups,function(t,i){e.each(i.split(/\s/),function(e,i){n[i]=t})});var i=this.settings.rules;e.each(i,function(t,n){i[t]=e.validator.normalizeRule(n)}),e(this.currentForm).validateDelegate(":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'] ,[type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'] ","focusin focusout keyup",t).validateDelegate("[type='radio'], [type='checkbox'], select, option","click",t),this.settings.invalidHandler&&e(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler)},form:function(){return this.checkForm(),e.extend(this.submitted,this.errorMap),this.invalid=e.extend({},this.errorMap),this.valid()||e(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var e=0,t=this.currentElements=this.elements();t[e];e++)this.check(t[e]);return this.valid()},element:function(t){t=this.validationTargetFor(this.clean(t)),this.lastElement=t,this.prepareElement(t),this.currentElements=e(t);var n=this.check(t)!==!1;return n?delete this.invalid[t.name]:this.invalid[t.name]=!0,this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),n},showErrors:function(t){if(t){e.extend(this.errorMap,t),this.errorList=[];for(var n in t)this.errorList.push({message:t[n],element:this.findByName(n)[0]});this.successList=e.grep(this.successList,function(e){return!(e.name in t)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){e.fn.resetForm&&e(this.currentForm).resetForm(),this.submitted={},this.lastElement=null,this.prepareForm(),this.hideErrors(),this.elements().removeClass(this.settings.errorClass).removeData("previousValue")},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(e){var t=0;for(var n in e)t++;return t},hideErrors:function(){this.addWrapper(this.toHide).hide()},valid:function(){return 0===this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{e(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(t){}},findLastActive:function(){var t=this.lastActive;return t&&1===e.grep(this.errorList,function(e){return e.element.name===t.name}).length&&t},elements:function(){var t=this,n={};return e(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){return!this.name&&t.settings.debug&&window.console&&console.error("%o has no name assigned",this),this.name in n||!t.objectLength(e(this).rules())?!1:(n[this.name]=!0,!0)})},clean:function(t){return e(t)[0]},errors:function(){var t=this.settings.errorClass.replace(" ",".");return e(this.settings.errorElement+"."+t,this.errorContext)},reset:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=e([]),this.toHide=e([]),this.currentElements=e([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(e){this.reset(),this.toHide=this.errorsFor(e)},elementValue:function(t){var n=e(t).attr("type"),i=e(t).val();return"radio"===n||"checkbox"===n?e('input[name="'+e(t).attr("name")+'"]:checked').val():"string"==typeof i?i.replace(/\r/g,""):i},check:function(t){t=this.validationTargetFor(this.clean(t));var n,i=e(t).rules(),r=!1,o=this.elementValue(t);for(var a in i){var s={method:a,parameters:i[a]};try{if(n=e.validator.methods[a].call(this,o,t,s.parameters),"dependency-mismatch"===n){r=!0;continue}if(r=!1,"pending"===n)return void(this.toHide=this.toHide.not(this.errorsFor(t)));if(!n)return this.formatAndAdd(t,s),!1}catch(u){throw this.settings.debug&&window.console&&console.log("exception occured when checking element "+t.id+", check the '"+s.method+"' method",u),u}}return r?void 0:(this.objectLength(i)&&this.successList.push(t),!0)},customMetaMessage:function(t,n){if(e.metadata){var i=this.settings.meta?e(t).metadata()[this.settings.meta]:e(t).metadata();return i&&i.messages&&i.messages[n]}},customDataMessage:function(t,n){return e(t).data("msg-"+n.toLowerCase())||t.attributes&&e(t).attr("data-msg-"+n.toLowerCase())},customMessage:function(e,t){var n=this.settings.messages[e];return n&&(n.constructor===String?n:n[t])},findDefined:function(){for(var e=0;e<arguments.length;e++)if(void 0!==arguments[e])return arguments[e];return void 0},defaultMessage:function(t,n){return this.findDefined(this.customMessage(t.name,n),this.customDataMessage(t,n),this.customMetaMessage(t,n),!this.settings.ignoreTitle&&t.title||void 0,e.validator.messages[n],"<strong>Warning: No message defined for "+t.name+"</strong>")},formatAndAdd:function(t,n){var i=this.defaultMessage(t,n.method),r=/\$?\{(\d+)\}/g;"function"==typeof i?i=i.call(this,n.parameters,t):r.test(i)&&(i=e.validator.format(i.replace(r,"{$1}"),n.parameters)),this.errorList.push({message:i,element:t}),this.errorMap[t.name]=i,this.submitted[t.name]=i},addWrapper:function(e){return this.settings.wrapper&&(e=e.add(e.parent(this.settings.wrapper))),e},defaultShowErrors:function(){var e,t;for(e=0;this.errorList[e];e++){var n=this.errorList[e];this.settings.highlight&&this.settings.highlight.call(this,n.element,this.settings.errorClass,this.settings.validClass),this.showLabel(n.element,n.message)}if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(e=0;this.successList[e];e++)this.showLabel(this.successList[e]);if(this.settings.unhighlight)for(e=0,t=this.validElements();t[e];e++)this.settings.unhighlight.call(this,t[e],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return e(this.errorList).map(function(){return this.element})},showLabel:function(t,n){var i=this.errorsFor(t);i.length?(i.removeClass(this.settings.validClass).addClass(this.settings.errorClass),i.attr("generated")&&i.html(n)):(i=e("<"+this.settings.errorElement+"/>").attr({"for":this.idOrName(t),generated:!0}).addClass(this.settings.errorClass).html(n||""),this.settings.wrapper&&(i=i.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.append(i).length||(this.settings.errorPlacement?this.settings.errorPlacement(i,e(t)):i.insertAfter(t))),!n&&this.settings.success&&(i.text(""),"string"==typeof this.settings.success?i.addClass(this.settings.success):this.settings.success(i,t)),this.toShow=this.toShow.add(i)},errorsFor:function(t){var n=this.idOrName(t);return this.errors().filter(function(){return e(this).attr("for")===n})},idOrName:function(e){return this.groups[e.name]||(this.checkable(e)?e.name:e.id||e.name)},validationTargetFor:function(e){return this.checkable(e)&&(e=this.findByName(e.name).not(this.settings.ignore)[0]),e},checkable:function(e){return/radio|checkbox/i.test(e.type)},findByName:function(t){return e(this.currentForm).find('[name="'+t+'"]')},getLength:function(t,n){switch(n.nodeName.toLowerCase()){case"select":return e("option:selected",n).length;case"input":if(this.checkable(n))return this.findByName(n.name).filter(":checked").length}return t.length},depend:function(e,t){return this.dependTypes[typeof e]?this.dependTypes[typeof e](e,t):!0},dependTypes:{"boolean":function(e){return e},string:function(t,n){return!!e(t,n.form).length},"function":function(e,t){return e(t)}},optional:function(t){var n=this.elementValue(t);return!e.validator.methods.required.call(this,n,t)&&"dependency-mismatch"},startRequest:function(e){this.pending[e.name]||(this.pendingRequest++,this.pending[e.name]=!0)},stopRequest:function(t,n){this.pendingRequest--,this.pendingRequest<0&&(this.pendingRequest=0),delete this.pending[t.name],n&&0===this.pendingRequest&&this.formSubmitted&&this.form()?(e(this.currentForm).submit(),this.formSubmitted=!1):!n&&0===this.pendingRequest&&this.formSubmitted&&(e(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(t){return e.data(t,"previousValue")||e.data(t,"previousValue",{old:null,valid:!0,message:this.defaultMessage(t,"remote")})}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(t,n){t.constructor===String?this.classRuleSettings[t]=n:e.extend(this.classRuleSettings,t)},classRules:function(t){var n={},i=e(t).attr("class");return i&&e.each(i.split(" "),function(){this in e.validator.classRuleSettings&&e.extend(n,e.validator.classRuleSettings[this])}),n},attributeRules:function(t){var n={},i=e(t);for(var r in e.validator.methods){var o;"required"===r?(o=i.get(0).getAttribute(r),""===o&&(o=!0),o=!!o):o=i.attr(r),o?n[r]=o:i[0].getAttribute("type")===r&&(n[r]=!0)}return n.maxlength&&/-1|2147483647|524288/.test(n.maxlength)&&delete n.maxlength,n},metadataRules:function(t){if(!e.metadata)return{};var n=e.data(t.form,"validator").settings.meta;return n?e(t).metadata()[n]:e(t).metadata()},staticRules:function(t){var n={},i=e.data(t.form,"validator");return i.settings.rules&&(n=e.validator.normalizeRule(i.settings.rules[t.name])||{}),n},normalizeRules:function(t,n){return e.each(t,function(i,r){if(r===!1)return void delete t[i];if(r.param||r.depends){var o=!0;switch(typeof r.depends){case"string":o=!!e(r.depends,n.form).length;break;case"function":o=r.depends.call(n,n)}o?t[i]=void 0!==r.param?r.param:!0:delete t[i]}}),e.each(t,function(i,r){t[i]=e.isFunction(r)?r(n):r}),e.each(["minlength","maxlength","min","max"],function(){t[this]&&(t[this]=Number(t[this]))}),e.each(["rangelength","range"],function(){t[this]&&(t[this]=[Number(t[this][0]),Number(t[this][1])])}),e.validator.autoCreateRanges&&(t.min&&t.max&&(t.range=[t.min,t.max],delete t.min,delete t.max),t.minlength&&t.maxlength&&(t.rangelength=[t.minlength,t.maxlength],delete t.minlength,delete t.maxlength)),t.messages&&delete t.messages,t},normalizeRule:function(t){if("string"==typeof t){var n={};e.each(t.split(/\s/),function(){n[this]=!0}),t=n}return t},addMethod:function(t,n,i){e.validator.methods[t]=n,e.validator.messages[t]=void 0!==i?i:e.validator.messages[t],n.length<3&&e.validator.addClassRules(t,e.validator.normalizeRule(t))},methods:{required:function(t,n,i){if(!this.depend(i,n))return"dependency-mismatch";if("select"===n.nodeName.toLowerCase()){var r=e(n).val();return r&&r.length>0}return this.checkable(n)?this.getLength(t,n)>0:e.trim(t).length>0},remote:function(t,n,i){if(this.optional(n))return"dependency-mismatch";var r=this.previousValue(n);if(this.settings.messages[n.name]||(this.settings.messages[n.name]={}),r.originalMessage=this.settings.messages[n.name].remote,this.settings.messages[n.name].remote=r.message,i="string"==typeof i&&{url:i}||i,this.pending[n.name])return"pending";if(r.old===t)return r.valid;r.old=t;var o=this;this.startRequest(n);var a={};return a[n.name]=t,e.ajax(e.extend(!0,{url:i,mode:"abort",port:"validate"+n.name,dataType:"json",data:a,success:function(i){o.settings.messages[n.name].remote=r.originalMessage;var a=i===!0||"true"===i;if(a){var s=o.formSubmitted;o.prepareElement(n),o.formSubmitted=s,o.successList.push(n),delete o.invalid[n.name],o.showErrors()}else{var u={},l=i||o.defaultMessage(n,"remote");u[n.name]=r.message=e.isFunction(l)?l(t):l,o.invalid[n.name]=!0,o.showErrors(u)}r.valid=a,o.stopRequest(n,a)}},i)),"pending"},minlength:function(t,n,i){var r=e.isArray(t)?t.length:this.getLength(e.trim(t),n);return this.optional(n)||r>=i},maxlength:function(t,n,i){var r=e.isArray(t)?t.length:this.getLength(e.trim(t),n);return this.optional(n)||i>=r},rangelength:function(t,n,i){var r=e.isArray(t)?t.length:this.getLength(e.trim(t),n);return this.optional(n)||r>=i[0]&&r<=i[1]},min:function(e,t,n){return this.optional(t)||e>=n},max:function(e,t,n){return this.optional(t)||n>=e},range:function(e,t,n){return this.optional(t)||e>=n[0]&&e<=n[1]},email:function(e,t){return this.optional(t)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(e)},url:function(e,t){return this.optional(t)||/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(e)},date:function(e,t){return this.optional(t)||!/Invalid|NaN/.test(new Date(e))},dateISO:function(e,t){return this.optional(t)||/^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}$/.test(e)},number:function(e,t){return this.optional(t)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(e)},digits:function(e,t){return this.optional(t)||/^\d+$/.test(e)},creditcard:function(e,t){if(this.optional(t))return"dependency-mismatch";if(/[^0-9 \-]+/.test(e))return!1;var n=0,i=0,r=!1;e=e.replace(/\D/g,"");for(var o=e.length-1;o>=0;o--){var a=e.charAt(o);i=parseInt(a,10),r&&(i*=2)>9&&(i-=9),n+=i,r=!r}return n%10===0},equalTo:function(t,n,i){var r=e(i);return this.settings.onfocusout&&r.unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){e(n).valid()}),t===r.val()}}}),e.format=e.validator.format}(jQuery),function(e){var t={};if(e.ajaxPrefilter)e.ajaxPrefilter(function(e,n,i){var r=e.port;"abort"===e.mode&&(t[r]&&t[r].abort(),t[r]=i)});else{var n=e.ajax;e.ajax=function(i){var r=("mode"in i?i:e.ajaxSettings).mode,o=("port"in i?i:e.ajaxSettings).port;return"abort"===r?(t[o]&&t[o].abort(),t[o]=n.apply(this,arguments)):n.apply(this,arguments)}}}(jQuery),function(e){jQuery.event.special.focusin||jQuery.event.special.focusout||!document.addEventListener||e.each({focus:"focusin",blur:"focusout"},function(t,n){function i(t){return t=e.event.fix(t),t.type=n,e.event.handle.call(this,t)}e.event.special[n]={setup:function(){this.addEventListener(t,i,!0)},teardown:function(){this.removeEventListener(t,i,!0)},handler:function(t){var i=arguments;return i[0]=e.event.fix(t),i[0].type=n,e.event.handle.apply(this,i)}}}),e.extend(e.fn,{validateDelegate:function(t,n,i){return this.bind(n,function(n){var r=e(n.target);return r.is(t)?i.apply(r,arguments):void 0})}})}(jQuery),function(e){var t,n,i,r,o=!1,a=!o,s=o,u=".pageless",l="scroll"+u,c="resize"+u,d={container:window,currentPage:1,distance:100,pagination:".pagination",params:{},url:location.href,loaderImage:"https://s3.amazonaws.com/sharetribe/assets/ajax-loader-grey.gif",method:"get"};e.pageless=function(t){e.isFunction(t)?t.call():p(t)},e.pagelessReset=function(){d={container:window,currentPage:1,distance:100,pagination:".pagination",params:{},url:location.href,loaderImage:"https://s3.amazonaws.com/sharetribe/assets/ajax-loader-grey.gif",method:"get"},g(),d.end&&d.end.call()};var f=function(){return d.loaderHtml||'<div id="pageless-loader" style="display:none;text-align:center;width:100%;">  <div class="msg" style="color:#e9e9e9;font-size:2em"></div>  <img src="'+d.loaderImage+'" alt="loading more results" style="margin:10px auto" /></div>'},p=function(t){d.inited||(d.inited=a,t&&e.extend(d,t),i=d.container,r=e(i),d.pagination&&e(d.pagination).remove(),v())};e.fn.pageless=function(i){var r=e(this),o=e(i.loader,r);p(i),t=r,i.loader&&o.length?n=o:(n=e(f()),r.append(n),i.loaderHtml||e("#pageless-loader .msg").html(i.loaderMsg).css(i.msgStyles||{}))};var h=function(e){(s=e)?n&&n.fadeIn("normal"):n&&n.fadeOut("normal")},m=function(){return i===window?e(document).height()-r.scrollTop()-r.height():r[0].scrollHeight-r.scrollTop()-r.height()},g=function(){r.unbind(u)},v=function(){r.bind(l+" "+c,y).trigger(l)},y=function(){return d.totalPages<=d.currentPage?(g(),void(d.end&&d.end.call())):void(!s&&m()<d.distance&&(h(a),d.currentPage++,e.extend(d.params,{page:d.currentPage}),"post"==d.method?e.post(d.url,d.params,function(i){e.isFunction(d.scrape)?d.scrape(i):i,n?n.before(i):t.append(i),h(o),d.complete&&d.complete.call()},"html"):e.get(d.url,d.params,function(i){e.isFunction(d.scrape)?d.scrape(i):i,n?n.before(i):t.append(i),h(o),d.complete&&d.complete.call()},"html")))}}(jQuery),function(e){var t="hidden",n="border-box",i='<textarea tabindex="-1" style="position:absolute; top:-9999px; left:-9999px; right:auto; bottom:auto; -moz-box-sizing:content-box; -webkit-box-sizing:content-box; box-sizing:content-box; word-wrap:break-word; height:0 !important; min-height:0 !important; overflow:hidden">',r=["fontFamily","fontSize","fontWeight","fontStyle","letterSpacing","textTransform","wordSpacing","textIndent"],o="oninput",a="onpropertychange",s=e(i)[0];s.setAttribute(o,"return"),e.fn.autosize=e.isFunction(s[o])||a in s?function(s){return this.each(function(){function u(){var e,n;c||(c=!0,l.value=f.value,l.style.overflowY=f.style.overflowY,l.style.width=p.css("width"),l.scrollTop=0,l.scrollTop=9e4,e=l.scrollTop,n=t,e>m?(e=m,n="scroll"):h>e&&(e=h),f.style.overflowY=n,f.style.height=e+v+"px",setTimeout(function(){c=!1},1))}var l,c,d,f=this,p=e(f),h=p.height(),m=parseInt(p.css("maxHeight"),10),g=r.length,v=0;if((p.css("box-sizing")===n||p.css("-moz-box-sizing")===n||p.css("-webkit-box-sizing")===n)&&(v=p.outerHeight()-p.height()),!p.data("mirror")&&!p.data("ismirror")){for(l=e(i).data("ismirror",!0).addClass(s||"autosizejs")[0],d="none"===p.css("resize")?"none":"horizontal",p.data("mirror",e(l)).css({overflow:t,overflowY:t,wordWrap:"break-word",resize:d}),m=m&&m>0?m:9e4;g--;)l.style[r[g]]=p.css(r[g]);e("body").append(l),a in f?o in f?f[o]=f.onkeyup=u:f[a]=u:f[o]=u,e(window).resize(u),p.bind("autosize",u),u()}})}:function(){return this}}(jQuery),function(e){e.fn.lightbox_me=function(t){return this.each(function(){function n(){var t=u[0].style;a.destroyOnClose?u.add(s).remove():u.add(s).hide(),a.parentLightbox&&a.parentLightbox.fadeIn(200),l.remove(),u.undelegate(a.closeSelector,"click"),e(window).unbind("reposition",r),e(window).unbind("reposition",o),e(window).unbind("scroll",o),e(window).unbind("keyup.lightbox_me"),c&&t.removeExpression("top"),a.onClose()}function i(e){(27==e.keyCode||27==e.DOM_VK_ESCAPE&&0==e.which)&&a.closeEsc&&n()}function r(){e(window).height()<e(document).height()?(s.css({height:e(document).height()+"px"}),l.css({height:e(document).height()+"px"})):(s.css({height:"100%"}),c&&(e("html,body").css("height","100%"),l.css("height","100%")))}function o(){var t=u[0].style;if(u.css({left:"50%",marginLeft:u.outerWidth()/2*-1,zIndex:a.zIndex+3}),u.height()+80>=e(window).height()&&("absolute"!=u.css("position")||c)){var n=e(document).scrollTop()+40;u.css({position:"absolute",top:n+"px",marginTop:0}),c&&t.removeExpression("top")}else if(u.height()+80<e(window).height())if(c)if(t.position="absolute",a.centered)t.setExpression("top",'(document.documentElement.clientHeight || document.body.clientHeight) / 2 - (this.offsetHeight / 2) + (blah = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "px"'),t.marginTop=0;else{var i=a.modalCSS&&a.modalCSS.top?parseInt(a.modalCSS.top):0;t.setExpression("top","((blah = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "+i+') + "px"')}else a.centered?u.css({position:"fixed",top:"50%",marginTop:u.outerHeight()/2*-1}):u.css({position:"fixed"}).css(a.modalCSS)}var a=e.extend({},e.fn.lightbox_me.defaults,t),s=e(),u=e(this),l=e('<iframe id="foo" style="z-index: '+(a.zIndex+1)+';border: none; margin: 0; padding: 0; position: absolute; width: 100%; height: 100%; top: 0; left: 0; filter: mask();"/>'),c=e.browser.msie&&e.browser.version<7;if(a.showOverlay){var d=e(".js_lb_overlay:visible");s=e(d.length>0?'<div class="lb_overlay_clear js_lb_overlay"/>':'<div class="'+a.classPrefix+'_overlay js_lb_overlay"/>')}if(c){var f=/^https/i.test(window.location.href||"")?"javascript:false":"about:blank";l.attr("src",f),e("body").append(l)}e("body").append(u.hide()).append(s),a.showOverlay&&(r(),s.css({position:"absolute",width:"100%",top:0,left:0,right:0,bottom:0,zIndex:a.zIndex+2,display:"none"}),s.hasClass("lb_overlay_clear")||s.css(a.overlayCSS)),a.showOverlay?s.fadeIn(a.overlaySpeed,function(){o(),u[a.appearEffect](a.lightboxSpeed,function(){r(),o(),a.onLoad()})}):(o(),u[a.appearEffect](a.lightboxSpeed,function(){a.onLoad()})),a.parentLightbox&&a.parentLightbox.fadeOut(200),e(window).resize(r).resize(o).scroll(o),e(window).bind("keyup.lightbox_me",i),a.closeClick&&s.click(function(e){n(),e.preventDefault}),u.delegate(a.closeSelector,"click",function(e){n(),e.preventDefault()}),u.bind("close",n),u.bind("reposition",o)})},e.fn.lightbox_me.defaults={appearEffect:"fadeIn",appearEase:"",overlaySpeed:250,lightboxSpeed:300,closeSelector:".close",closeClick:!0,closeEsc:!0,destroyOnClose:!1,showOverlay:!0,parentLightbox:!1,onLoad:function(){},onClose:function(){},classPrefix:"lb",zIndex:999,centered:!1,modalCSS:{top:"40px"},overlayCSS:{background:"black",opacity:.3}}}(jQuery),/*!
 * jQuery Transit - CSS3 transitions and transformations
 * (c) 2011-2012 Rico Sta. Cruz <rico@ricostacruz.com>
 * MIT Licensed.
 *
 * http://ricostacruz.com/jquery.transit
 * http://github.com/rstacruz/jquery.transit
 */
function(e){function t(e){if(e in d.style)return e;var t=["Moz","Webkit","O","ms"],n=e.charAt(0).toUpperCase()+e.substr(1);if(e in d.style)return e;for(var i=0;i<t.length;++i){var r=t[i]+n;if(r in d.style)return r}}function n(){return d.style[f.transform]="",d.style[f.transform]="rotateY(90deg)",""!==d.style[f.transform]}function i(e){return"string"==typeof e&&this.parse(e),this}function r(e,t,n){t===!0?e.queue(n):t?e.queue(t,n):n()}function o(t){var n=[];return e.each(t,function(t){t=e.camelCase(t),t=e.transit.propertyMap[t]||e.cssProps[t]||t,t=u(t),-1===e.inArray(t,n)&&n.push(t)}),n}function a(t,n,i,r){var a=o(t);e.cssEase[i]&&(i=e.cssEase[i]);var s=""+c(n)+" "+i;parseInt(r,10)>0&&(s+=" "+c(r));var u=[];return e.each(a,function(e,t){u.push(t+" "+s)}),u.join(", ")}function s(t,n){n||(e.cssNumber[t]=!0),e.transit.propertyMap[t]=f.transform,e.cssHooks[t]={get:function(n){var i=e(n).css("transit:transform");return i.get(t)},set:function(n,i){var r=e(n).css("transit:transform");r.setFromString(t,i),e(n).css({"transit:transform":r})}}}function u(e){return e.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}function l(e,t){return"string"!=typeof e||e.match(/^[\-0-9\.]+$/)?""+e+t:e}function c(t){var n=t;return e.fx.speeds[n]&&(n=e.fx.speeds[n]),l(n,"ms")}e.transit={version:"0.9.9",propertyMap:{marginLeft:"margin",marginRight:"margin",marginBottom:"margin",marginTop:"margin",paddingLeft:"padding",paddingRight:"padding",paddingBottom:"padding",paddingTop:"padding"},enabled:!0,useTransitionEnd:!1};var d=document.createElement("div"),f={},p=navigator.userAgent.toLowerCase().indexOf("chrome")>-1;f.transition=t("transition"),f.transitionDelay=t("transitionDelay"),f.transform=t("transform"),f.transformOrigin=t("transformOrigin"),f.transform3d=n();var h={transition:"transitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",WebkitTransition:"webkitTransitionEnd",msTransition:"MSTransitionEnd"},m=f.transitionEnd=h[f.transition]||null;for(var g in f)f.hasOwnProperty(g)&&"undefined"==typeof e.support[g]&&(e.support[g]=f[g]);d=null,e.cssEase={_default:"ease","in":"ease-in",out:"ease-out","in-out":"ease-in-out",snap:"cubic-bezier(0,1,.5,1)",easeOutCubic:"cubic-bezier(.215,.61,.355,1)",easeInOutCubic:"cubic-bezier(.645,.045,.355,1)",easeInCirc:"cubic-bezier(.6,.04,.98,.335)",easeOutCirc:"cubic-bezier(.075,.82,.165,1)",easeInOutCirc:"cubic-bezier(.785,.135,.15,.86)",easeInExpo:"cubic-bezier(.95,.05,.795,.035)",easeOutExpo:"cubic-bezier(.19,1,.22,1)",easeInOutExpo:"cubic-bezier(1,0,0,1)",easeInQuad:"cubic-bezier(.55,.085,.68,.53)",easeOutQuad:"cubic-bezier(.25,.46,.45,.94)",easeInOutQuad:"cubic-bezier(.455,.03,.515,.955)",easeInQuart:"cubic-bezier(.895,.03,.685,.22)",easeOutQuart:"cubic-bezier(.165,.84,.44,1)",easeInOutQuart:"cubic-bezier(.77,0,.175,1)",easeInQuint:"cubic-bezier(.755,.05,.855,.06)",easeOutQuint:"cubic-bezier(.23,1,.32,1)",easeInOutQuint:"cubic-bezier(.86,0,.07,1)",easeInSine:"cubic-bezier(.47,0,.745,.715)",easeOutSine:"cubic-bezier(.39,.575,.565,1)",easeInOutSine:"cubic-bezier(.445,.05,.55,.95)",easeInBack:"cubic-bezier(.6,-.28,.735,.045)",easeOutBack:"cubic-bezier(.175, .885,.32,1.275)",easeInOutBack:"cubic-bezier(.68,-.55,.265,1.55)"},e.cssHooks["transit:transform"]={get:function(t){return e(t).data("transform")||new i},set:function(t,n){var r=n;r instanceof i||(r=new i(r)),t.style[f.transform]="WebkitTransform"!==f.transform||p?r.toString():r.toString(!0),e(t).data("transform",r)}},e.cssHooks.transform={set:e.cssHooks["transit:transform"].set},e.fn.jquery<"1.8"&&(e.cssHooks.transformOrigin={get:function(e){return e.style[f.transformOrigin]},set:function(e,t){e.style[f.transformOrigin]=t}},e.cssHooks.transition={get:function(e){return e.style[f.transition]},set:function(e,t){e.style[f.transition]=t}}),s("scale"),s("translate"),s("rotate"),s("rotateX"),s("rotateY"),s("rotate3d"),s("perspective"),s("skewX"),s("skewY"),s("x",!0),s("y",!0),i.prototype={setFromString:function(e,t){var n="string"==typeof t?t.split(","):t.constructor===Array?t:[t];n.unshift(e),i.prototype.set.apply(this,n)},set:function(e){var t=Array.prototype.slice.apply(arguments,[1]);this.setter[e]?this.setter[e].apply(this,t):this[e]=t.join(",")},get:function(e){return this.getter[e]?this.getter[e].apply(this):this[e]||0},setter:{rotate:function(e){this.rotate=l(e,"deg")},rotateX:function(e){this.rotateX=l(e,"deg")},rotateY:function(e){this.rotateY=l(e,"deg")},scale:function(e,t){void 0===t&&(t=e),this.scale=e+","+t},skewX:function(e){this.skewX=l(e,"deg")},skewY:function(e){this.skewY=l(e,"deg")},perspective:function(e){this.perspective=l(e,"px")},x:function(e){this.set("translate",e,null)},y:function(e){this.set("translate",null,e)},translate:function(e,t){void 0===this._translateX&&(this._translateX=0),void 0===this._translateY&&(this._translateY=0),null!==e&&void 0!==e&&(this._translateX=l(e,"px")),null!==t&&void 0!==t&&(this._translateY=l(t,"px")),this.translate=this._translateX+","+this._translateY}},getter:{x:function(){return this._translateX||0},y:function(){return this._translateY||0},scale:function(){var e=(this.scale||"1,1").split(",");return e[0]&&(e[0]=parseFloat(e[0])),e[1]&&(e[1]=parseFloat(e[1])),e[0]===e[1]?e[0]:e},rotate3d:function(){for(var e=(this.rotate3d||"0,0,0,0deg").split(","),t=0;3>=t;++t)e[t]&&(e[t]=parseFloat(e[t]));return e[3]&&(e[3]=l(e[3],"deg")),e}},parse:function(e){var t=this;e.replace(/([a-zA-Z0-9]+)\((.*?)\)/g,function(e,n,i){t.setFromString(n,i)})},toString:function(e){var t=[];for(var n in this)if(this.hasOwnProperty(n)){if(!f.transform3d&&("rotateX"===n||"rotateY"===n||"perspective"===n||"transformOrigin"===n))continue;"_"!==n[0]&&t.push(e&&"scale"===n?n+"3d("+this[n]+",1)":e&&"translate"===n?n+"3d("+this[n]+",0)":n+"("+this[n]+")")}return t.join(" ")}},e.fn.transition=e.fn.transit=function(t,n,i,o){var s=this,u=0,l=!0;"function"==typeof n&&(o=n,n=void 0),"function"==typeof i&&(o=i,i=void 0),"undefined"!=typeof t.easing&&(i=t.easing,delete t.easing),"undefined"!=typeof t.duration&&(n=t.duration,delete t.duration),"undefined"!=typeof t.complete&&(o=t.complete,delete t.complete),"undefined"!=typeof t.queue&&(l=t.queue,delete t.queue),"undefined"!=typeof t.delay&&(u=t.delay,delete t.delay),"undefined"==typeof n&&(n=e.fx.speeds._default),"undefined"==typeof i&&(i=e.cssEase._default),n=c(n);var d=a(t,n,i,u),p=e.transit.enabled&&f.transition,h=p?parseInt(n,10)+parseInt(u,10):0;if(0===h){var g=function(e){s.css(t),o&&o.apply(s),e&&e()};return r(s,l,g),s}var v={},y=function(n){var i=!1,r=function(){i&&s.unbind(m,r),h>0&&s.each(function(){this.style[f.transition]=v[this]||null}),"function"==typeof o&&o.apply(s),"function"==typeof n&&n()};h>0&&m&&e.transit.useTransitionEnd?(i=!0,s.bind(m,r)):window.setTimeout(r,h),s.each(function(){h>0&&(this.style[f.transition]=d),e(this).css(t)})},b=function(e){this.offsetWidth,y(e)};return r(s,l,b),this},e.transit.getTransitionValue=a}(jQuery),function(e,t,n){function i(e){var t={},i=/^jQuery\d+$/;return n.each(e.attributes,function(e,n){n.specified&&!i.test(n.name)&&(t[n.name]=n.value)}),t}function r(e,t){var i=this,r=n(i);if(i.value==r.attr("placeholder")&&r.hasClass("placeholder"))if(r.data("placeholder-password")){if(r=r.hide().next().show().attr("id",r.removeAttr("id").data("placeholder-id")),e===!0)return r[0].value=t;r.focus()}else i.value="",r.removeClass("placeholder"),i==a()&&i.select()}function o(){var e,t=this,o=n(t),a=this.id;if(""==t.value){if("password"==t.type){if(!o.data("placeholder-textinput")){try{e=o.clone().attr({type:"text"})}catch(s){e=n("<input>").attr(n.extend(i(this),{type:"text"}))}e.removeAttr("name").data({"placeholder-password":o,"placeholder-id":a}).bind("focus.placeholder",r),o.data({"placeholder-textinput":e,"placeholder-id":a}).before(e)}o=o.removeAttr("id").hide().prev().attr("id",a).show()}o.addClass("placeholder"),o[0].value=o.attr("placeholder")}else o.removeClass("placeholder")}function a(){try{return t.activeElement}catch(e){}}var s,u,l="[object OperaMini]"==Object.prototype.toString.call(e.operamini),c="placeholder"in t.createElement("input")&&!l,d="placeholder"in t.createElement("textarea")&&!l,f=n.fn,p=n.valHooks,h=n.propHooks;c&&d?(u=f.placeholder=function(){return this},u.input=u.textarea=!0):(u=f.placeholder=function(){var e=this;return e.filter((c?"textarea":":input")+"[placeholder]").not(".placeholder").bind({"focus.placeholder":r,"blur.placeholder":o}).data("placeholder-enabled",!0).trigger("blur.placeholder"),e},u.input=c,u.textarea=d,s={get:function(e){var t=n(e),i=t.data("placeholder-password");return i?i[0].value:t.data("placeholder-enabled")&&t.hasClass("placeholder")?"":e.value},set:function(e,t){var i=n(e),s=i.data("placeholder-password");return s?s[0].value=t:i.data("placeholder-enabled")?(""==t?(e.value=t,e!=a()&&o.call(e)):i.hasClass("placeholder")?r.call(e,!0,t)||(e.value=t):e.value=t,i):e.value=t}},c||(p.input=s,h.value=s),d||(p.textarea=s,h.value=s),n(function(){n(t).delegate("form","submit.placeholder",function(){var e=n(".placeholder",this).each(r);setTimeout(function(){e.each(o)},10)})}),n(e).bind("beforeunload.placeholder",function(){n(".placeholder").each(function(){this.value=""})}))}(this,document,jQuery),/*!
 * jQuery UI Widget 1.10.4+amd
 * https://github.com/blueimp/jQuery-File-Upload
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/jQuery.widget/
 */
function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(e,t){var n=0,i=Array.prototype.slice,r=e.cleanData;e.cleanData=function(t){for(var n,i=0;null!=(n=t[i]);i++)try{e(n).triggerHandler("remove")}catch(o){}r(t)},e.widget=function(t,n,i){var r,o,a,s,u={},l=t.split(".")[0];t=t.split(".")[1],r=l+"-"+t,i||(i=n,n=e.Widget),e.expr[":"][r.toLowerCase()]=function(t){return!!e.data(t,r)},e[l]=e[l]||{},o=e[l][t],a=e[l][t]=function(e,t){return this._createWidget?void(arguments.length&&this._createWidget(e,t)):new a(e,t)},e.extend(a,o,{version:i.version,_proto:e.extend({},i),_childConstructors:[]}),s=new n,s.options=e.widget.extend({},s.options),e.each(i,function(t,i){return e.isFunction(i)?void(u[t]=function(){var e=function(){return n.prototype[t].apply(this,arguments)},r=function(e){return n.prototype[t].apply(this,e)};return function(){var t,n=this._super,o=this._superApply;return this._super=e,this._superApply=r,t=i.apply(this,arguments),this._super=n,this._superApply=o,t}}()):void(u[t]=i)}),a.prototype=e.widget.extend(s,{widgetEventPrefix:o?s.widgetEventPrefix||t:t},u,{constructor:a,namespace:l,widgetName:t,widgetFullName:r}),o?(e.each(o._childConstructors,function(t,n){var i=n.prototype;e.widget(i.namespace+"."+i.widgetName,a,n._proto)}),delete o._childConstructors):n._childConstructors.push(a),e.widget.bridge(t,a)},e.widget.extend=function(n){for(var r,o,a=i.call(arguments,1),s=0,u=a.length;u>s;s++)for(r in a[s])o=a[s][r],a[s].hasOwnProperty(r)&&o!==t&&(n[r]=e.isPlainObject(o)?e.isPlainObject(n[r])?e.widget.extend({},n[r],o):e.widget.extend({},o):o);return n},e.widget.bridge=function(n,r){var o=r.prototype.widgetFullName||n;e.fn[n]=function(a){var s="string"==typeof a,u=i.call(arguments,1),l=this;return a=!s&&u.length?e.widget.extend.apply(null,[a].concat(u)):a,this.each(s?function(){var i,r=e.data(this,o);return r?e.isFunction(r[a])&&"_"!==a.charAt(0)?(i=r[a].apply(r,u),i!==r&&i!==t?(l=i&&i.jquery?l.pushStack(i.get()):i,!1):void 0):e.error("no such method '"+a+"' for "+n+" widget instance"):e.error("cannot call methods on "+n+" prior to initialization; attempted to call method '"+a+"'")}:function(){var t=e.data(this,o);t?t.option(a||{})._init():e.data(this,o,new r(a,this))}),l}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,i){i=e(i||this.defaultElement||this)[0],this.element=e(i),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this.bindings=e(),this.hoverable=e(),this.focusable=e(),i!==this&&(e.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===i&&this.destroy()}}),this.document=e(i.style?i.ownerDocument:i.document||i),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(n,i){var r,o,a,s=n;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof n)if(s={},r=n.split("."),n=r.shift(),r.length){for(o=s[n]=e.widget.extend({},this.options[n]),a=0;a<r.length-1;a++)o[r[a]]=o[r[a]]||{},o=o[r[a]];if(n=r.pop(),1===arguments.length)return o[n]===t?null:o[n];o[n]=i}else{if(1===arguments.length)return this.options[n]===t?null:this.options[n];s[n]=i}return this._setOptions(s),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!t).attr("aria-disabled",t),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(t,n,i){var r,o=this;"boolean"!=typeof t&&(i=n,n=t,t=!1),i?(n=r=e(n),this.bindings=this.bindings.add(n)):(i=n,n=this.element,r=this.widget()),e.each(i,function(i,a){function s(){return t||o.options.disabled!==!0&&!e(this).hasClass("ui-state-disabled")?("string"==typeof a?o[a]:a).apply(o,arguments):void 0}"string"!=typeof a&&(s.guid=a.guid=a.guid||s.guid||e.guid++);var u=i.match(/^(\w+)\s*(.*)$/),l=u[1]+o.eventNamespace,c=u[2];c?r.delegate(c,l,s):n.bind(l,s)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){function n(){return("string"==typeof e?i[e]:e).apply(i,arguments)}var i=this;return setTimeout(n,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,n,i){var r,o,a=this.options[t];if(i=i||{},n=e.Event(n),n.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n.target=this.element[0],o=n.originalEvent)for(r in o)r in n||(n[r]=o[r]);return this.element.trigger(n,i),!(e.isFunction(a)&&a.apply(this.element[0],[n].concat(i))===!1||n.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,n){e.Widget.prototype["_"+t]=function(i,r,o){"string"==typeof r&&(r={effect:r});var a,s=r?r===!0||"number"==typeof r?n:r.effect||n:t;r=r||{},"number"==typeof r&&(r={duration:r}),a=!e.isEmptyObject(r),r.complete=o,r.delay&&i.delay(r.delay),a&&e.effects&&e.effects.effect[s]?i[t](r):s!==t&&i[s]?i[s](r.duration,r.easing,o):i.queue(function(n){e(this)[t](),o&&o.call(i[0]),n()})}})}),!function(e){"use strict";var t=function(e,n,i){var r,o,a=document.createElement("img");if(a.onerror=n,a.onload=function(){!o||i&&i.noRevoke||t.revokeObjectURL(o),n&&n(t.scale(a,i))},t.isInstanceOf("Blob",e)||t.isInstanceOf("File",e))r=o=t.createObjectURL(e),a._type=e.type;else{if("string"!=typeof e)return!1;r=e,i&&i.crossOrigin&&(a.crossOrigin=i.crossOrigin)}return r?(a.src=r,a):t.readFile(e,function(e){var t=e.target;t&&t.result?a.src=t.result:n&&n(e)})},n=window.createObjectURL&&window||window.URL&&URL.revokeObjectURL&&URL||window.webkitURL&&webkitURL;t.isInstanceOf=function(e,t){return Object.prototype.toString.call(t)==="[object "+e+"]"},t.transformCoordinates=function(){},t.getTransformedOptions=function(e){return e},t.renderImageToCanvas=function(e,t,n,i,r,o,a,s,u,l){return e.getContext("2d").drawImage(t,n,i,r,o,a,s,u,l),e},t.hasCanvasOption=function(e){return e.canvas||e.crop},t.scale=function(e,n){n=n||{};var i,r,o,a,s,u,l,c,d,f=document.createElement("canvas"),p=e.getContext||t.hasCanvasOption(n)&&f.getContext,h=e.naturalWidth||e.width,m=e.naturalHeight||e.height,g=h,v=m,y=function(){var e=Math.max((o||g)/g,(a||v)/v);e>1&&(g=Math.ceil(g*e),v=Math.ceil(v*e))},b=function(){var e=Math.min((i||g)/g,(r||v)/v);1>e&&(g=Math.ceil(g*e),v=Math.ceil(v*e))};return p&&(n=t.getTransformedOptions(n),l=n.left||0,c=n.top||0,n.sourceWidth?(s=n.sourceWidth,void 0!==n.right&&void 0===n.left&&(l=h-s-n.right)):s=h-l-(n.right||0),n.sourceHeight?(u=n.sourceHeight,void 0!==n.bottom&&void 0===n.top&&(c=m-u-n.bottom)):u=m-c-(n.bottom||0),g=s,v=u),i=n.maxWidth,r=n.maxHeight,o=n.minWidth,a=n.minHeight,p&&i&&r&&n.crop?(g=i,v=r,d=s/u-i/r,0>d?(u=r*s/i,void 0===n.top&&void 0===n.bottom&&(c=(m-u)/2)):d>0&&(s=i*u/r,void 0===n.left&&void 0===n.right&&(l=(h-s)/2))):((n.contain||n.cover)&&(o=i=i||o,a=r=r||a),n.cover?(b(),y()):(y(),b())),p?(f.width=g,f.height=v,t.transformCoordinates(f,n),t.renderImageToCanvas(f,e,l,c,s,u,0,0,g,v)):(e.width=g,e.height=v,e)},t.createObjectURL=function(e){return n?n.createObjectURL(e):!1},t.revokeObjectURL=function(e){return n?n.revokeObjectURL(e):!1},t.readFile=function(e,t,n){if(window.FileReader){var i=new FileReader;if(i.onload=i.onerror=t,n=n||"readAsDataURL",i[n])return i[n](e),i}return!1},"function"==typeof define&&define.amd?define(function(){return t}):e.loadImage=t}(this),function(e){"use strict";"function"==typeof define&&define.amd?define(["load-image"],e):e(window.loadImage)}(function(e){"use strict";if(window.navigator&&window.navigator.platform&&/iP(hone|od|ad)/.test(window.navigator.platform)){var t=e.renderImageToCanvas;e.detectSubsampling=function(e){var t,n;return e.width*e.height>1048576?(t=document.createElement("canvas"),t.width=t.height=1,n=t.getContext("2d"),n.drawImage(e,-e.width+1,0),0===n.getImageData(0,0,1,1).data[3]):!1},e.detectVerticalSquash=function(e,t){var n,i,r,o,a,s=e.naturalHeight||e.height,u=document.createElement("canvas"),l=u.getContext("2d");for(t&&(s/=2),u.width=1,u.height=s,l.drawImage(e,0,0),n=l.getImageData(0,0,1,s).data,i=0,r=s,o=s;o>i;)a=n[4*(o-1)+3],0===a?r=o:i=o,o=r+i>>1;return o/s||1},e.renderImageToCanvas=function(n,i,r,o,a,s,u,l,c,d){if("image/jpeg"===i._type){var f,p,h,m,g=n.getContext("2d"),v=document.createElement("canvas"),y=1024,b=v.getContext("2d");if(v.width=y,v.height=y,g.save(),f=e.detectSubsampling(i),f&&(r/=2,o/=2,a/=2,s/=2),p=e.detectVerticalSquash(i,f),f||1!==p){for(o*=p,c=Math.ceil(y*c/a),d=Math.ceil(y*d/s/p),l=0,m=0;s>m;){for(u=0,h=0;a>h;)b.clearRect(0,0,y,y),b.drawImage(i,r,o,a,s,-h,-m,a,s),g.drawImage(v,0,0,y,y,u,l,c,d),h+=y,u+=c;m+=y,l+=d}return g.restore(),n}}return t(n,i,r,o,a,s,u,l,c,d)}}}),function(e){"use strict";"function"==typeof define&&define.amd?define(["load-image"],e):e(window.loadImage)}(function(e){"use strict";var t=e.hasCanvasOption;e.hasCanvasOption=function(e){return t(e)||e.orientation},e.transformCoordinates=function(e,t){var n=e.getContext("2d"),i=e.width,r=e.height,o=t.orientation;if(o)switch(o>4&&(e.width=r,e.height=i),o){case 2:n.translate(i,0),n.scale(-1,1);break;case 3:n.translate(i,r),n.rotate(Math.PI);break;case 4:n.translate(0,r),n.scale(1,-1);break;case 5:n.rotate(.5*Math.PI),n.scale(1,-1);break;case 6:n.rotate(.5*Math.PI),n.translate(0,-r);break;case 7:n.rotate(.5*Math.PI),n.translate(i,-r),n.scale(-1,1);break;case 8:n.rotate(-.5*Math.PI),n.translate(-i,0)}},e.getTransformedOptions=function(e){if(!e.orientation||1===e.orientation)return e;var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);switch(e.orientation){case 2:n.left=e.right,n.right=e.left;break;case 3:n.left=e.right,n.top=e.bottom,n.right=e.left,n.bottom=e.top;break;case 4:n.top=e.bottom,n.bottom=e.top;break;case 5:n.left=e.top,n.top=e.left,n.right=e.bottom,n.bottom=e.right;break;case 6:n.left=e.top,n.top=e.right,n.right=e.bottom,n.bottom=e.left;break;case 7:n.left=e.bottom,n.top=e.right,n.right=e.top,n.bottom=e.left;break;case 8:n.left=e.bottom,n.top=e.left,n.right=e.top,n.bottom=e.right}return e.orientation>4&&(n.maxWidth=e.maxHeight,n.maxHeight=e.maxWidth,n.minWidth=e.minHeight,n.minHeight=e.minWidth,n.sourceWidth=e.sourceHeight,n.sourceHeight=e.sourceWidth),n}}),function(e){"use strict";"function"==typeof define&&define.amd?define(["load-image"],e):e(window.loadImage)}(function(e){"use strict";var t=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice);e.blobSlice=t&&function(){var e=this.slice||this.webkitSlice||this.mozSlice;return e.apply(this,arguments)},e.metaDataParsers={jpeg:{65505:[]}},e.parseMetaData=function(t,n,i){i=i||{};var r=this,o=i.maxMetaDataSize||262144,a={},s=!(window.DataView&&t&&t.size>=12&&"image/jpeg"===t.type&&e.blobSlice);(s||!e.readFile(e.blobSlice.call(t,0,o),function(t){if(t.target.error)return console.log(t.target.error),void n(a);var o,s,u,l,c=t.target.result,d=new DataView(c),f=2,p=d.byteLength-4,h=f;if(65496===d.getUint16(0)){for(;p>f&&(o=d.getUint16(f),o>=65504&&65519>=o||65534===o);){if(s=d.getUint16(f+2)+2,f+s>d.byteLength){console.log("Invalid meta data: Invalid segment size.");break}if(u=e.metaDataParsers.jpeg[o])for(l=0;l<u.length;l+=1)u[l].call(r,d,f,s,a,i);f+=s,h=f}!i.disableImageHead&&h>6&&(a.imageHead=c.slice?c.slice(0,h):new Uint8Array(c).subarray(0,h))}else console.log("Invalid JPEG file: Missing JPEG marker.");n(a)},"readAsArrayBuffer"))&&n(a)}}),function(e){"use strict";"function"==typeof define&&define.amd?define(["load-image","load-image-meta"],e):e(window.loadImage)}(function(e){"use strict";e.ExifMap=function(){return this},e.ExifMap.prototype.map={Orientation:274},e.ExifMap.prototype.get=function(e){return this[e]||this[this.map[e]]},e.getExifThumbnail=function(e,t,n){var i,r,o;if(!n||t+n>e.byteLength)return void console.log("Invalid Exif data: Invalid thumbnail data.");for(i=[],r=0;n>r;r+=1)o=e.getUint8(t+r),i.push((16>o?"0":"")+o.toString(16));return"data:image/jpeg,%"+i.join("%")},e.exifTagTypes={1:{getValue:function(e,t){return e.getUint8(t)},size:1},2:{getValue:function(e,t){return String.fromCharCode(e.getUint8(t))},size:1,ascii:!0},3:{getValue:function(e,t,n){return e.getUint16(t,n)},size:2},4:{getValue:function(e,t,n){return e.getUint32(t,n)},size:4},5:{getValue:function(e,t,n){return e.getUint32(t,n)/e.getUint32(t+4,n)},size:8},9:{getValue:function(e,t,n){return e.getInt32(t,n)},size:4},10:{getValue:function(e,t,n){return e.getInt32(t,n)/e.getInt32(t+4,n)},size:8}},e.exifTagTypes[7]=e.exifTagTypes[1],e.getExifValue=function(t,n,i,r,o,a){var s,u,l,c,d,f,p=e.exifTagTypes[r];if(!p)return void console.log("Invalid Exif data: Invalid tag type.");if(s=p.size*o,u=s>4?n+t.getUint32(i+8,a):i+8,u+s>t.byteLength)return void console.log("Invalid Exif data: Invalid data offset.");if(1===o)return p.getValue(t,u,a);for(l=[],c=0;o>c;c+=1)l[c]=p.getValue(t,u+c*p.size,a);if(p.ascii){for(d="",c=0;c<l.length&&(f=l[c],"\x00"!==f);c+=1)d+=f;return d}return l},e.parseExifTag=function(t,n,i,r,o){var a=t.getUint16(i,r);o.exif[a]=e.getExifValue(t,n,i,t.getUint16(i+2,r),t.getUint32(i+4,r),r)},e.parseExifTags=function(e,t,n,i,r){var o,a,s;if(n+6>e.byteLength)return void console.log("Invalid Exif data: Invalid directory offset.");if(o=e.getUint16(n,i),a=n+2+12*o,a+4>e.byteLength)return void console.log("Invalid Exif data: Invalid directory size.");for(s=0;o>s;s+=1)this.parseExifTag(e,t,n+2+12*s,i,r);return e.getUint32(a,i)},e.parseExifData=function(t,n,i,r,o){if(!o.disableExif){var a,s,u,l=n+10;if(1165519206===t.getUint32(n+4)){if(l+8>t.byteLength)return void console.log("Invalid Exif data: Invalid segment size.");if(0!==t.getUint16(n+8))return void console.log("Invalid Exif data: Missing byte alignment offset.");switch(t.getUint16(l)){case 18761:a=!0;break;case 19789:a=!1;break;default:return void console.log("Invalid Exif data: Invalid byte alignment marker.")}if(42!==t.getUint16(l+2,a))return void console.log("Invalid Exif data: Missing TIFF marker.");s=t.getUint32(l+4,a),r.exif=new e.ExifMap,s=e.parseExifTags(t,l,l+s,a,r),s&&!o.disableExifThumbnail&&(u={exif:{}},s=e.parseExifTags(t,l,l+s,a,u),u.exif[513]&&(r.exif.Thumbnail=e.getExifThumbnail(t,l+u.exif[513],u.exif[514]))),r.exif[34665]&&!o.disableExifSub&&e.parseExifTags(t,l,l+r.exif[34665],a,r),r.exif[34853]&&!o.disableExifGps&&e.parseExifTags(t,l,l+r.exif[34853],a,r)}}},e.metaDataParsers.jpeg[65505].push(e.parseExifData)}),function(e){"use strict";"function"==typeof define&&define.amd?define(["load-image","load-image-exif"],e):e(window.loadImage)}(function(e){"use strict";e.ExifMap.prototype.tags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright",36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",42240:"Gamma",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubSecTime",37521:"SubSecTimeOriginal",37522:"SubSecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"PhotographicSensitivity",34856:"OECF",34864:"SensitivityType",34865:"StandardOutputSensitivity",34866:"RecommendedExposureIndex",34867:"ISOSpeed",34868:"ISOSpeedLatitudeyyy",34869:"ISOSpeedLatitudezzz",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRatio",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",42016:"ImageUniqueID",42032:"CameraOwnerName",42033:"BodySerialNumber",42034:"LensSpecification",42035:"LensMake",42036:"LensModel",42037:"LensSerialNumber",0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential",31:"GPSHPositioningError"},e.ExifMap.prototype.stringValues={ExposureProgram:{0:"Undefined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Undefined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},ComponentsConfiguration:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"},Orientation:{1:"top-left",2:"top-right",3:"bottom-right",4:"bottom-left",5:"left-top",6:"right-top",7:"right-bottom",8:"left-bottom"}},e.ExifMap.prototype.getText=function(e){var t=this.get(e);switch(e){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":case"Orientation":return this.stringValues[e][t];case"ExifVersion":case"FlashpixVersion":return String.fromCharCode(t[0],t[1],t[2],t[3]);case"ComponentsConfiguration":return this.stringValues[e][t[0]]+this.stringValues[e][t[1]]+this.stringValues[e][t[2]]+this.stringValues[e][t[3]];case"GPSVersionID":return t[0]+"."+t[1]+"."+t[2]+"."+t[3]}return String(t)},function(e){var t,n=e.tags,i=e.map;for(t in n)n.hasOwnProperty(t)&&(i[n[t]]=t)}(e.ExifMap.prototype),e.ExifMap.prototype.getAll=function(){var e,t,n={};for(e in this)this.hasOwnProperty(e)&&(t=this.tags[e],t&&(n[t]=this.getText(t)));return n}}),!function(e){"use strict";var t=e.HTMLCanvasElement&&e.HTMLCanvasElement.prototype,n=e.Blob&&function(){try{return Boolean(new Blob)}catch(e){return!1}}(),i=n&&e.Uint8Array&&function(){try{return 100===new Blob([new Uint8Array(100)]).size}catch(e){return!1}}(),r=e.BlobBuilder||e.WebKitBlobBuilder||e.MozBlobBuilder||e.MSBlobBuilder,o=(n||r)&&e.atob&&e.ArrayBuffer&&e.Uint8Array&&function(e){var t,o,a,s,u,l;for(t=e.split(",")[0].indexOf("base64")>=0?atob(e.split(",")[1]):decodeURIComponent(e.split(",")[1]),o=new ArrayBuffer(t.length),a=new Uint8Array(o),s=0;s<t.length;s+=1)a[s]=t.charCodeAt(s);return u=e.split(",")[0].split(":")[1].split(";")[0],n?new Blob([i?a:o],{type:u}):(l=new r,l.append(o),l.getBlob(u))};e.HTMLCanvasElement&&!t.toBlob&&(t.mozGetAsFile?t.toBlob=function(e,n,i){e(i&&t.toDataURL&&o?o(this.toDataURL(n,i)):this.mozGetAsFile("blob",n))}:t.toDataURL&&o&&(t.toBlob=function(e,t,n){e(o(this.toDataURL(t,n)))})),"function"==typeof define&&define.amd?define(function(){return o}):e.dataURLtoBlob=o}(this),/*
 * jQuery File Upload Plugin 5.40.1
 * https://github.com/blueimp/jQuery-File-Upload
 *
 * Copyright 2010, Sebastian Tschan
 * https://blueimp.net
 *
 * Licensed under the MIT license:
 * http://www.opensource.org/licenses/MIT
 */
function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery","jquery.ui.widget"],e):e(window.jQuery)}(function(e){"use strict";e.support.fileInput=!(new RegExp("(Android (1\\.[0156]|2\\.[01]))|(Windows Phone (OS 7|8\\.0))|(XBLWP)|(ZuneWP)|(WPDesktop)|(w(eb)?OSBrowser)|(webOS)|(Kindle/(1\\.0|2\\.[05]|3\\.0))").test(window.navigator.userAgent)||e('<input type="file">').prop("disabled")),e.support.xhrFileUpload=!(!window.ProgressEvent||!window.FileReader),e.support.xhrFormDataFileUpload=!!window.FormData,e.support.blobSlice=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice),e.widget("blueimp.fileupload",{options:{dropZone:e(document),pasteZone:e(document),fileInput:void 0,replaceFileInput:!0,paramName:void 0,singleFileUploads:!0,limitMultiFileUploads:void 0,limitMultiFileUploadSize:void 0,limitMultiFileUploadSizeOverhead:512,sequentialUploads:!1,limitConcurrentUploads:void 0,forceIframeTransport:!1,redirect:void 0,redirectParamName:void 0,postMessage:void 0,multipart:!0,maxChunkSize:void 0,uploadedBytes:void 0,recalculateProgress:!0,progressInterval:100,bitrateInterval:500,autoUpload:!0,messages:{uploadedBytes:"Uploaded bytes exceed file size"},i18n:function(t,n){return t=this.messages[t]||t.toString(),n&&e.each(n,function(e,n){t=t.replace("{"+e+"}",n)}),t},formData:function(e){return e.serializeArray()},add:function(t,n){return t.isDefaultPrevented()?!1:void((n.autoUpload||n.autoUpload!==!1&&e(this).fileupload("option","autoUpload"))&&n.process().done(function(){n.submit()}))},processData:!1,contentType:!1,cache:!1},_specialOptions:["fileInput","dropZone","pasteZone","multipart","forceIframeTransport"],_blobSlice:e.support.blobSlice&&function(){var e=this.slice||this.webkitSlice||this.mozSlice;return e.apply(this,arguments)},_BitrateTimer:function(){this.timestamp=Date.now?Date.now():(new Date).getTime(),this.loaded=0,this.bitrate=0,this.getBitrate=function(e,t,n){var i=e-this.timestamp;return(!this.bitrate||!n||i>n)&&(this.bitrate=(t-this.loaded)*(1e3/i)*8,this.loaded=t,this.timestamp=e),this.bitrate}},_isXHRUpload:function(t){return!t.forceIframeTransport&&(!t.multipart&&e.support.xhrFileUpload||e.support.xhrFormDataFileUpload)},_getFormData:function(t){var n;return"function"===e.type(t.formData)?t.formData(t.form):e.isArray(t.formData)?t.formData:"object"===e.type(t.formData)?(n=[],e.each(t.formData,function(e,t){n.push({name:e,value:t})}),n):[]},_getTotal:function(t){var n=0;return e.each(t,function(e,t){n+=t.size||1}),n},_initProgressObject:function(t){var n={loaded:0,total:0,bitrate:0};t._progress?e.extend(t._progress,n):t._progress=n},_initResponseObject:function(e){var t;if(e._response)for(t in e._response)e._response.hasOwnProperty(t)&&delete e._response[t];else e._response={}},_onProgress:function(t,n){if(t.lengthComputable){var i,r=Date.now?Date.now():(new Date).getTime();if(n._time&&n.progressInterval&&r-n._time<n.progressInterval&&t.loaded!==t.total)return;n._time=r,i=Math.floor(t.loaded/t.total*(n.chunkSize||n._progress.total))+(n.uploadedBytes||0),this._progress.loaded+=i-n._progress.loaded,this._progress.bitrate=this._bitrateTimer.getBitrate(r,this._progress.loaded,n.bitrateInterval),n._progress.loaded=n.loaded=i,n._progress.bitrate=n.bitrate=n._bitrateTimer.getBitrate(r,i,n.bitrateInterval),this._trigger("progress",e.Event("progress",{delegatedEvent:t}),n),this._trigger("progressall",e.Event("progressall",{delegatedEvent:t}),this._progress)}},_initProgressListener:function(t){var n=this,i=t.xhr?t.xhr():e.ajaxSettings.xhr();i.upload&&(e(i.upload).bind("progress",function(e){var i=e.originalEvent;e.lengthComputable=i.lengthComputable,e.loaded=i.loaded,e.total=i.total,n._onProgress(e,t)}),t.xhr=function(){return i})},_isInstanceOf:function(e,t){return Object.prototype.toString.call(t)==="[object "+e+"]"},_initXHRData:function(t){var n,i=this,r=t.files[0],o=t.multipart||!e.support.xhrFileUpload,a="array"===e.type(t.paramName)?t.paramName[0]:t.paramName;t.headers=e.extend({},t.headers),t.contentRange&&(t.headers["Content-Range"]=t.contentRange),o&&!t.blob&&this._isInstanceOf("File",r)||(t.headers["Content-Disposition"]='attachment; filename="'+encodeURI(r.name)+'"'),o?e.support.xhrFormDataFileUpload&&(t.postMessage?(n=this._getFormData(t),t.blob?n.push({name:a,value:t.blob}):e.each(t.files,function(i,r){n.push({name:"array"===e.type(t.paramName)&&t.paramName[i]||a,value:r})})):(i._isInstanceOf("FormData",t.formData)?n=t.formData:(n=new FormData,e.each(this._getFormData(t),function(e,t){n.append(t.name,t.value)})),t.blob?n.append(a,t.blob,r.name):e.each(t.files,function(r,o){(i._isInstanceOf("File",o)||i._isInstanceOf("Blob",o))&&n.append("array"===e.type(t.paramName)&&t.paramName[r]||a,o,o.uploadName||o.name)})),t.data=n):(t.contentType=r.type||"application/octet-stream",t.data=t.blob||r),t.blob=null},_initIframeSettings:function(t){var n=e("<a></a>").prop("href",t.url).prop("host");t.dataType="iframe "+(t.dataType||""),t.formData=this._getFormData(t),t.redirect&&n&&n!==location.host&&t.formData.push({name:t.redirectParamName||"redirect",value:t.redirect})},_initDataSettings:function(e){this._isXHRUpload(e)?(this._chunkedUpload(e,!0)||(e.data||this._initXHRData(e),this._initProgressListener(e)),e.postMessage&&(e.dataType="postmessage "+(e.dataType||""))):this._initIframeSettings(e)},_getParamName:function(t){var n=e(t.fileInput),i=t.paramName;return i?e.isArray(i)||(i=[i]):(i=[],n.each(function(){for(var t=e(this),n=t.prop("name")||"files[]",r=(t.prop("files")||[1]).length;r;)i.push(n),r-=1}),i.length||(i=[n.prop("name")||"files[]"])),i},_initFormSettings:function(t){t.form&&t.form.length||(t.form=e(t.fileInput.prop("form")),t.form.length||(t.form=e(this.options.fileInput.prop("form")))),t.paramName=this._getParamName(t),t.url||(t.url=t.form.prop("action")||location.href),t.type=(t.type||"string"===e.type(t.form.prop("method"))&&t.form.prop("method")||"").toUpperCase(),"POST"!==t.type&&"PUT"!==t.type&&"PATCH"!==t.type&&(t.type="POST"),t.formAcceptCharset||(t.formAcceptCharset=t.form.attr("accept-charset"))},_getAJAXSettings:function(t){var n=e.extend({},this.options,t);return this._initFormSettings(n),this._initDataSettings(n),n},_getDeferredState:function(e){return e.state?e.state():e.isResolved()?"resolved":e.isRejected()?"rejected":"pending"},_enhancePromise:function(e){return e.success=e.done,e.error=e.fail,e.complete=e.always,e},_getXHRPromise:function(t,n,i){var r=e.Deferred(),o=r.promise();return n=n||this.options.context||o,t===!0?r.resolveWith(n,i):t===!1&&r.rejectWith(n,i),o.abort=r.promise,this._enhancePromise(o)},_addConvenienceMethods:function(t,n){var i=this,r=function(t){return e.Deferred().resolveWith(i,t).promise()};n.process=function(t,o){return(t||o)&&(n._processQueue=this._processQueue=(this._processQueue||r([this])).pipe(function(){return n.errorThrown?e.Deferred().rejectWith(i,[n]).promise():r(arguments)}).pipe(t,o)),this._processQueue||r([this])},n.submit=function(){return"pending"!==this.state()&&(n.jqXHR=this.jqXHR=i._trigger("submit",e.Event("submit",{delegatedEvent:t}),this)!==!1&&i._onSend(t,this)),this.jqXHR||i._getXHRPromise()},n.abort=function(){return this.jqXHR?this.jqXHR.abort():(this.errorThrown="abort",i._trigger("fail",null,this),i._getXHRPromise(!1))},n.state=function(){return this.jqXHR?i._getDeferredState(this.jqXHR):this._processQueue?i._getDeferredState(this._processQueue):void 0},n.processing=function(){return!this.jqXHR&&this._processQueue&&"pending"===i._getDeferredState(this._processQueue)},n.progress=function(){return this._progress},n.response=function(){return this._response}},_getUploadedBytes:function(e){var t=e.getResponseHeader("Range"),n=t&&t.split("-"),i=n&&n.length>1&&parseInt(n[1],10);return i&&i+1},_chunkedUpload:function(t,n){t.uploadedBytes=t.uploadedBytes||0;var i,r,o=this,a=t.files[0],s=a.size,u=t.uploadedBytes,l=t.maxChunkSize||s,c=this._blobSlice,d=e.Deferred(),f=d.promise();return this._isXHRUpload(t)&&c&&(u||s>l)&&!t.data?n?!0:u>=s?(a.error=t.i18n("uploadedBytes"),this._getXHRPromise(!1,t.context,[null,"error",a.error])):(r=function(){var n=e.extend({},t),f=n._progress.loaded;n.blob=c.call(a,u,u+l,a.type),n.chunkSize=n.blob.size,n.contentRange="bytes "+u+"-"+(u+n.chunkSize-1)+"/"+s,o._initXHRData(n),o._initProgressListener(n),i=(o._trigger("chunksend",null,n)!==!1&&e.ajax(n)||o._getXHRPromise(!1,n.context)).done(function(i,a,l){u=o._getUploadedBytes(l)||u+n.chunkSize,f+n.chunkSize-n._progress.loaded&&o._onProgress(e.Event("progress",{lengthComputable:!0,loaded:u-n.uploadedBytes,total:u-n.uploadedBytes}),n),t.uploadedBytes=n.uploadedBytes=u,n.result=i,n.textStatus=a,n.jqXHR=l,o._trigger("chunkdone",null,n),o._trigger("chunkalways",null,n),s>u?r():d.resolveWith(n.context,[i,a,l])}).fail(function(e,t,i){n.jqXHR=e,n.textStatus=t,n.errorThrown=i,o._trigger("chunkfail",null,n),o._trigger("chunkalways",null,n),d.rejectWith(n.context,[e,t,i])})},this._enhancePromise(f),f.abort=function(){return i.abort()},r(),f):!1},_beforeSend:function(e,t){0===this._active&&(this._trigger("start"),this._bitrateTimer=new this._BitrateTimer,this._progress.loaded=this._progress.total=0,this._progress.bitrate=0),this._initResponseObject(t),this._initProgressObject(t),t._progress.loaded=t.loaded=t.uploadedBytes||0,t._progress.total=t.total=this._getTotal(t.files)||1,t._progress.bitrate=t.bitrate=0,this._active+=1,this._progress.loaded+=t.loaded,this._progress.total+=t.total},_onDone:function(t,n,i,r){var o=r._progress.total,a=r._response;r._progress.loaded<o&&this._onProgress(e.Event("progress",{lengthComputable:!0,loaded:o,total:o}),r),a.result=r.result=t,a.textStatus=r.textStatus=n,a.jqXHR=r.jqXHR=i,this._trigger("done",null,r)},_onFail:function(e,t,n,i){var r=i._response;i.recalculateProgress&&(this._progress.loaded-=i._progress.loaded,this._progress.total-=i._progress.total),r.jqXHR=i.jqXHR=e,r.textStatus=i.textStatus=t,r.errorThrown=i.errorThrown=n,this._trigger("fail",null,i)},_onAlways:function(e,t,n,i){this._trigger("always",null,i)},_onSend:function(t,n){n.submit||this._addConvenienceMethods(t,n);var i,r,o,a,s=this,u=s._getAJAXSettings(n),l=function(){return s._sending+=1,u._bitrateTimer=new s._BitrateTimer,i=i||((r||s._trigger("send",e.Event("send",{delegatedEvent:t}),u)===!1)&&s._getXHRPromise(!1,u.context,r)||s._chunkedUpload(u)||e.ajax(u)).done(function(e,t,n){s._onDone(e,t,n,u)}).fail(function(e,t,n){s._onFail(e,t,n,u)}).always(function(e,t,n){if(s._onAlways(e,t,n,u),s._sending-=1,s._active-=1,u.limitConcurrentUploads&&u.limitConcurrentUploads>s._sending)for(var i=s._slots.shift();i;){if("pending"===s._getDeferredState(i)){i.resolve();break}i=s._slots.shift()}0===s._active&&s._trigger("stop")})};return this._beforeSend(t,u),this.options.sequentialUploads||this.options.limitConcurrentUploads&&this.options.limitConcurrentUploads<=this._sending?(this.options.limitConcurrentUploads>1?(o=e.Deferred(),this._slots.push(o),a=o.pipe(l)):(this._sequence=this._sequence.pipe(l,l),a=this._sequence),a.abort=function(){return r=[void 0,"abort","abort"],i?i.abort():(o&&o.rejectWith(u.context,r),l())},this._enhancePromise(a)):l()},_onAdd:function(t,n){var i,r,o,a,s=this,u=!0,l=e.extend({},this.options,n),c=n.files,d=c.length,f=l.limitMultiFileUploads,p=l.limitMultiFileUploadSize,h=l.limitMultiFileUploadSizeOverhead,m=0,g=this._getParamName(l),v=0;if(!p||d&&void 0!==c[0].size||(p=void 0),(l.singleFileUploads||f||p)&&this._isXHRUpload(l))if(l.singleFileUploads||p||!f)if(!l.singleFileUploads&&p)for(o=[],i=[],a=0;d>a;a+=1)m+=c[a].size+h,(a+1===d||m+c[a+1].size+h>p||f&&a+1-v>=f)&&(o.push(c.slice(v,a+1)),r=g.slice(v,a+1),r.length||(r=g),i.push(r),v=a+1,m=0);else i=g;else for(o=[],i=[],a=0;d>a;a+=f)o.push(c.slice(a,a+f)),r=g.slice(a,a+f),r.length||(r=g),i.push(r);else o=[c],i=[g];return n.originalFiles=c,e.each(o||c,function(r,a){var l=e.extend({},n);return l.files=o?a:[a],l.paramName=i[r],s._initResponseObject(l),s._initProgressObject(l),s._addConvenienceMethods(t,l),u=s._trigger("add",e.Event("add",{delegatedEvent:t}),l)}),u},_replaceFileInput:function(t){var n=t.clone(!0);e("<form></form>").append(n)[0].reset(),t.after(n).detach(),e.cleanData(t.unbind("remove")),this.options.fileInput=this.options.fileInput.map(function(e,i){return i===t[0]?n[0]:i}),t[0]===this.element[0]&&(this.element=n)},_handleFileTreeEntry:function(t,n){var i,r=this,o=e.Deferred(),a=function(e){e&&!e.entry&&(e.entry=t),o.resolve([e])};return n=n||"",t.isFile?t._file?(t._file.relativePath=n,o.resolve(t._file)):t.file(function(e){e.relativePath=n,o.resolve(e)},a):t.isDirectory?(i=t.createReader(),i.readEntries(function(e){r._handleFileTreeEntries(e,n+t.name+"/").done(function(e){o.resolve(e)}).fail(a)},a)):o.resolve([]),o.promise()},_handleFileTreeEntries:function(t,n){var i=this;return e.when.apply(e,e.map(t,function(e){return i._handleFileTreeEntry(e,n)})).pipe(function(){return Array.prototype.concat.apply([],arguments)})},_getDroppedFiles:function(t){t=t||{};var n=t.items;return n&&n.length&&(n[0].webkitGetAsEntry||n[0].getAsEntry)?this._handleFileTreeEntries(e.map(n,function(e){var t;return e.webkitGetAsEntry?(t=e.webkitGetAsEntry(),t&&(t._file=e.getAsFile()),t):e.getAsEntry()})):e.Deferred().resolve(e.makeArray(t.files)).promise()},_getSingleFileInputFiles:function(t){t=e(t);var n,i,r=t.prop("webkitEntries")||t.prop("entries");if(r&&r.length)return this._handleFileTreeEntries(r);if(n=e.makeArray(t.prop("files")),n.length)void 0===n[0].name&&n[0].fileName&&e.each(n,function(e,t){t.name=t.fileName,t.size=t.fileSize});else{if(i=t.prop("value"),!i)return e.Deferred().resolve([]).promise();n=[{name:i.replace(/^.*\\/,"")}]}return e.Deferred().resolve(n).promise()},_getFileInputFiles:function(t){return t instanceof e&&1!==t.length?e.when.apply(e,e.map(t,this._getSingleFileInputFiles)).pipe(function(){return Array.prototype.concat.apply([],arguments)}):this._getSingleFileInputFiles(t)},_onChange:function(t){var n=this,i={fileInput:e(t.target),form:e(t.target.form)};this._getFileInputFiles(i.fileInput).always(function(r){i.files=r,n.options.replaceFileInput&&n._replaceFileInput(i.fileInput),n._trigger("change",e.Event("change",{delegatedEvent:t}),i)!==!1&&n._onAdd(t,i)})},_onPaste:function(t){var n=t.originalEvent&&t.originalEvent.clipboardData&&t.originalEvent.clipboardData.items,i={files:[]};n&&n.length&&(e.each(n,function(e,t){var n=t.getAsFile&&t.getAsFile();n&&i.files.push(n)}),this._trigger("paste",e.Event("paste",{delegatedEvent:t}),i)!==!1&&this._onAdd(t,i))},_onDrop:function(t){t.dataTransfer=t.originalEvent&&t.originalEvent.dataTransfer;var n=this,i=t.dataTransfer,r={};i&&i.files&&i.files.length&&(t.preventDefault(),this._getDroppedFiles(i).always(function(i){r.files=i,n._trigger("drop",e.Event("drop",{delegatedEvent:t}),r)!==!1&&n._onAdd(t,r)}))},_onDragOver:function(t){t.dataTransfer=t.originalEvent&&t.originalEvent.dataTransfer;var n=t.dataTransfer;n&&-1!==e.inArray("Files",n.types)&&this._trigger("dragover",e.Event("dragover",{delegatedEvent:t}))!==!1&&(t.preventDefault(),n.dropEffect="copy")},_initEventHandlers:function(){this._isXHRUpload(this.options)&&(this._on(this.options.dropZone,{dragover:this._onDragOver,drop:this._onDrop}),this._on(this.options.pasteZone,{paste:this._onPaste})),e.support.fileInput&&this._on(this.options.fileInput,{change:this._onChange})},_destroyEventHandlers:function(){this._off(this.options.dropZone,"dragover drop"),this._off(this.options.pasteZone,"paste"),this._off(this.options.fileInput,"change")},_setOption:function(t,n){var i=-1!==e.inArray(t,this._specialOptions);i&&this._destroyEventHandlers(),this._super(t,n),i&&(this._initSpecialOptions(),this._initEventHandlers())},_initSpecialOptions:function(){var t=this.options;void 0===t.fileInput?t.fileInput=this.element.is('input[type="file"]')?this.element:this.element.find('input[type="file"]'):t.fileInput instanceof e||(t.fileInput=e(t.fileInput)),t.dropZone instanceof e||(t.dropZone=e(t.dropZone)),t.pasteZone instanceof e||(t.pasteZone=e(t.pasteZone))},_getRegExp:function(e){var t=e.split("/"),n=t.pop();return t.shift(),new RegExp(t.join("/"),n)},_isRegExpOption:function(t,n){return"url"!==t&&"string"===e.type(n)&&/^\/.*\/[igm]{0,3}$/.test(n)},_initDataAttributes:function(){var t=this,n=this.options,i=e(this.element[0].cloneNode(!1));e.each(i.data(),function(e,r){var o="data-"+e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();i.attr(o)&&(t._isRegExpOption(e,r)&&(r=t._getRegExp(r)),n[e]=r)})},_create:function(){this._initDataAttributes(),this._initSpecialOptions(),this._slots=[],this._sequence=this._getXHRPromise(!0),this._sending=this._active=0,this._initProgressObject(this),this._initEventHandlers()},active:function(){return this._active},progress:function(){return this._progress},add:function(t){var n=this;t&&!this.options.disabled&&(t.fileInput&&!t.files?this._getFileInputFiles(t.fileInput).always(function(e){t.files=e,n._onAdd(null,t)}):(t.files=e.makeArray(t.files),this._onAdd(null,t)))},send:function(t){if(t&&!this.options.disabled){if(t.fileInput&&!t.files){var n,i,r=this,o=e.Deferred(),a=o.promise();return a.abort=function(){return i=!0,n?n.abort():(o.reject(null,"abort","abort"),a)},this._getFileInputFiles(t.fileInput).always(function(e){if(!i){if(!e.length)return void o.reject();t.files=e,n=r._onSend(null,t).then(function(e,t,n){o.resolve(e,t,n)},function(e,t,n){o.reject(e,t,n)})}}),this._enhancePromise(a)}if(t.files=e.makeArray(t.files),t.files.length)return this._onSend(null,t)}return this._getXHRPromise(!1,t&&t.context)}})}),/*
 * jQuery File Upload Processing Plugin 1.3.0
 * https://github.com/blueimp/jQuery-File-Upload
 *
 * Copyright 2012, Sebastian Tschan
 * https://blueimp.net
 *
 * Licensed under the MIT license:
 * http://www.opensource.org/licenses/MIT
 */
function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery","./jquery.fileupload"],e):e(window.jQuery)}(function(e){"use strict";var t=e.blueimp.fileupload.prototype.options.add;e.widget("blueimp.fileupload",e.blueimp.fileupload,{options:{processQueue:[],add:function(n,i){var r=e(this);i.process(function(){return r.fileupload("process",i)}),t.call(this,n,i)}},processActions:{},_processFile:function(t,n){var i=this,r=e.Deferred().resolveWith(i,[t]),o=r.promise();return this._trigger("process",null,t),e.each(t.processQueue,function(t,r){var a=function(t){return n.errorThrown?e.Deferred().rejectWith(i,[n]).promise():i.processActions[r.action].call(i,t,r)};o=o.pipe(a,r.always&&a)}),o.done(function(){i._trigger("processdone",null,t),i._trigger("processalways",null,t)}).fail(function(){i._trigger("processfail",null,t),i._trigger("processalways",null,t)}),o},_transformProcessQueue:function(t){var n=[];e.each(t.processQueue,function(){var i={},r=this.action,o=this.prefix===!0?r:this.prefix;e.each(this,function(n,r){i[n]="string"===e.type(r)&&"@"===r.charAt(0)?t[r.slice(1)||(o?o+n.charAt(0).toUpperCase()+n.slice(1):n)]:r}),n.push(i)}),t.processQueue=n},processing:function(){return this._processing},process:function(t){var n=this,i=e.extend({},this.options,t);return i.processQueue&&i.processQueue.length&&(this._transformProcessQueue(i),0===this._processing&&this._trigger("processstart"),e.each(t.files,function(r){var o=r?e.extend({},i):i,a=function(){return t.errorThrown?e.Deferred().rejectWith(n,[t]).promise():n._processFile(o,t)};o.index=r,n._processing+=1,n._processingQueue=n._processingQueue.pipe(a,a).always(function(){n._processing-=1,0===n._processing&&n._trigger("processstop")})})),this._processingQueue},_create:function(){this._super(),this._processing=0,this._processingQueue=e.Deferred().resolveWith(this).promise()}})}),/*
 * jQuery File Upload Validation Plugin 1.1.2
 * https://github.com/blueimp/jQuery-File-Upload
 *
 * Copyright 2013, Sebastian Tschan
 * https://blueimp.net
 *
 * Licensed under the MIT license:
 * http://www.opensource.org/licenses/MIT
 */
function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery","./jquery.fileupload-process"],e):e(window.jQuery)}(function(e){"use strict";e.blueimp.fileupload.prototype.options.processQueue.push({action:"validate",always:!0,acceptFileTypes:"@",maxFileSize:"@",minFileSize:"@",maxNumberOfFiles:"@",disabled:"@disableValidation"}),e.widget("blueimp.fileupload",e.blueimp.fileupload,{options:{getNumberOfFiles:e.noop,messages:{maxNumberOfFiles:"Maximum number of files exceeded",acceptFileTypes:"File type not allowed",maxFileSize:"File is too large",minFileSize:"File is too small"}},processActions:{validate:function(t,n){if(n.disabled)return t;var i,r=e.Deferred(),o=this.options,a=t.files[t.index];return(n.minFileSize||n.maxFileSize)&&(i=a.size),"number"===e.type(n.maxNumberOfFiles)&&(o.getNumberOfFiles()||0)+t.files.length>n.maxNumberOfFiles?a.error=o.i18n("maxNumberOfFiles"):!n.acceptFileTypes||n.acceptFileTypes.test(a.type)||n.acceptFileTypes.test(a.name)?i>n.maxFileSize?a.error=o.i18n("maxFileSize"):"number"===e.type(i)&&i<n.minFileSize?a.error=o.i18n("minFileSize"):delete a.error:a.error=o.i18n("acceptFileTypes"),a.error||t.files.error?(t.files.error=!0,r.rejectWith(this,[t])):r.resolveWith(this,[t]),r.promise()}}})}),/*
 * jQuery File Upload Image Preview & Resize Plugin 1.7.2
 * https://github.com/blueimp/jQuery-File-Upload
 *
 * Copyright 2013, Sebastian Tschan
 * https://blueimp.net
 *
 * Licensed under the MIT license:
 * http://www.opensource.org/licenses/MIT
 */
function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery","load-image","load-image-meta","load-image-exif","load-image-ios","canvas-to-blob","./jquery.fileupload-process"],e):e(window.jQuery,window.loadImage)}(function(e,t){"use strict";e.blueimp.fileupload.prototype.options.processQueue.unshift({action:"loadImageMetaData",disableImageHead:"@",disableExif:"@",disableExifThumbnail:"@",disableExifSub:"@",disableExifGps:"@",disabled:"@disableImageMetaDataLoad"},{action:"loadImage",prefix:!0,fileTypes:"@",maxFileSize:"@",noRevoke:"@",disabled:"@disableImageLoad"},{action:"resizeImage",prefix:"image",maxWidth:"@",maxHeight:"@",minWidth:"@",minHeight:"@",crop:"@",orientation:"@",forceResize:"@",disabled:"@disableImageResize"},{action:"saveImage",quality:"@imageQuality",type:"@imageType",disabled:"@disableImageResize"},{action:"saveImageMetaData",disabled:"@disableImageMetaDataSave"},{action:"resizeImage",prefix:"preview",maxWidth:"@",maxHeight:"@",minWidth:"@",minHeight:"@",crop:"@",orientation:"@",thumbnail:"@",canvas:"@",disabled:"@disableImagePreview"},{action:"setImage",name:"@imagePreviewName",disabled:"@disableImagePreview"},{action:"deleteImageReferences",disabled:"@disableImageReferencesDeletion"}),e.widget("blueimp.fileupload",e.blueimp.fileupload,{options:{loadImageFileTypes:/^image\/(gif|jpeg|png|svg\+xml)$/,loadImageMaxFileSize:1e7,imageMaxWidth:1920,imageMaxHeight:1080,imageOrientation:!1,imageCrop:!1,disableImageResize:!0,previewMaxWidth:80,previewMaxHeight:80,previewOrientation:!0,previewThumbnail:!0,previewCrop:!1,previewCanvas:!0},processActions:{loadImage:function(n,i){if(i.disabled)return n;var r=this,o=n.files[n.index],a=e.Deferred();return"number"===e.type(i.maxFileSize)&&o.size>i.maxFileSize||i.fileTypes&&!i.fileTypes.test(o.type)||!t(o,function(e){e.src&&(n.img=e),a.resolveWith(r,[n])},i)?n:a.promise()},resizeImage:function(n,i){if(i.disabled||!n.canvas&&!n.img)return n;i=e.extend({canvas:!0},i);var r,o=this,a=e.Deferred(),s=i.canvas&&n.canvas||n.img,u=function(e){e&&(e.width!==s.width||e.height!==s.height||i.forceResize)&&(n[e.getContext?"canvas":"img"]=e),n.preview=e,a.resolveWith(o,[n])};if(n.exif){if(i.orientation===!0&&(i.orientation=n.exif.get("Orientation")),i.thumbnail&&(r=n.exif.get("Thumbnail")))return t(r,u,i),a.promise();n.orientation?delete i.orientation:n.orientation=i.orientation}return s?(u(t.scale(s,i)),a.promise()):n},saveImage:function(t,n){if(!t.canvas||n.disabled)return t;var i=this,r=t.files[t.index],o=e.Deferred();return t.canvas.toBlob?(t.canvas.toBlob(function(e){e.name||(r.type===e.type?e.name=r.name:r.name&&(e.name=r.name.replace(/\..+$/,"."+e.type.substr(6)))),r.type!==e.type&&delete t.imageHead,t.files[t.index]=e,o.resolveWith(i,[t])},n.type||r.type,n.quality),o.promise()):t},loadImageMetaData:function(n,i){if(i.disabled)return n;var r=this,o=e.Deferred();return t.parseMetaData(n.files[n.index],function(t){e.extend(n,t),o.resolveWith(r,[n])},i),o.promise()},saveImageMetaData:function(e,t){if(!(e.imageHead&&e.canvas&&e.canvas.toBlob)||t.disabled)return e;var n=e.files[e.index],i=new Blob([e.imageHead,this._blobSlice.call(n,20)],{type:n.type});return i.name=n.name,e.files[e.index]=i,e},setImage:function(e,t){return e.preview&&!t.disabled&&(e.files[e.index][t.name||"preview"]=e.preview),e},deleteImageReferences:function(e,t){return t.disabled||(delete e.img,delete e.canvas,delete e.preview,delete e.imageHead),e}}})}),function(e,t){function n(){return new Date(Date.UTC.apply(Date,arguments))}function i(){var e=new Date;return n(e.getFullYear(),e.getMonth(),e.getDate())}function r(e){return function(){return this[e].apply(this,arguments)}}function o(t,n){function i(e,t){return t.toLowerCase()}var r,o=e(t).data(),a={},s=new RegExp("^"+n.toLowerCase()+"([A-Z])");n=new RegExp("^"+n.toLowerCase());for(var u in o)n.test(u)&&(r=u.replace(s,i),a[r]=o[u]);return a}function a(t){var n={};if(h[t]||(t=t.split("-")[0],h[t])){var i=h[t];return e.each(p,function(e,t){t in i&&(n[t]=i[t])}),n}}var s=e(window),u=function(){var t={get:function(e){return this.slice(e)[0]},contains:function(e){for(var t=e&&e.valueOf(),n=0,i=this.length;i>n;n++)if(this[n].valueOf()===t)return n;return-1},remove:function(e){this.splice(e,1)},replace:function(t){t&&(e.isArray(t)||(t=[t]),this.clear(),this.push.apply(this,t))},clear:function(){this.length=0},copy:function(){var e=new u;return e.replace(this),e}};return function(){var n=[];return n.push.apply(n,arguments),e.extend(n,t),n}}(),l=function(t,n){this.dates=new u,this.viewDate=i(),this.focusDate=null,this._process_options(n),this.element=e(t),this.isInline=!1,this.isInput=this.element.is("input"),this.component=this.element.is(".date")?this.element.find(".add-on, .input-group-addon, .btn"):!1,this.hasInput=this.component&&this.element.find("input").length,this.component&&0===this.component.length&&(this.component=!1),this.picker=e(m.template),this._buildEvents(),this._attachEvents(),this.isInline?this.picker.addClass("datepicker-inline").appendTo(this.element):this.picker.addClass("datepicker-dropdown dropdown-menu"),this.o.rtl&&this.picker.addClass("datepicker-rtl"),this.viewMode=this.o.startView,this.o.calendarWeeks&&this.picker.find("tfoot th.today").attr("colspan",function(e,t){return parseInt(t)+1}),this._allow_update=!1,this.setStartDate(this._o.startDate),this.setEndDate(this._o.endDate),this.setDaysOfWeekDisabled(this.o.daysOfWeekDisabled),this.fillDow(),this.fillMonths(),this._allow_update=!0,this.update(),this.showMode(),this.isInline&&this.show()};l.prototype={constructor:l,_process_options:function(t){this._o=e.extend({},this._o,t);var n=this.o=e.extend({},this._o),i=n.language;switch(h[i]||(i=i.split("-")[0],h[i]||(i=f.language)),n.language=i,n.startView){case 2:case"decade":n.startView=2;break;case 1:case"year":n.startView=1;break;default:n.startView=0}switch(n.minViewMode){case 1:case"months":n.minViewMode=1;break;case 2:case"years":n.minViewMode=2;break;default:n.minViewMode=0}n.startView=Math.max(n.startView,n.minViewMode),n.multidate!==!0&&(n.multidate=Number(n.multidate)||!1,n.multidate=n.multidate!==!1?Math.max(0,n.multidate):1),n.multidateSeparator=String(n.multidateSeparator),n.weekStart%=7,n.weekEnd=(n.weekStart+6)%7;var r=m.parseFormat(n.format);n.startDate!==-1/0&&(n.startDate=n.startDate?n.startDate instanceof Date?this._local_to_utc(this._zero_time(n.startDate)):m.parseDate(n.startDate,r,n.language):-1/0),1/0!==n.endDate&&(n.endDate=n.endDate?n.endDate instanceof Date?this._local_to_utc(this._zero_time(n.endDate)):m.parseDate(n.endDate,r,n.language):1/0),n.daysOfWeekDisabled=n.daysOfWeekDisabled||[],e.isArray(n.daysOfWeekDisabled)||(n.daysOfWeekDisabled=n.daysOfWeekDisabled.split(/[,\s]*/)),n.daysOfWeekDisabled=e.map(n.daysOfWeekDisabled,function(e){return parseInt(e,10)});var o=String(n.orientation).toLowerCase().split(/\s+/g),a=n.orientation.toLowerCase();if(o=e.grep(o,function(e){return/^auto|left|right|top|bottom$/.test(e)}),n.orientation={x:"auto",y:"auto"},a&&"auto"!==a)if(1===o.length)switch(o[0]){case"top":case"bottom":n.orientation.y=o[0];break;case"left":case"right":n.orientation.x=o[0]}else a=e.grep(o,function(e){return/^left|right$/.test(e)}),n.orientation.x=a[0]||"auto",a=e.grep(o,function(e){return/^top|bottom$/.test(e)}),n.orientation.y=a[0]||"auto";else;},_events:[],_secondaryEvents:[],_applyEvents:function(e){for(var n,i,r,o=0;o<e.length;o++)n=e[o][0],2===e[o].length?(i=t,r=e[o][1]):3===e[o].length&&(i=e[o][1],r=e[o][2]),n.on(r,i)},_unapplyEvents:function(e){for(var n,i,r,o=0;o<e.length;o++)n=e[o][0],2===e[o].length?(r=t,i=e[o][1]):3===e[o].length&&(r=e[o][1],i=e[o][2]),n.off(i,r)},_buildEvents:function(){this.isInput?this._events=[[this.element,{focus:e.proxy(this.show,this),keyup:e.proxy(function(t){-1===e.inArray(t.keyCode,[27,37,39,38,40,32,13,9])&&this.update()},this),keydown:e.proxy(this.keydown,this)}]]:this.component&&this.hasInput?this._events=[[this.element.find("input"),{focus:e.proxy(this.show,this),keyup:e.proxy(function(t){-1===e.inArray(t.keyCode,[27,37,39,38,40,32,13,9])&&this.update()},this),keydown:e.proxy(this.keydown,this)}],[this.component,{click:e.proxy(this.show,this)}]]:this.element.is("div")?this.isInline=!0:this._events=[[this.element,{click:e.proxy(this.show,this)}]],this._events.push([this.element,"*",{blur:e.proxy(function(e){this._focused_from=e.target},this)}],[this.element,{blur:e.proxy(function(e){this._focused_from=e.target},this)}]),this._secondaryEvents=[[this.picker,{click:e.proxy(this.click,this)}],[e(window),{resize:e.proxy(this.place,this)}],[e(document),{"mousedown touchstart":e.proxy(function(e){this.element.is(e.target)||this.element.find(e.target).length||this.picker.is(e.target)||this.picker.find(e.target).length||this.hide()},this)}]]},_attachEvents:function(){this._detachEvents(),this._applyEvents(this._events)},_detachEvents:function(){this._unapplyEvents(this._events)},_attachSecondaryEvents:function(){this._detachSecondaryEvents(),this._applyEvents(this._secondaryEvents)},_detachSecondaryEvents:function(){this._unapplyEvents(this._secondaryEvents)},_trigger:function(t,n){var i=n||this.dates.get(-1),r=this._utc_to_local(i);this.element.trigger({type:t,date:r,dates:e.map(this.dates,this._utc_to_local),format:e.proxy(function(e,t){0===arguments.length?(e=this.dates.length-1,t=this.o.format):"string"==typeof e&&(t=e,e=this.dates.length-1),t=t||this.o.format;var n=this.dates.get(e);return m.formatDate(n,t,this.o.language)},this)})},show:function(){this.isInline||this.picker.appendTo("body"),this.picker.show(),this.place(),this._attachSecondaryEvents(),this._trigger("show")},hide:function(){this.isInline||this.picker.is(":visible")&&(this.focusDate=null,this.picker.hide().detach(),this._detachSecondaryEvents(),this.viewMode=this.o.startView,this.showMode(),this.o.forceParse&&(this.isInput&&this.element.val()||this.hasInput&&this.element.find("input").val())&&this.setValue(),this._trigger("hide"))},remove:function(){this.hide(),this._detachEvents(),this._detachSecondaryEvents(),this.picker.remove(),delete this.element.data().datepicker,this.isInput||delete this.element.data().date},_utc_to_local:function(e){return e&&new Date(e.getTime()+6e4*e.getTimezoneOffset())},_local_to_utc:function(e){return e&&new Date(e.getTime()-6e4*e.getTimezoneOffset())},_zero_time:function(e){return e&&new Date(e.getFullYear(),e.getMonth(),e.getDate())},_zero_utc_time:function(e){return e&&new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()))},getDates:function(){return e.map(this.dates,this._utc_to_local)},getUTCDates:function(){return e.map(this.dates,function(e){return new Date(e)})},getDate:function(){return this._utc_to_local(this.getUTCDate())},getUTCDate:function(){return new Date(this.dates.get(-1))},setDates:function(){var t=e.isArray(arguments[0])?arguments[0]:arguments;this.update.apply(this,t),this._trigger("changeDate"),this.setValue()},setUTCDates:function(){var t=e.isArray(arguments[0])?arguments[0]:arguments;this.update.apply(this,e.map(t,this._utc_to_local)),this._trigger("changeDate"),this.setValue()},setDate:r("setDates"),setUTCDate:r("setUTCDates"),setValue:function(){var e=this.getFormattedDate();this.isInput?this.element.val(e).change():this.component&&this.element.find("input").val(e).change()},getFormattedDate:function(n){n===t&&(n=this.o.format);var i=this.o.language;return e.map(this.dates,function(e){return m.formatDate(e,n,i)}).join(this.o.multidateSeparator)},setStartDate:function(e){this._process_options({startDate:e}),this.update(),this.updateNavArrows()},setEndDate:function(e){this._process_options({endDate:e}),this.update(),this.updateNavArrows()},setDaysOfWeekDisabled:function(e){this._process_options({daysOfWeekDisabled:e}),this.update(),this.updateNavArrows()},place:function(){if(!this.isInline){var t=this.picker.outerWidth(),n=this.picker.outerHeight(),i=10,r=s.width(),o=s.height(),a=s.scrollTop(),u=parseInt(this.element.parents().filter(function(){return"auto"!==e(this).css("z-index")}).first().css("z-index"))+10,l=this.component?this.component.parent().offset():this.element.offset(),c=this.component?this.component.outerHeight(!0):this.element.outerHeight(!1),d=this.component?this.component.outerWidth(!0):this.element.outerWidth(!1),f=l.left,p=l.top;this.picker.removeClass("datepicker-orient-top datepicker-orient-bottom datepicker-orient-right datepicker-orient-left"),"auto"!==this.o.orientation.x?(this.picker.addClass("datepicker-orient-"+this.o.orientation.x),"right"===this.o.orientation.x&&(f-=t-d)):(this.picker.addClass("datepicker-orient-left"),l.left<0?f-=l.left-i:l.left+t>r&&(f=r-t-i));var h,m,g=this.o.orientation.y;"auto"===g&&(h=-a+l.top-n,m=a+o-(l.top+c+n),g=Math.max(h,m)===m?"top":"bottom"),this.picker.addClass("datepicker-orient-"+g),"top"===g?p+=c:p-=n+parseInt(this.picker.css("padding-top")),this.picker.css({top:p,left:f,zIndex:u})}},_allow_update:!0,update:function(){if(this._allow_update){var t=this.dates.copy(),n=[],i=!1;arguments.length?(e.each(arguments,e.proxy(function(e,t){t instanceof Date&&(t=this._local_to_utc(t)),n.push(t)},this)),i=!0):(n=this.isInput?this.element.val():this.element.data("date")||this.element.find("input").val(),n=n&&this.o.multidate?n.split(this.o.multidateSeparator):[n],delete this.element.data().date),n=e.map(n,e.proxy(function(e){return m.parseDate(e,this.o.format,this.o.language)},this)),n=e.grep(n,e.proxy(function(e){return e<this.o.startDate||e>this.o.endDate||!e},this),!0),this.dates.replace(n),this.dates.length?this.viewDate=new Date(this.dates.get(-1)):this.viewDate<this.o.startDate?this.viewDate=new Date(this.o.startDate):this.viewDate>this.o.endDate&&(this.viewDate=new Date(this.o.endDate)),i?this.setValue():n.length&&String(t)!==String(this.dates)&&this._trigger("changeDate"),!this.dates.length&&t.length&&this._trigger("clearDate"),this.fill()}},fillDow:function(){var e=this.o.weekStart,t="<tr>";if(this.o.calendarWeeks){var n='<th class="cw">&nbsp;</th>';t+=n,this.picker.find(".datepicker-days thead tr:first-child").prepend(n)}for(;e<this.o.weekStart+7;)t+='<th class="dow">'+h[this.o.language].daysMin[e++%7]+"</th>";t+="</tr>",this.picker.find(".datepicker-days thead").append(t)},fillMonths:function(){for(var e="",t=0;12>t;)e+='<span class="month">'+h[this.o.language].monthsShort[t++]+"</span>";this.picker.find(".datepicker-months td").html(e)},setRange:function(t){t&&t.length?this.range=e.map(t,function(e){return e.valueOf()}):delete this.range,this.fill()},getClassNames:function(t){var n=[],i=this.viewDate.getUTCFullYear(),r=this.viewDate.getUTCMonth(),o=new Date;return t.getUTCFullYear()<i||t.getUTCFullYear()===i&&t.getUTCMonth()<r?n.push("old"):(t.getUTCFullYear()>i||t.getUTCFullYear()===i&&t.getUTCMonth()>r)&&n.push("new"),this.focusDate&&t.valueOf()===this.focusDate.valueOf()&&n.push("focused"),this.o.todayHighlight&&t.getUTCFullYear()===o.getFullYear()&&t.getUTCMonth()===o.getMonth()&&t.getUTCDate()===o.getDate()&&n.push("today"),-1!==this.dates.contains(t)&&n.push("active"),(t.valueOf()<this.o.startDate||t.valueOf()>this.o.endDate||-1!==e.inArray(t.getUTCDay(),this.o.daysOfWeekDisabled))&&n.push("disabled"),this.range&&(t>this.range[0]&&t<this.range[this.range.length-1]&&n.push("range"),-1!==e.inArray(t.valueOf(),this.range)&&n.push("selected")),n},fill:function(){var i,r=new Date(this.viewDate),o=r.getUTCFullYear(),a=r.getUTCMonth(),s=this.o.startDate!==-1/0?this.o.startDate.getUTCFullYear():-1/0,u=this.o.startDate!==-1/0?this.o.startDate.getUTCMonth():-1/0,l=1/0!==this.o.endDate?this.o.endDate.getUTCFullYear():1/0,c=1/0!==this.o.endDate?this.o.endDate.getUTCMonth():1/0,d=h[this.o.language].today||h.en.today||"",f=h[this.o.language].clear||h.en.clear||"";this.picker.find(".datepicker-days thead th.datepicker-switch").text(h[this.o.language].months[a]+" "+o),this.picker.find("tfoot th.today").text(d).toggle(this.o.todayBtn!==!1),this.picker.find("tfoot th.clear").text(f).toggle(this.o.clearBtn!==!1),this.updateNavArrows(),this.fillMonths();var p=n(o,a-1,28),g=m.getDaysInMonth(p.getUTCFullYear(),p.getUTCMonth());p.setUTCDate(g),p.setUTCDate(g-(p.getUTCDay()-this.o.weekStart+7)%7);var v=new Date(p);v.setUTCDate(v.getUTCDate()+42),v=v.valueOf();for(var y,b=[];p.valueOf()<v;){if(p.getUTCDay()===this.o.weekStart&&(b.push("<tr>"),this.o.calendarWeeks)){var _=new Date(+p+(this.o.weekStart-p.getUTCDay()-7)%7*864e5),w=new Date(Number(_)+(11-_.getUTCDay())%7*864e5),x=new Date(Number(x=n(w.getUTCFullYear(),0,1))+(11-x.getUTCDay())%7*864e5),k=(w-x)/864e5/7+1;b.push('<td class="cw">'+k+"</td>")}if(y=this.getClassNames(p),y.push("day"),this.o.beforeShowDay!==e.noop){var S=this.o.beforeShowDay(this._utc_to_local(p));S===t?S={}:"boolean"==typeof S?S={enabled:S}:"string"==typeof S&&(S={classes:S}),S.enabled===!1&&y.push("disabled"),S.classes&&(y=y.concat(S.classes.split(/\s+/))),S.tooltip&&(i=S.tooltip)}y=e.unique(y),b.push('<td class="'+y.join(" ")+'"'+(i?' title="'+i+'"':"")+">"+p.getUTCDate()+"</td>"),p.getUTCDay()===this.o.weekEnd&&b.push("</tr>"),p.setUTCDate(p.getUTCDate()+1)}this.picker.find(".datepicker-days tbody").empty().append(b.join(""));var C=this.picker.find(".datepicker-months").find("th:eq(1)").text(o).end().find("span").removeClass("active");e.each(this.dates,function(e,t){t.getUTCFullYear()===o&&C.eq(t.getUTCMonth()).addClass("active")}),(s>o||o>l)&&C.addClass("disabled"),o===s&&C.slice(0,u).addClass("disabled"),o===l&&C.slice(c+1).addClass("disabled"),b="",o=10*parseInt(o/10,10);var T=this.picker.find(".datepicker-years").find("th:eq(1)").text(o+"-"+(o+9)).end().find("td");o-=1;for(var E,D=e.map(this.dates,function(e){return e.getUTCFullYear()}),F=-1;11>F;F++)E=["year"],-1===F?E.push("old"):10===F&&E.push("new"),-1!==e.inArray(o,D)&&E.push("active"),(s>o||o>l)&&E.push("disabled"),b+='<span class="'+E.join(" ")+'">'+o+"</span>",o+=1;T.html(b)},updateNavArrows:function(){if(this._allow_update){var e=new Date(this.viewDate),t=e.getUTCFullYear(),n=e.getUTCMonth();switch(this.viewMode){case 0:this.picker.find(".prev").css(this.o.startDate!==-1/0&&t<=this.o.startDate.getUTCFullYear()&&n<=this.o.startDate.getUTCMonth()?{visibility:"hidden"}:{visibility:"visible"}),this.picker.find(".next").css(1/0!==this.o.endDate&&t>=this.o.endDate.getUTCFullYear()&&n>=this.o.endDate.getUTCMonth()?{visibility:"hidden"}:{visibility:"visible"});break;case 1:case 2:this.picker.find(".prev").css(this.o.startDate!==-1/0&&t<=this.o.startDate.getUTCFullYear()?{visibility:"hidden"}:{visibility:"visible"}),this.picker.find(".next").css(1/0!==this.o.endDate&&t>=this.o.endDate.getUTCFullYear()?{visibility:"hidden"}:{visibility:"visible"})}}},click:function(t){t.preventDefault();var i,r,o,a=e(t.target).closest("span, td, th");if(1===a.length)switch(a[0].nodeName.toLowerCase()){case"th":switch(a[0].className){case"datepicker-switch":this.showMode(1);break;case"prev":case"next":var s=m.modes[this.viewMode].navStep*("prev"===a[0].className?-1:1);switch(this.viewMode){case 0:this.viewDate=this.moveMonth(this.viewDate,s),this._trigger("changeMonth",this.viewDate);break;case 1:case 2:this.viewDate=this.moveYear(this.viewDate,s),1===this.viewMode&&this._trigger("changeYear",this.viewDate)}this.fill();break;case"today":var u=new Date;u=n(u.getFullYear(),u.getMonth(),u.getDate(),0,0,0),this.showMode(-2);var l="linked"===this.o.todayBtn?null:"view";this._setDate(u,l);break;case"clear":var c;this.isInput?c=this.element:this.component&&(c=this.element.find("input")),c&&c.val("").change(),this.update(),this._trigger("changeDate"),this.o.autoclose&&this.hide()}break;case"span":a.is(".disabled")||(this.viewDate.setUTCDate(1),a.is(".month")?(o=1,r=a.parent().find("span").index(a),i=this.viewDate.getUTCFullYear(),this.viewDate.setUTCMonth(r),this._trigger("changeMonth",this.viewDate),1===this.o.minViewMode&&this._setDate(n(i,r,o))):(o=1,r=0,i=parseInt(a.text(),10)||0,this.viewDate.setUTCFullYear(i),this._trigger("changeYear",this.viewDate),2===this.o.minViewMode&&this._setDate(n(i,r,o))),this.showMode(-1),this.fill());break;case"td":a.is(".day")&&!a.is(".disabled")&&(o=parseInt(a.text(),10)||1,i=this.viewDate.getUTCFullYear(),r=this.viewDate.getUTCMonth(),a.is(".old")?0===r?(r=11,i-=1):r-=1:a.is(".new")&&(11===r?(r=0,i+=1):r+=1),this._setDate(n(i,r,o)))}this.picker.is(":visible")&&this._focused_from&&e(this._focused_from).focus(),delete this._focused_from},_toggle_multidate:function(e){var t=this.dates.contains(e);if(e?-1!==t?this.dates.remove(t):this.dates.push(e):this.dates.clear(),"number"==typeof this.o.multidate)for(;this.dates.length>this.o.multidate;)this.dates.remove(0)},_setDate:function(e,t){t&&"date"!==t||this._toggle_multidate(e&&new Date(e)),t&&"view"!==t||(this.viewDate=e&&new Date(e)),this.fill(),this.setValue(),this._trigger("changeDate");var n;this.isInput?n=this.element:this.component&&(n=this.element.find("input")),n&&n.change(),!this.o.autoclose||t&&"date"!==t||this.hide()},moveMonth:function(e,n){if(!e)return t;if(!n)return e;var i,r,o=new Date(e.valueOf()),a=o.getUTCDate(),s=o.getUTCMonth(),u=Math.abs(n);if(n=n>0?1:-1,1===u)r=-1===n?function(){return o.getUTCMonth()===s}:function(){return o.getUTCMonth()!==i},i=s+n,o.setUTCMonth(i),(0>i||i>11)&&(i=(i+12)%12);else{for(var l=0;u>l;l++)o=this.moveMonth(o,n);i=o.getUTCMonth(),o.setUTCDate(a),r=function(){return i!==o.getUTCMonth()}}for(;r();)o.setUTCDate(--a),o.setUTCMonth(i);return o},moveYear:function(e,t){return this.moveMonth(e,12*t)},dateWithinRange:function(e){return e>=this.o.startDate&&e<=this.o.endDate},keydown:function(e){if(this.picker.is(":not(:visible)"))return void(27===e.keyCode&&this.show());var t,n,r,o=!1,a=this.focusDate||this.viewDate;switch(e.keyCode){case 27:this.focusDate?(this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.fill()):this.hide(),e.preventDefault();break;case 37:case 39:if(!this.o.keyboardNavigation)break;t=37===e.keyCode?-1:1,e.ctrlKey?(n=this.moveYear(this.dates.get(-1)||i(),t),r=this.moveYear(a,t),this._trigger("changeYear",this.viewDate)):e.shiftKey?(n=this.moveMonth(this.dates.get(-1)||i(),t),r=this.moveMonth(a,t),this._trigger("changeMonth",this.viewDate)):(n=new Date(this.dates.get(-1)||i()),n.setUTCDate(n.getUTCDate()+t),r=new Date(a),r.setUTCDate(a.getUTCDate()+t)),this.dateWithinRange(n)&&(this.focusDate=this.viewDate=r,this.setValue(),this.fill(),e.preventDefault());break;case 38:case 40:if(!this.o.keyboardNavigation)break;t=38===e.keyCode?-1:1,e.ctrlKey?(n=this.moveYear(this.dates.get(-1)||i(),t),r=this.moveYear(a,t),this._trigger("changeYear",this.viewDate)):e.shiftKey?(n=this.moveMonth(this.dates.get(-1)||i(),t),r=this.moveMonth(a,t),this._trigger("changeMonth",this.viewDate)):(n=new Date(this.dates.get(-1)||i()),n.setUTCDate(n.getUTCDate()+7*t),r=new Date(a),r.setUTCDate(a.getUTCDate()+7*t)),this.dateWithinRange(n)&&(this.focusDate=this.viewDate=r,this.setValue(),this.fill(),e.preventDefault());break;case 32:break;case 13:a=this.focusDate||this.dates.get(-1)||this.viewDate,this._toggle_multidate(a),o=!0,this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.setValue(),this.fill(),this.picker.is(":visible")&&(e.preventDefault(),this.o.autoclose&&this.hide());break;case 9:this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.fill(),this.hide()}if(o){this._trigger(this.dates.length?"changeDate":"clearDate");var s;this.isInput?s=this.element:this.component&&(s=this.element.find("input")),s&&s.change()}},showMode:function(e){e&&(this.viewMode=Math.max(this.o.minViewMode,Math.min(2,this.viewMode+e))),this.picker.find(">div").hide().filter(".datepicker-"+m.modes[this.viewMode].clsName).css("display","block"),this.updateNavArrows()}};var c=function(t,n){this.element=e(t),this.inputs=e.map(n.inputs,function(e){return e.jquery?e[0]:e}),delete n.inputs,e(this.inputs).datepicker(n).bind("changeDate",e.proxy(this.dateUpdated,this)),this.pickers=e.map(this.inputs,function(t){return e(t).data("datepicker")}),this.updateDates()};c.prototype={updateDates:function(){this.dates=e.map(this.pickers,function(e){return e.getUTCDate()}),this.updateRanges()},updateRanges:function(){var t=e.map(this.dates,function(e){return e.valueOf()});e.each(this.pickers,function(e,n){n.setRange(t)})},dateUpdated:function(t){if(!this.updating){this.updating=!0;var n=e(t.target).data("datepicker"),i=n.getUTCDate(),r=e.inArray(t.target,this.inputs),o=r-1,a=r+1,s=this.inputs.length;if(-1!==r){if(e.each(this.pickers,function(e,t){t.getUTCDate()||t.setUTCDate(i)}),i<this.dates[o])for(;o>=0&&i<this.dates[o];)this.pickers[o--].setUTCDate(i);else if(i>this.dates[a])for(;s>a&&i>this.dates[a];)this.pickers[a++].setUTCDate(i);this.updateDates(),delete this.updating}}},remove:function(){e.map(this.pickers,function(e){e.remove()}),delete this.element.data().datepicker}};var d=e.fn.datepicker;e.fn.datepicker=function(n){var i=Array.apply(null,arguments);i.shift();var r;return this.each(function(){var s=e(this),u=s.data("datepicker"),d="object"==typeof n&&n;if(!u){var p=o(this,"date"),h=e.extend({},f,p,d),m=a(h.language),g=e.extend({},f,m,p,d);if(s.is(".input-daterange")||g.inputs){var v={inputs:g.inputs||s.find("input").toArray()};s.data("datepicker",u=new c(this,e.extend(g,v)))}else s.data("datepicker",u=new l(this,g))}return"string"==typeof n&&"function"==typeof u[n]&&(r=u[n].apply(u,i),r!==t)?!1:void 0}),r!==t?r:this};var f=e.fn.datepicker.defaults={autoclose:!1,beforeShowDay:e.noop,calendarWeeks:!1,clearBtn:!1,daysOfWeekDisabled:[],endDate:1/0,forceParse:!0,format:"mm/dd/yyyy",keyboardNavigation:!0,language:"en",minViewMode:0,multidate:!1,multidateSeparator:",",orientation:"auto",rtl:!1,startDate:-1/0,startView:0,todayBtn:!1,todayHighlight:!1,weekStart:0},p=e.fn.datepicker.locale_opts=["format","rtl","weekStart"];e.fn.datepicker.Constructor=l;var h=e.fn.datepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear"}},m={modes:[{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],isLeapYear:function(e){return e%4===0&&e%100!==0||e%400===0},getDaysInMonth:function(e,t){return[31,m.isLeapYear(e)?29:28,31,30,31,30,31,31,30,31,30,31][t]},validParts:/dd?|DD?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\/:-@\[\u3400-\u9fff-`{-~\t\n\r]+/g,parseFormat:function(e){var t=e.replace(this.validParts,"\x00").split("\x00"),n=e.match(this.validParts);if(!t||!t.length||!n||0===n.length)throw new Error("Invalid date format.");return{separators:t,parts:n}},parseDate:function(i,r,o){function a(){var e=this.slice(0,f[c].length),t=f[c].slice(0,e.length);return e===t}if(!i)return t;if(i instanceof Date)return i;"string"==typeof r&&(r=m.parseFormat(r));var s,u,c,d=/([\-+]\d+)([dmwy])/,f=i.match(/([\-+]\d+)([dmwy])/g);if(/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/.test(i)){for(i=new Date,c=0;c<f.length;c++)switch(s=d.exec(f[c]),u=parseInt(s[1]),s[2]){case"d":i.setUTCDate(i.getUTCDate()+u);break;case"m":i=l.prototype.moveMonth.call(l.prototype,i,u);break;case"w":i.setUTCDate(i.getUTCDate()+7*u);break;case"y":i=l.prototype.moveYear.call(l.prototype,i,u)}return n(i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate(),0,0,0)}f=i&&i.match(this.nonpunctuation)||[],i=new Date;var p,g,v={},y=["yyyy","yy","M","MM","m","mm","d","dd"],b={yyyy:function(e,t){return e.setUTCFullYear(t)},yy:function(e,t){return e.setUTCFullYear(2e3+t)},m:function(e,t){if(isNaN(e))return e;for(t-=1;0>t;)t+=12;for(t%=12,e.setUTCMonth(t);e.getUTCMonth()!==t;)e.setUTCDate(e.getUTCDate()-1);return e},d:function(e,t){return e.setUTCDate(t)}};b.M=b.MM=b.mm=b.m,b.dd=b.d,i=n(i.getFullYear(),i.getMonth(),i.getDate(),0,0,0);var _=r.parts.slice();if(f.length!==_.length&&(_=e(_).filter(function(t,n){return-1!==e.inArray(n,y)}).toArray()),f.length===_.length){var w;for(c=0,w=_.length;w>c;c++){if(p=parseInt(f[c],10),s=_[c],isNaN(p))switch(s){case"MM":g=e(h[o].months).filter(a),p=e.inArray(g[0],h[o].months)+1;break;case"M":g=e(h[o].monthsShort).filter(a),p=e.inArray(g[0],h[o].monthsShort)+1}v[s]=p}var x,k;for(c=0;c<y.length;c++)k=y[c],k in v&&!isNaN(v[k])&&(x=new Date(i),b[k](x,v[k]),isNaN(x)||(i=x))}return i},formatDate:function(t,n,i){if(!t)return"";"string"==typeof n&&(n=m.parseFormat(n));var r={d:t.getUTCDate(),D:h[i].daysShort[t.getUTCDay()],DD:h[i].days[t.getUTCDay()],m:t.getUTCMonth()+1,M:h[i].monthsShort[t.getUTCMonth()],MM:h[i].months[t.getUTCMonth()],yy:t.getUTCFullYear().toString().substring(2),yyyy:t.getUTCFullYear()};r.dd=(r.d<10?"0":"")+r.d,r.mm=(r.m<10?"0":"")+r.m,t=[];for(var o=e.extend([],n.separators),a=0,s=n.parts.length;s>=a;a++)o.length&&t.push(o.shift()),t.push(r[n.parts[a]]);return t.join("")},headTemplate:'<thead><tr><th class="prev">&laquo;</th><th colspan="5" class="datepicker-switch"></th><th class="next">&raquo;</th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr><tr><th colspan="7" class="clear"></th></tr></tfoot>'};m.template='<div class="datepicker"><div class="datepicker-days"><table class=" table-condensed">'+m.headTemplate+"<tbody></tbody>"+m.footTemplate+'</table></div><div class="datepicker-months"><table class="table-condensed">'+m.headTemplate+m.contTemplate+m.footTemplate+'</table></div><div class="datepicker-years"><table class="table-condensed">'+m.headTemplate+m.contTemplate+m.footTemplate+"</table></div></div>",e.fn.datepicker.DPGlobal=m,e.fn.datepicker.noConflict=function(){return e.fn.datepicker=d,this},e(document).on("focus.datepicker.data-api click.datepicker.data-api",'[data-provide="datepicker"]',function(t){var n=e(this);n.data("datepicker")||(t.preventDefault(),n.datepicker("show"))}),e(function(){e('[data-provide="datepicker-inline"]').datepicker()})}(window.jQuery),/*
 * jQuery Iframe Transport Plugin 1.8.2
 * https://github.com/blueimp/jQuery-File-Upload
 *
 * Copyright 2011, Sebastian Tschan
 * https://blueimp.net
 *
 * Licensed under the MIT license:
 * http://www.opensource.org/licenses/MIT
 */
function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):e(window.jQuery)}(function(e){"use strict";var t=0;e.ajaxTransport("iframe",function(n){if(n.async){var i,r,o,a=n.initialIframeSrc||"javascript:false;";return{send:function(s,u){i=e('<form style="display:none;"></form>'),i.attr("accept-charset",n.formAcceptCharset),o=/\?/.test(n.url)?"&":"?","DELETE"===n.type?(n.url=n.url+o+"_method=DELETE",n.type="POST"):"PUT"===n.type?(n.url=n.url+o+"_method=PUT",n.type="POST"):"PATCH"===n.type&&(n.url=n.url+o+"_method=PATCH",n.type="POST"),t+=1,r=e('<iframe src="'+a+'" name="iframe-transport-'+t+'"></iframe>').bind("load",function(){var t,o=e.isArray(n.paramName)?n.paramName:[n.paramName];r.unbind("load").bind("load",function(){var t;try{if(t=r.contents(),!t.length||!t[0].firstChild)throw new Error}catch(n){t=void 0}u(200,"success",{iframe:t}),e('<iframe src="'+a+'"></iframe>').appendTo(i),window.setTimeout(function(){i.remove()},0)}),i.prop("target",r.prop("name")).prop("action",n.url).prop("method",n.type),n.formData&&e.each(n.formData,function(t,n){e('<input type="hidden"/>').prop("name",n.name).val(n.value).appendTo(i)}),n.fileInput&&n.fileInput.length&&"POST"===n.type&&(t=n.fileInput.clone(),n.fileInput.after(function(e){return t[e]}),n.paramName&&n.fileInput.each(function(t){e(this).prop("name",o[t]||n.paramName)}),i.append(n.fileInput).prop("enctype","multipart/form-data").prop("encoding","multipart/form-data"),n.fileInput.removeAttr("form")),i.submit(),t&&t.length&&n.fileInput.each(function(n,i){var r=e(t[n]);e(i).prop("name",r.prop("name")).attr("form",r.attr("form")),r.replaceWith(i)})}),i.append(r).appendTo(document.body)},abort:function(){r&&r.unbind("load").prop("src",a),i&&i.remove()}}}}),e.ajaxSetup({converters:{"iframe text":function(t){return t&&e(t[0].body).text()},"iframe json":function(t){return t&&e.parseJSON(e(t[0].body).text())},"iframe html":function(t){return t&&e(t[0].body).html()},"iframe xml":function(t){var n=t&&t[0];return n&&e.isXMLDoc(n)?n:e.parseXML(n.XMLDocument&&n.XMLDocument.xml||e(n.body).html())},"iframe script":function(t){return t&&e.globalEval(e(t[0].body).text())}}})}),FastClick.prototype.deviceIsAndroid=0<navigator.userAgent.indexOf("Android"),FastClick.prototype.deviceIsIOS=/iP(ad|hone|od)/.test(navigator.userAgent),FastClick.prototype.deviceIsIOS4=FastClick.prototype.deviceIsIOS&&/OS 4_\d(_\d)?/.test(navigator.userAgent),FastClick.prototype.deviceIsIOSWithBadTarget=FastClick.prototype.deviceIsIOS&&/OS ([6-9]|\d{2})_\d/.test(navigator.userAgent),FastClick.prototype.needsClick=function(e){switch(e.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(e.disabled)return!0;break;case"input":if(this.deviceIsIOS&&"file"===e.type||e.disabled)return!0;break;case"label":case"video":return!0}return/\bneedsclick\b/.test(e.className)},FastClick.prototype.needsFocus=function(e){switch(e.nodeName.toLowerCase()){case"textarea":case"select":return!0;case"input":switch(e.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!e.disabled&&!e.readOnly;default:return/\bneedsfocus\b/.test(e.className)}},FastClick.prototype.sendClick=function(e,t){var n,i;document.activeElement&&document.activeElement!==e&&document.activeElement.blur(),i=t.changedTouches[0],n=document.createEvent("MouseEvents"),n.initMouseEvent("click",!0,!0,window,1,i.screenX,i.screenY,i.clientX,i.clientY,!1,!1,!1,!1,0,null),n.forwardedTouchEvent=!0,e.dispatchEvent(n)},FastClick.prototype.focus=function(e){var t;this.deviceIsIOS&&e.setSelectionRange?(t=e.value.length,e.setSelectionRange(t,t)):e.focus()},FastClick.prototype.updateScrollParent=function(e){var t,n;if(t=e.fastClickScrollParent,!t||!t.contains(e)){n=e;do{if(n.scrollHeight>n.offsetHeight){t=n,e.fastClickScrollParent=n;break}n=n.parentElement}while(n)}t&&(t.fastClickLastScrollTop=t.scrollTop)},FastClick.prototype.getTargetElementFromEventTarget=function(e){return e.nodeType===Node.TEXT_NODE?e.parentNode:e},FastClick.prototype.onTouchStart=function(e){var t,n,i;if(1<e.targetTouches.length)return!0;if(t=this.getTargetElementFromEventTarget(e.target),n=e.targetTouches[0],this.deviceIsIOS){if(i=window.getSelection(),i.rangeCount&&!i.isCollapsed)return!0;if(!this.deviceIsIOS4){if(n.identifier===this.lastTouchIdentifier)return e.preventDefault(),!1;this.lastTouchIdentifier=n.identifier,this.updateScrollParent(t)}}return this.trackingClick=!0,this.trackingClickStart=e.timeStamp,this.targetElement=t,this.touchStartX=n.pageX,this.touchStartY=n.pageY,200>e.timeStamp-this.lastClickTime&&e.preventDefault(),!0},FastClick.prototype.touchHasMoved=function(e){e=e.changedTouches[0];var t=this.touchBoundary;return Math.abs(e.pageX-this.touchStartX)>t||Math.abs(e.pageY-this.touchStartY)>t?!0:!1},FastClick.prototype.onTouchMove=function(e){return this.trackingClick?((this.targetElement!==this.getTargetElementFromEventTarget(e.target)||this.touchHasMoved(e))&&(this.trackingClick=!1,this.targetElement=null),!0):!0},FastClick.prototype.findControl=function(e){return void 0!==e.control?e.control:e.htmlFor?document.getElementById(e.htmlFor):e.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},FastClick.prototype.onTouchEnd=function(e){var t,n,i=this.targetElement;if(!this.trackingClick)return!0;if(200>e.timeStamp-this.lastClickTime)return this.cancelNextClick=!0;if(this.lastClickTime=e.timeStamp,t=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,this.deviceIsIOSWithBadTarget&&(n=e.changedTouches[0],i=document.elementFromPoint(n.pageX-window.pageXOffset,n.pageY-window.pageYOffset)||i,i.fastClickScrollParent=this.targetElement.fastClickScrollParent),n=i.tagName.toLowerCase(),"label"===n){if(t=this.findControl(i)){if(this.focus(i),this.deviceIsAndroid)return!1;i=t}}else if(this.needsFocus(i))return 100<e.timeStamp-t||this.deviceIsIOS&&window.top!==window&&"input"===n?(this.targetElement=null,!1):(this.focus(i),this.deviceIsIOS4&&"select"===n||(this.targetElement=null,e.preventDefault()),!1);return this.deviceIsIOS&&!this.deviceIsIOS4&&(t=i.fastClickScrollParent)&&t.fastClickLastScrollTop!==t.scrollTop?!0:(this.needsClick(i)||(e.preventDefault(),this.sendClick(i,e)),!1)},FastClick.prototype.onTouchCancel=function(){this.trackingClick=!1,this.targetElement=null},FastClick.prototype.onMouse=function(e){return this.targetElement&&!e.forwardedTouchEvent&&e.cancelable&&(!this.needsClick(this.targetElement)||this.cancelNextClick)?(e.stopImmediatePropagation?e.stopImmediatePropagation():e.propagationStopped=!0,e.stopPropagation(),e.preventDefault(),!1):!0},FastClick.prototype.onClick=function(e){return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):"submit"===e.target.type&&0===e.detail?!0:(e=this.onMouse(e),e||(this.targetElement=null),e)},FastClick.prototype.destroy=function(){var e=this.layer;this.deviceIsAndroid&&(e.removeEventListener("mouseover",this.onMouse,!0),e.removeEventListener("mousedown",this.onMouse,!0),e.removeEventListener("mouseup",this.onMouse,!0)),e.removeEventListener("click",this.onClick,!0),e.removeEventListener("touchstart",this.onTouchStart,!1),e.removeEventListener("touchmove",this.onTouchMove,!1),e.removeEventListener("touchend",this.onTouchEnd,!1),e.removeEventListener("touchcancel",this.onTouchCancel,!1)},FastClick.notNeeded=function(e){var t;if("undefined"==typeof window.ontouchstart)return!0;if(/Chrome\/[0-9]+/.test(navigator.userAgent)){if(!FastClick.prototype.deviceIsAndroid)return!0;if((t=document.querySelector("meta[name=viewport]"))&&-1!==t.content.indexOf("user-scalable=no"))return!0}return"none"===e.style.msTouchAction?!0:!1},FastClick.attach=function(e){return new FastClick(e)},"undefined"!=typeof define&&define.amd?define(function(){return FastClick}):"undefined"!=typeof module&&module.exports?(module.exports=FastClick.attach,module.exports.FastClick=FastClick):window.FastClick=FastClick,/**
 * Use relocat() to move HTML elements in the DOM
 * above a certain window width.
 *
 * Copyright by Eike Send, Edenspiekermann AG
 *
 * Licensed under the GPLv2 and the MIT license
 *
 */
relocate=function(e,t,n,i){t.nodeName&&(t=[t]);var r,o,a,s=[],u=[],l=t.length;for(a=l-1;a>=0;a--)u.push(t[a]);var c=function(){for(a=0;l>a;a++)r=u[a].parentNode,void 0===s[a]&&(s[a]=document.createElement("span"),r.insertBefore(s[a],u[a])),o=r.removeChild(u[a]),n.insertBefore(o,n.firstChild)},d=function(){for(a=0;l>a;a++)r=u[a].parentNode,o=r.removeChild(u[a]),s[a].parentNode.insertBefore(o,s[a])};i?minwidth(e,d,c,i):minwidth(e,c,d)},/**
 * Use minwidth() to bind callbacks to changes of
 * the window width or a minimum width at page load.
 *
 * Copyright by Eike Send, Edenspiekermann AG
 *
 * Licensed under the GPLv2 and the MIT license
 *
 */
function(e){var t=function(){if("innerWidth"in e)return e.innerWidth;var t=n.documentElement.clientWidth;return"CSS1Compat"===n.compatMode&&t||n.body&&n.body.clientWidth||t},n=e.document,i=[],r=t(),o=function(){r=t();var e,n;for(e=0;e<i.length;e++)n=i[e],n.old<n.wdt&&r>=n.wdt&&n.fwd&&n.fwd(),n.old>=n.wdt&&r<n.wdt&&n.bck&&n.bck(),n.old=r};e.addEventListener?e.addEventListener("resize",o,!1):e.attachEvent("onresize",o),e.minwidth=function(e,t,n,r){i.push({wdt:e,old:r?1e9:0,fwd:t,bck:n}),o()}}(this),window.InfoBubble=InfoBubble,InfoBubble.prototype.ARROW_SIZE_=15,InfoBubble.prototype.ARROW_STYLE_=0,InfoBubble.prototype.SHADOW_STYLE_=1,InfoBubble.prototype.MIN_WIDTH_=50,InfoBubble.prototype.ARROW_POSITION_=50,InfoBubble.prototype.PADDING_=10,InfoBubble.prototype.BORDER_WIDTH_=1,InfoBubble.prototype.BORDER_COLOR_="#ccc",InfoBubble.prototype.BORDER_RADIUS_=10,InfoBubble.prototype.BACKGROUND_COLOR_="#fff",InfoBubble.prototype.extend=function(e,t){return function(e){for(var t in e.prototype)this.prototype[t]=e.prototype[t];return this}.apply(e,[t])},InfoBubble.prototype.buildDom_=function(){var e=this.bubble_=document.createElement("DIV");e.style.position="absolute",e.style.zIndex=this.baseZIndex_;var t=this.tabsContainer_=document.createElement("DIV");t.style.position="relative";var n=this.close_=document.createElement("IMG");n.style.position="absolute",n.style.width=this.px(12),n.style.height=this.px(12),n.style.border=0,n.style.zIndex=this.baseZIndex_+1,n.style.cursor="pointer",n.src="https://maps.gstatic.com/intl/en_us/mapfiles/iw_close.gif";var i=this;google.maps.event.addDomListener(n,"click",function(){i.close(),google.maps.event.trigger(i,"closeclick")});var r=this.contentContainer_=document.createElement("DIV");r.style.overflowX="auto",r.style.overflowY="auto",r.style.cursor="default",r.style.clear="both",r.style.position="relative";var o=this.content_=document.createElement("DIV");r.appendChild(o);var a=this.arrow_=document.createElement("DIV");a.style.position="relative";var s=this.arrowOuter_=document.createElement("DIV"),u=this.arrowInner_=document.createElement("DIV"),l=this.getArrowSize_();s.style.position=u.style.position="absolute",s.style.left=u.style.left="50%",s.style.height=u.style.height="0",s.style.width=u.style.width="0",s.style.marginLeft=this.px(-l),s.style.borderWidth=this.px(l),s.style.borderBottomWidth=0;var c=this.bubbleShadow_=document.createElement("DIV");c.style.position="absolute",e.style.display=c.style.display="none",e.appendChild(this.tabsContainer_),e.appendChild(n),e.appendChild(r),a.appendChild(s),a.appendChild(u),e.appendChild(a);var d=document.createElement("style");d.setAttribute("type","text/css"),this.animationName_="_ibani_"+Math.round(1e4*Math.random());var f="."+this.animationName_+"{-webkit-animation-name:"+this.animationName_+";-webkit-animation-duration:0.5s;-webkit-animation-iteration-count:1;}@-webkit-keyframes "+this.animationName_+" {from {-webkit-transform: scale(0)}50% {-webkit-transform: scale(1.2)}90% {-webkit-transform: scale(0.95)}to {-webkit-transform: scale(1)}}";d.textContent=f,document.getElementsByTagName("head")[0].appendChild(d)},InfoBubble.prototype.setBackgroundClassName=function(e){this.set("backgroundClassName",e)},InfoBubble.prototype.setBackgroundClassName=InfoBubble.prototype.setBackgroundClassName,InfoBubble.prototype.backgroundClassName_changed=function(){this.content_.className=this.get("backgroundClassName")},InfoBubble.prototype.backgroundClassName_changed=InfoBubble.prototype.backgroundClassName_changed,InfoBubble.prototype.setTabClassName=function(e){this.set("tabClassName",e)},InfoBubble.prototype.setTabClassName=InfoBubble.prototype.setTabClassName,InfoBubble.prototype.tabClassName_changed=function(){this.updateTabStyles_()},InfoBubble.prototype.tabClassName_changed=InfoBubble.prototype.tabClassName_changed,InfoBubble.prototype.getArrowStyle_=function(){return parseInt(this.get("arrowStyle"),10)||0},InfoBubble.prototype.setArrowStyle=function(e){this.set("arrowStyle",e)},InfoBubble.prototype.setArrowStyle=InfoBubble.prototype.setArrowStyle,InfoBubble.prototype.arrowStyle_changed=function(){this.arrowSize_changed()},InfoBubble.prototype.arrowStyle_changed=InfoBubble.prototype.arrowStyle_changed,InfoBubble.prototype.getArrowSize_=function(){return parseInt(this.get("arrowSize"),10)||0},InfoBubble.prototype.setArrowSize=function(e){this.set("arrowSize",e)},InfoBubble.prototype.setArrowSize=InfoBubble.prototype.setArrowSize,InfoBubble.prototype.arrowSize_changed=function(){this.borderWidth_changed()},InfoBubble.prototype.arrowSize_changed=InfoBubble.prototype.arrowSize_changed,InfoBubble.prototype.setArrowPosition=function(e){this.set("arrowPosition",e)},InfoBubble.prototype.setArrowPosition=InfoBubble.prototype.setArrowPosition,InfoBubble.prototype.getArrowPosition_=function(){return parseInt(this.get("arrowPosition"),10)||0},InfoBubble.prototype.arrowPosition_changed=function(){var e=this.getArrowPosition_();this.arrowOuter_.style.left=this.arrowInner_.style.left=e+"%",this.redraw_()},InfoBubble.prototype.arrowPosition_changed=InfoBubble.prototype.arrowPosition_changed,InfoBubble.prototype.setZIndex=function(e){this.set("zIndex",e)},InfoBubble.prototype.setZIndex=InfoBubble.prototype.setZIndex,InfoBubble.prototype.getZIndex=function(){return parseInt(this.get("zIndex"),10)||this.baseZIndex_},InfoBubble.prototype.zIndex_changed=function(){var e=this.getZIndex();this.bubble_.style.zIndex=this.baseZIndex_=e,this.close_.style.zIndex=e+1},InfoBubble.prototype.zIndex_changed=InfoBubble.prototype.zIndex_changed,InfoBubble.prototype.setShadowStyle=function(e){this.set("shadowStyle",e)},InfoBubble.prototype.setShadowStyle=InfoBubble.prototype.setShadowStyle,InfoBubble.prototype.getShadowStyle_=function(){return parseInt(this.get("shadowStyle"),10)||0},InfoBubble.prototype.shadowStyle_changed=function(){var e=this.getShadowStyle_(),t="",n="",i="";switch(e){case 0:t="none";break;case 1:n="40px 15px 10px rgba(33,33,33,0.3)",i="transparent";break;case 2:n="0 0 2px rgba(33,33,33,0.3)",i="rgba(33,33,33,0.35)"}this.bubbleShadow_.style.boxShadow=this.bubbleShadow_.style.webkitBoxShadow=this.bubbleShadow_.style.MozBoxShadow=n,this.bubbleShadow_.style.backgroundColor=i,this.isOpen_&&(this.bubbleShadow_.style.display=t,this.draw())},InfoBubble.prototype.shadowStyle_changed=InfoBubble.prototype.shadowStyle_changed,InfoBubble.prototype.showCloseButton=function(){this.set("hideCloseButton",!1)},InfoBubble.prototype.showCloseButton=InfoBubble.prototype.showCloseButton,InfoBubble.prototype.hideCloseButton=function(){this.set("hideCloseButton",!0)},InfoBubble.prototype.hideCloseButton=InfoBubble.prototype.hideCloseButton,InfoBubble.prototype.hideCloseButton_changed=function(){this.close_.style.display=this.get("hideCloseButton")?"none":""},InfoBubble.prototype.hideCloseButton_changed=InfoBubble.prototype.hideCloseButton_changed,InfoBubble.prototype.setBackgroundColor=function(e){e&&this.set("backgroundColor",e)},InfoBubble.prototype.setBackgroundColor=InfoBubble.prototype.setBackgroundColor,InfoBubble.prototype.backgroundColor_changed=function(){var e=this.get("backgroundColor");this.contentContainer_.style.backgroundColor=e,this.arrowInner_.style.borderColor=e+" transparent transparent",this.updateTabStyles_()},InfoBubble.prototype.backgroundColor_changed=InfoBubble.prototype.backgroundColor_changed,InfoBubble.prototype.setBorderColor=function(e){e&&this.set("borderColor",e)},InfoBubble.prototype.setBorderColor=InfoBubble.prototype.setBorderColor,InfoBubble.prototype.borderColor_changed=function(){var e=this.get("borderColor"),t=this.contentContainer_,n=this.arrowOuter_;t.style.borderColor=e,n.style.borderColor=e+" transparent transparent",t.style.borderStyle=n.style.borderStyle=this.arrowInner_.style.borderStyle="solid",this.updateTabStyles_()},InfoBubble.prototype.borderColor_changed=InfoBubble.prototype.borderColor_changed,InfoBubble.prototype.setBorderRadius=function(e){this.set("borderRadius",e)},InfoBubble.prototype.setBorderRadius=InfoBubble.prototype.setBorderRadius,InfoBubble.prototype.getBorderRadius_=function(){return parseInt(this.get("borderRadius"),10)||0},InfoBubble.prototype.borderRadius_changed=function(){var e=this.getBorderRadius_(),t=this.getBorderWidth_();this.contentContainer_.style.borderRadius=this.contentContainer_.style.MozBorderRadius=this.contentContainer_.style.webkitBorderRadius=this.bubbleShadow_.style.borderRadius=this.bubbleShadow_.style.MozBorderRadius=this.bubbleShadow_.style.webkitBorderRadius=this.px(e),this.tabsContainer_.style.paddingLeft=this.tabsContainer_.style.paddingRight=this.px(e+t),this.redraw_()},InfoBubble.prototype.borderRadius_changed=InfoBubble.prototype.borderRadius_changed,InfoBubble.prototype.getBorderWidth_=function(){return parseInt(this.get("borderWidth"),10)||0},InfoBubble.prototype.setBorderWidth=function(e){this.set("borderWidth",e)},InfoBubble.prototype.setBorderWidth=InfoBubble.prototype.setBorderWidth,InfoBubble.prototype.borderWidth_changed=function(){var e=this.getBorderWidth_();this.contentContainer_.style.borderWidth=this.px(e),this.tabsContainer_.style.top=this.px(e),this.updateArrowStyle_(),this.updateTabStyles_(),this.borderRadius_changed(),this.redraw_()},InfoBubble.prototype.borderWidth_changed=InfoBubble.prototype.borderWidth_changed,InfoBubble.prototype.updateArrowStyle_=function(){var e=this.getBorderWidth_(),t=this.getArrowSize_(),n=this.getArrowStyle_(),i=this.px(t),r=this.px(Math.max(0,t-e)),o=this.arrowOuter_,a=this.arrowInner_;this.arrow_.style.marginTop=this.px(-e),o.style.borderTopWidth=i,a.style.borderTopWidth=r,0==n||1==n?(o.style.borderLeftWidth=i,a.style.borderLeftWidth=r):o.style.borderLeftWidth=a.style.borderLeftWidth=0,0==n||2==n?(o.style.borderRightWidth=i,a.style.borderRightWidth=r):o.style.borderRightWidth=a.style.borderRightWidth=0,2>n?(o.style.marginLeft=this.px(-t),a.style.marginLeft=this.px(-(t-e))):o.style.marginLeft=a.style.marginLeft=0,o.style.display=0==e?"none":""},InfoBubble.prototype.setPadding=function(e){this.set("padding",e)},InfoBubble.prototype.setPadding=InfoBubble.prototype.setPadding,InfoBubble.prototype.getPadding_=function(){return parseInt(this.get("padding"),10)||0},InfoBubble.prototype.padding_changed=function(){var e=this.getPadding_();this.contentContainer_.style.padding=this.px(e),this.updateTabStyles_(),this.redraw_()},InfoBubble.prototype.padding_changed=InfoBubble.prototype.padding_changed,InfoBubble.prototype.px=function(e){return e?e+"px":e},InfoBubble.prototype.addEvents_=function(){var e=["mousedown","mousemove","mouseover","mouseout","mouseup","mousewheel","DOMMouseScroll","touchstart","touchend","touchmove","dblclick","contextmenu","click"],t=this.bubble_;this.listeners_=[];for(var n,i=0;n=e[i];i++)this.listeners_.push(google.maps.event.addDomListener(t,n,function(e){e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation()}))},InfoBubble.prototype.onAdd=function(){this.bubble_||this.buildDom_(),this.addEvents_();var e=this.getPanes();e&&(e.floatPane.appendChild(this.bubble_),e.floatShadow.appendChild(this.bubbleShadow_))},InfoBubble.prototype.onAdd=InfoBubble.prototype.onAdd,InfoBubble.prototype.draw=function(){var e=this.getProjection();if(e){var t=this.get("position");if(!t)return void this.close();var n=0;this.activeTab_&&(n=this.activeTab_.offsetHeight);var i=this.getAnchorHeight_(),r=this.getArrowSize_(),o=this.getArrowPosition_();o/=100;var a=e.fromLatLngToDivPixel(t),s=this.contentContainer_.offsetWidth,u=this.bubble_.offsetHeight;if(s){var l=a.y-(u+r);i&&(l-=i);var c=a.x-s*o;this.bubble_.style.top=this.px(l),this.bubble_.style.left=this.px(c);var d=parseInt(this.get("shadowStyle"),10);switch(d){case 1:this.bubbleShadow_.style.top=this.px(l+n-1),this.bubbleShadow_.style.left=this.px(c),this.bubbleShadow_.style.width=this.px(s),this.bubbleShadow_.style.height=this.px(this.contentContainer_.offsetHeight-r);break;case 2:s=.8*s,this.bubbleShadow_.style.top=this.px(i?a.y:a.y+r),this.bubbleShadow_.style.left=this.px(a.x-s*o),this.bubbleShadow_.style.width=this.px(s),this.bubbleShadow_.style.height=this.px(2)}}}},InfoBubble.prototype.draw=InfoBubble.prototype.draw,InfoBubble.prototype.onRemove=function(){this.bubble_&&this.bubble_.parentNode&&this.bubble_.parentNode.removeChild(this.bubble_),this.bubbleShadow_&&this.bubbleShadow_.parentNode&&this.bubbleShadow_.parentNode.removeChild(this.bubbleShadow_);for(var e,t=0;e=this.listeners_[t];t++)google.maps.event.removeListener(e)},InfoBubble.prototype.onRemove=InfoBubble.prototype.onRemove,InfoBubble.prototype.isOpen=function(){return this.isOpen_},InfoBubble.prototype.isOpen=InfoBubble.prototype.isOpen,InfoBubble.prototype.close=function(){this.bubble_&&(this.bubble_.style.display="none",this.bubble_.className=this.bubble_.className.replace(this.animationName_,"")),this.bubbleShadow_&&(this.bubbleShadow_.style.display="none",this.bubbleShadow_.className=this.bubbleShadow_.className.replace(this.animationName_,"")),this.isOpen_=!1},InfoBubble.prototype.close=InfoBubble.prototype.close,InfoBubble.prototype.open=function(e,t){var n=this;window.setTimeout(function(){n.open_(e,t)},0)},InfoBubble.prototype.open_=function(e,t){this.updateContent_(),e&&this.setMap(e),t&&(this.set("anchor",t),this.bindTo("anchorPoint",t),this.bindTo("position",t)),this.bubble_.style.display=this.bubbleShadow_.style.display="";var n=!this.get("disableAnimation");n&&(this.bubble_.className+=" "+this.animationName_,this.bubbleShadow_.className+=" "+this.animationName_),this.redraw_(),this.isOpen_=!0;var i=!this.get("disableAutoPan");if(i){var r=this;window.setTimeout(function(){r.panToView()},200)}},InfoBubble.prototype.open=InfoBubble.prototype.open,InfoBubble.prototype.setPosition=function(e){e&&this.set("position",e)},InfoBubble.prototype.setPosition=InfoBubble.prototype.setPosition,InfoBubble.prototype.getPosition=function(){return this.get("position")},InfoBubble.prototype.getPosition=InfoBubble.prototype.getPosition,InfoBubble.prototype.position_changed=function(){this.draw()},InfoBubble.prototype.position_changed=InfoBubble.prototype.position_changed,InfoBubble.prototype.panToView=function(){var e=this.getProjection();if(e&&this.bubble_){var t=this.getAnchorHeight_(),n=this.bubble_.offsetHeight+t,i=this.get("map"),r=i.getDiv(),o=r.offsetHeight,a=this.getPosition(),s=e.fromLatLngToContainerPixel(i.getCenter()),u=e.fromLatLngToContainerPixel(a),l=s.y-n,c=o-s.y,d=0>l,f=0;d&&(l*=-1,f=(l+c)/2),u.y-=f,a=e.fromContainerPixelToLatLng(u),i.getCenter()!=a&&i.panTo(a)}},InfoBubble.prototype.panToView=InfoBubble.prototype.panToView,InfoBubble.prototype.htmlToDocumentFragment_=function(e){e=e.replace(/^\s*([\S\s]*)\b\s*$/,"$1");var t=document.createElement("DIV");if(t.innerHTML=e,1==t.childNodes.length)return t.removeChild(t.firstChild);for(var n=document.createDocumentFragment();t.firstChild;)n.appendChild(t.firstChild);return n},InfoBubble.prototype.removeChildren_=function(e){if(e)for(var t;t=e.firstChild;)e.removeChild(t)},InfoBubble.prototype.setContent=function(e){this.set("content",e)},InfoBubble.prototype.setContent=InfoBubble.prototype.setContent,InfoBubble.prototype.getContent=function(){return this.get("content")},InfoBubble.prototype.getContent=InfoBubble.prototype.getContent,InfoBubble.prototype.updateContent_=function(){if(this.content_){this.removeChildren_(this.content_);var e=this.getContent();if(e){"string"==typeof e&&(e=this.htmlToDocumentFragment_(e)),this.content_.appendChild(e);for(var t,n=this,i=this.content_.getElementsByTagName("IMG"),r=0;t=i[r];r++)google.maps.event.addDomListener(t,"load",function(){n.imageLoaded_()});google.maps.event.trigger(this,"domready")}this.redraw_()}},InfoBubble.prototype.imageLoaded_=function(){var e=!this.get("disableAutoPan");this.redraw_(),!e||0!=this.tabs_.length&&0!=this.activeTab_.index||this.panToView()},InfoBubble.prototype.updateTabStyles_=function(){if(this.tabs_&&this.tabs_.length){for(var e,t=0;e=this.tabs_[t];t++)this.setTabStyle_(e.tab);this.activeTab_.style.zIndex=this.baseZIndex_;var n=this.getBorderWidth_(),i=this.getPadding_()/2;this.activeTab_.style.borderBottomWidth=0,this.activeTab_.style.paddingBottom=this.px(i+n)}},InfoBubble.prototype.setTabStyle_=function(e){var t=this.get("backgroundColor"),n=this.get("borderColor"),i=this.getBorderRadius_(),r=this.getBorderWidth_(),o=this.getPadding_(),a=this.px(-Math.max(o,i)),s=this.px(i),u=this.baseZIndex_;e.index&&(u-=e.index);var l={cssFloat:"left",position:"relative",cursor:"pointer",backgroundColor:t,border:this.px(r)+" solid "+n,padding:this.px(o/2)+" "+this.px(o),marginRight:a,whiteSpace:"nowrap",borderRadiusTopLeft:s,MozBorderRadiusTopleft:s,webkitBorderTopLeftRadius:s,borderRadiusTopRight:s,MozBorderRadiusTopright:s,webkitBorderTopRightRadius:s,zIndex:u,display:"inline"};for(var c in l)e.style[c]=l[c];var d=this.get("tabClassName");void 0!=d&&(e.className+=" "+d)},InfoBubble.prototype.addTabActions_=function(e){var t=this;e.listener_=google.maps.event.addDomListener(e,"click",function(){t.setTabActive_(this)})},InfoBubble.prototype.setTabActive=function(e){var t=this.tabs_[e-1];t&&this.setTabActive_(t.tab)},InfoBubble.prototype.setTabActive=InfoBubble.prototype.setTabActive,InfoBubble.prototype.setTabActive_=function(e){if(!e)return this.setContent(""),void this.updateContent_();var t=this.getPadding_()/2,n=this.getBorderWidth_();if(this.activeTab_){var i=this.activeTab_;i.style.zIndex=this.baseZIndex_-i.index,i.style.paddingBottom=this.px(t),i.style.borderBottomWidth=this.px(n)}e.style.zIndex=this.baseZIndex_,e.style.borderBottomWidth=0,e.style.marginBottomWidth="-10px",e.style.paddingBottom=this.px(t+n),this.setContent(this.tabs_[e.index].content),this.updateContent_(),this.activeTab_=e,this.redraw_()},InfoBubble.prototype.setMaxWidth=function(e){this.set("maxWidth",e)},InfoBubble.prototype.setMaxWidth=InfoBubble.prototype.setMaxWidth,InfoBubble.prototype.maxWidth_changed=function(){this.redraw_()},InfoBubble.prototype.maxWidth_changed=InfoBubble.prototype.maxWidth_changed,InfoBubble.prototype.setMaxHeight=function(e){this.set("maxHeight",e)},InfoBubble.prototype.setMaxHeight=InfoBubble.prototype.setMaxHeight,InfoBubble.prototype.maxHeight_changed=function(){this.redraw_()},InfoBubble.prototype.maxHeight_changed=InfoBubble.prototype.maxHeight_changed,InfoBubble.prototype.setMinWidth=function(e){this.set("minWidth",e)},InfoBubble.prototype.setMinWidth=InfoBubble.prototype.setMinWidth,InfoBubble.prototype.minWidth_changed=function(){this.redraw_()},InfoBubble.prototype.minWidth_changed=InfoBubble.prototype.minWidth_changed,InfoBubble.prototype.setMinHeight=function(e){this.set("minHeight",e)},InfoBubble.prototype.setMinHeight=InfoBubble.prototype.setMinHeight,InfoBubble.prototype.minHeight_changed=function(){this.redraw_()},InfoBubble.prototype.minHeight_changed=InfoBubble.prototype.minHeight_changed,InfoBubble.prototype.addTab=function(e,t){var n=document.createElement("DIV");n.innerHTML=e,this.setTabStyle_(n),this.addTabActions_(n),this.tabsContainer_.appendChild(n),this.tabs_.push({label:e,content:t,tab:n}),n.index=this.tabs_.length-1,n.style.zIndex=this.baseZIndex_-n.index,this.activeTab_||this.setTabActive_(n),n.className=n.className+" "+this.animationName_,this.redraw_()},InfoBubble.prototype.addTab=InfoBubble.prototype.addTab,InfoBubble.prototype.updateTab=function(e,t,n){if(!(!this.tabs_.length||0>e||e>=this.tabs_.length)){var i=this.tabs_[e];void 0!=t&&(i.tab.innerHTML=i.label=t),void 0!=n&&(i.content=n),this.activeTab_==i.tab&&(this.setContent(i.content),this.updateContent_()),this.redraw_()}},InfoBubble.prototype.updateTab=InfoBubble.prototype.updateTab,InfoBubble.prototype.removeTab=function(e){if(!(!this.tabs_.length||0>e||e>=this.tabs_.length)){var t=this.tabs_[e];t.tab.parentNode.removeChild(t.tab),google.maps.event.removeListener(t.tab.listener_),this.tabs_.splice(e,1),delete t;for(var n,i=0;n=this.tabs_[i];i++)n.tab.index=i;t.tab==this.activeTab_&&(this.activeTab_=this.tabs_[e]?this.tabs_[e].tab:this.tabs_[e-1]?this.tabs_[e-1].tab:void 0,this.setTabActive_(this.activeTab_)),this.redraw_()}},InfoBubble.prototype.removeTab=InfoBubble.prototype.removeTab,InfoBubble.prototype.getElementSize_=function(e,t,n){var i=document.createElement("DIV");i.style.display="inline",i.style.position="absolute",i.style.visibility="hidden","string"==typeof e?i.innerHTML=e:i.appendChild(e.cloneNode(!0)),document.body.appendChild(i);var r=new google.maps.Size(i.offsetWidth,i.offsetHeight);return t&&r.width>t&&(i.style.width=this.px(t),r=new google.maps.Size(i.offsetWidth,i.offsetHeight)),n&&r.height>n&&(i.style.height=this.px(n),r=new google.maps.Size(i.offsetWidth,i.offsetHeight)),document.body.removeChild(i),delete i,r},InfoBubble.prototype.redraw_=function(){this.figureOutSize_(),this.positionCloseButton_(),this.draw()},InfoBubble.prototype.figureOutSize_=function(){var e=this.get("map");if(e){var t=this.getPadding_(),n=(this.getBorderWidth_(),this.getBorderRadius_(),this.getArrowSize_()),i=e.getDiv(),r=2*n,o=i.offsetWidth-r,a=i.offsetHeight-r-this.getAnchorHeight_(),s=0,u=this.get("minWidth")||0,l=this.get("minHeight")||0,c=this.get("maxWidth")||0,d=this.get("maxHeight")||0;c=Math.min(o,c),d=Math.min(a,d);var f=0;if(this.tabs_.length)for(var p,h=0;p=this.tabs_[h];h++){var m=this.getElementSize_(p.tab,c,d),g=this.getElementSize_(p.content,c,d);u<m.width&&(u=m.width),f+=m.width,l<m.height&&(l=m.height),m.height>s&&(s=m.height),u<g.width&&(u=g.width),l<g.height&&(l=g.height)}else{var v=this.get("content");if("string"==typeof v&&(v=this.htmlToDocumentFragment_(v)),v){var g=this.getElementSize_(v,c,d);u<g.width&&(u=g.width),l<g.height&&(l=g.height)}}c&&(u=Math.min(u,c)),d&&(l=Math.min(l,d)),u=Math.max(u,f),u==f&&(u+=2*t),n=2*n,u=Math.max(u,n),u>o&&(u=o),l>a&&(l=a-s),this.tabsContainer_&&(this.tabHeight_=s,this.tabsContainer_.style.width=this.px(f)),this.contentContainer_.style.width=this.px(u),this.contentContainer_.style.height=this.px(l)}},InfoBubble.prototype.getAnchorHeight_=function(){var e=this.get("anchor");if(e){var t=this.get("anchorPoint");if(t)return-1*t.y}return 0},InfoBubble.prototype.anchorPoint_changed=function(){this.draw()},InfoBubble.prototype.anchorPoint_changed=InfoBubble.prototype.anchorPoint_changed,InfoBubble.prototype.positionCloseButton_=function(){var e=(this.getBorderRadius_(),this.getBorderWidth_()),t=2,n=2;this.tabs_.length&&this.tabHeight_&&(n+=this.tabHeight_),n+=e,t+=e;var i=this.contentContainer_;i&&i.clientHeight<i.scrollHeight&&(t+=15),this.close_.style.right=this.px(t),this.close_.style.top=this.px(n)},function(){var e,t,n,i,r,o,a,s,u,l,c,d,f,p,h,m,g,v,y,b,_,w,x,k,S,C,T,E,D,F,I,M,B,A,j,$,N,O,P,L,z,R,H,q,W,U,V,X,Y,Q,G,Z,K,J,et,tt,nt,it,rt,ot,at,st,ut,lt,ct,dt,ft,pt=[].slice,ht={}.hasOwnProperty,mt=function(e,t){function n(){this.constructor=e}for(var i in t)ht.call(t,i)&&(e[i]=t[i]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},gt=function(e,t){return function(){return e.apply(t,arguments)}};e={toString:function(){return"Bacon"}},e.version="0.7.35",d=("undefined"!=typeof global&&null!==global?global:this).Error,e.fromBinder=function(t,n){return null==n&&(n=dt.id),new c(B(e,"fromBinder",t,n),function(i){var r,o,a;return a=!1,r=function(){return"undefined"!=typeof o&&null!==o?(a||o(),a=!0):void 0},o=t(function(){var t,a,s,u,c,d;for(t=1<=arguments.length?pt.call(arguments,0):[],u=n.apply(this,t),z(u)&&dt.last(u)instanceof l||(u=[u]),s=e.more,c=0,d=u.length;d>c;c++)if(a=u[c],s=i(a=rt(a)),s===e.noMore||a.isEnd())return null!=o?r():e.scheduler.setTimeout(r,0),s;return s}),r})},e.$={},e.$.asEventStream=function(t,n,i){var r;return H(n)&&(r=[n,void 0],i=r[0],n=r[1]),lt(this.selector||this,"asEventStream",t,e.fromBinder(function(e){return function(i){return e.on(t,n,i),function(){return e.off(t,n,i)}}}(this),i))},null!=(ft="undefined"!=typeof jQuery&&null!==jQuery?jQuery:"undefined"!=typeof Zepto&&null!==Zepto?Zepto:void 0)&&(ft.fn.asEventStream=e.$.asEventStream),e.fromEventTarget=function(t,n,i){var r,o,a,s,u,l,c,d;return r=null!=(a=null!=(s=null!=(u=t.addEventListener)?u:t.addListener)?s:t.bind)?a:t.on,o=null!=(l=null!=(c=null!=(d=t.removeEventListener)?d:t.removeListener)?c:t.unbind)?l:t.off,lt(e,"fromEventTarget",t,n,e.fromBinder(function(e){return r.call(t,n,e),function(){return o.call(t,n,e)}},i))},e.fromPromise=function(t,n){return lt(e,"fromPromise",t,e.fromBinder(function(e){return t.then(e,function(t){return e(new u(t))}),function(){return n&&"function"==typeof t.abort?t.abort():void 0}},function(e){return[e,A()]}))},e.noMore=["<no-more>"],e.more=["<more>"],e.later=function(t,n){return lt(e,"later",t,n,e.fromPoll(t,function(){return[n,A()]}))},e.sequentially=function(t,n){var i;return i=0,lt(e,"sequentially",t,n,e.fromPoll(t,function(){var e;return e=n[i++],i<n.length?e:i===n.length?[e,A()]:A()}))},e.repeatedly=function(t,n){var i;return i=0,lt(e,"repeatedly",t,n,e.fromPoll(t,function(){return n[i++%n.length]}))},e.spy=function(e){return nt.push(e)},nt=[],tt=function(e){var t,n,i;if(nt.length&&!tt.running)try{for(tt.running=!0,n=0,i=nt.length;i>n;n++)(t=nt[n])(e)}finally{delete tt.running}return void 0},ct=function(e){return function(){var t,n,i,r;return i=arguments[0],t=2<=arguments.length?pt.call(arguments,1):[],"object"==typeof i&&t.length&&(n=i,r=t[0],i=function(){return n[r].apply(n,arguments)},t=t.slice(1)),e.apply(null,[i].concat(pt.call(t)))}},U=function(t,n){return ct(function(){var i,r,o;return r=arguments[0],i=2<=arguments.length?pt.call(arguments,1):[],o=J(n,[function(e,t){return r.apply(null,pt.call(e).concat([t]))}]),lt.apply(null,[e,t,r].concat(pt.call(i),[e.combineAsArray(i).flatMap(o)]))})},e.fromCallback=U("fromCallback",function(){var t,n;return n=arguments[0],t=2<=arguments.length?pt.call(arguments,1):[],e.fromBinder(function(e){return V(n,t)(e),K},function(e){return[e,A()]})}),e.fromNodeCallback=U("fromNodeCallback",function(){var t,n;return n=arguments[0],t=2<=arguments.length?pt.call(arguments,1):[],e.fromBinder(function(e){return V(n,t)(e),K},function(e,t){return e?[new u(e),A()]:[t,A()]})}),e.fromPoll=function(t,n){return lt(e,"fromPoll",t,n,e.fromBinder(function(n){var i;return i=e.scheduler.setInterval(n,t),function(){return e.scheduler.clearInterval(i)}},n))},e.interval=function(t,n){return null==n&&(n={}),lt(e,"interval",t,n,e.fromPoll(t,function(){return Z(n)}))},e.constant=function(t){return new g(B(e,"constant",t),function(e){return e(L(t)),e(A()),K})},e.never=function(){return new c(B(e,"never"),function(e){return e(A()),K})},e.once=function(t){return new c(B(e,"once",t),function(e){return e(rt(t)),e(A()),K})},e.fromArray=function(t){var n;return k(t),n=0,new c(B(e,"fromArray",t),function(i){var r,o,a;for(o=!1,r=e.more;r!==e.noMore&&!o;)n>=t.length?(i(A()),r=e.noMore):(a=t[n++],r=i(rt(a)));return function(){return o=!0}})},e.mergeAll=function(){var t;return t=1<=arguments.length?pt.call(arguments,0):[],z(t[0])&&(t=t[0]),t.length?new c(B.apply(null,[e,"mergeAll"].concat(pt.call(t))),function(n){var i,r,o;return i=0,o=function(r){return function(o){return r.dispatcher.subscribe(function(r){var a;return r.isEnd()?(i++,i===t.length?n(A()):e.more):(a=n(r),a===e.noMore&&o(),a)})}},r=dt.map(o,t),F.apply(null,r)}):e.never()},e.zipAsArray=function(){var t;return t=1<=arguments.length?pt.call(arguments,0):[],z(t[0])&&(t=t[0]),lt.apply(null,[e,"zipAsArray"].concat(pt.call(t),[e.zipWith(t,function(){var e;return e=1<=arguments.length?pt.call(arguments,0):[]})]))},e.zipWith=function(){var t,n,i;return t=arguments[0],n=2<=arguments.length?pt.call(arguments,1):[],H(t)||(i=[t,n[0]],n=i[0],t=i[1]),n=dt.map(function(e){return e.toEventStream()},n),lt.apply(null,[e,"zipWith",t].concat(pt.call(n),[e.when(n,t)]))},e.groupSimultaneous=function(){var n,i,r;return r=1<=arguments.length?pt.call(arguments,0):[],1===r.length&&z(r[0])&&(r=r[0]),i=function(){var e,i,o;for(o=[],e=0,i=r.length;i>e;e++)n=r[e],o.push(new t(n));return o}(),lt.apply(null,[e,"groupSimultaneous"].concat(pt.call(r),[e.when(i,function(){var e;return e=1<=arguments.length?pt.call(arguments,0):[]})]))},e.combineAsArray=function(){var t,n,i,r,o,a,s;for(o=1<=arguments.length?pt.call(arguments,0):[],1===o.length&&z(o[0])&&(o=o[0]),t=a=0,s=o.length;s>a;t=++a)r=o[t],q(r)||(o[t]=e.constant(r));return o.length?(i=function(){var e,t,i;for(i=[],e=0,t=o.length;t>e;e++)n=o[e],i.push(new b(n,!0));return i}(),lt.apply(null,[e,"combineAsArray"].concat(pt.call(o),[e.when(i,function(){var e;return e=1<=arguments.length?pt.call(arguments,0):[]}).toProperty()]))):e.constant([])},e.onValues=function(){var t,n,i;return n=2<=arguments.length?pt.call(arguments,0,i=arguments.length-1):(i=0,[]),t=arguments[i++],e.combineAsArray(n).onValues(t)},e.combineWith=function(){var t,n;return t=arguments[0],n=2<=arguments.length?pt.call(arguments,1):[],lt.apply(null,[e,"combineWith",t].concat(pt.call(n),[e.combineAsArray(n).map(function(e){return t.apply(null,e)})]))},e.combineTemplate=function(t){var n,i,r,o,a,s,u,l,c,d;return u=[],d=[],s=function(e){return e[e.length-1]},c=function(e,t,n){return s(e)[t]=n},n=function(e,t){return function(n,i){return c(n,e,i[t])}},a=function(e,t){return function(n){return c(n,e,t)}},l=function(e){return z(e)?[]:{}},r=function(e,t){var i,r;return q(t)?(d.push(t),u.push(n(e,d.length-1))):t!==Object(t)||"function"==typeof t||t instanceof RegExp||t instanceof Date?u.push(a(e,t)):(r=function(e){return function(n){var i;return i=l(t),c(n,e,i),n.push(i)}},i=function(e){return e.pop()},u.push(r(e)),o(t),u.push(i))},o=function(e){return dt.each(e,r)},o(t),i=function(e){var n,i,r,o,a;for(r=l(t),n=[r],o=0,a=u.length;a>o;o++)(i=u[o])(n,e);return r},lt(e,"combineTemplate",t,e.combineAsArray(d).map(i))},e.retry=function(t){var n,i,r,o,a,s;if(!H(t.source))throw new d("'source' option has to be a function");return s=t.source,o=t.retries||0,r=t.maxRetries||o,n=t.delay||function(){return 0},i=t.isRetryable||function(){return!0},a=function(t){var a,u;return u={source:s,retries:o-1,maxRetries:r,delay:n,isRetryable:i},a=function(){return e.retry(u)},e.later(n(t)).filter(!1).concat(e.once().flatMap(a))},lt(e,"retry",t,s().flatMapError(function(t){return i(t)&&o>0?a({error:t,retriesDone:r-o}):e.once(new u(t))}))},j=0,l=function(){function e(){this.id=++j}return e.prototype.isEvent=function(){return!0},e.prototype.isEnd=function(){return!1},e.prototype.isInitial=function(){return!1},e.prototype.isNext=function(){return!1},e.prototype.isError=function(){return!1},e.prototype.hasValue=function(){return!1},e.prototype.filter=function(){return!0},e.prototype.inspect=function(){return this.toString()},e.prototype.log=function(){return this.toString()},e}(),p=function(e){function t(e,n){t.__super__.constructor.call(this),!n&&H(e)||e instanceof t?(this.valueF=e,this.valueInternal=void 0):(this.valueF=void 0,this.valueInternal=e)}return mt(t,e),t.prototype.isNext=function(){return!0},t.prototype.hasValue=function(){return!0},t.prototype.value=function(){return this.valueF instanceof t?(this.valueInternal=this.valueF.value(),this.valueF=void 0):this.valueF&&(this.valueInternal=this.valueF(),this.valueF=void 0),this.valueInternal},t.prototype.fmap=function(e){var t,n;return this.valueInternal?(n=this.valueInternal,this.apply(function(){return e(n)})):(t=this,this.apply(function(){return e(t.value())}))},t.prototype.apply=function(e){return new t(e)},t.prototype.filter=function(e){return e(this.value())},t.prototype.toString=function(){return dt.toString(this.value())},t.prototype.log=function(){return this.value()},t}(l),f=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return mt(t,e),t.prototype.isInitial=function(){return!0},t.prototype.isNext=function(){return!1},t.prototype.apply=function(e){return new t(e)},t.prototype.toNext=function(){return new p(this)},t}(p),s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return mt(t,e),t.prototype.isEnd=function(){return!0},t.prototype.fmap=function(){return this},t.prototype.apply=function(){return this},t.prototype.toString=function(){return"<end>"},t}(l),u=function(e){function t(e){this.error=e}return mt(t,e),t.prototype.isError=function(){return!0},t.prototype.fmap=function(){return this},t.prototype.apply=function(){return this},t.prototype.toString=function(){return"<error> "+dt.toString(this.error)},t}(l),P=0,m=function(){function t(e){this.id=++P,lt(e,this),this.initialDesc=this.desc}return t.prototype.subscribe=function(e){return _.wrappedSubscribe(this,e)},t.prototype.subscribeInternal=function(e){return this.dispatcher.subscribe(e)},t.prototype.onValue=function(){var e;return e=X(arguments),this.subscribe(function(t){return t.hasValue()?e(t.value()):void 0})},t.prototype.onValues=function(e){return this.onValue(function(t){return e.apply(null,t)
})},t.prototype.onError=function(){var e;return e=X(arguments),this.subscribe(function(t){return t.isError()?e(t.error):void 0})},t.prototype.onEnd=function(){var e;return e=X(arguments),this.subscribe(function(t){return t.isEnd()?e():void 0})},t.prototype.errors=function(){return lt(this,"errors",this.filter(function(){return!1}))},t.prototype.filter=function(){var t,n;return n=arguments[0],t=2<=arguments.length?pt.call(arguments,1):[],M(this,n,t,function(t){return lt(this,"filter",t,this.withHandler(function(n){return n.filter(t)?this.push(n):e.more}))})},t.prototype.takeWhile=function(){var t,n;return n=arguments[0],t=2<=arguments.length?pt.call(arguments,1):[],M(this,n,t,function(t){return lt(this,"takeWhile",t,this.withHandler(function(n){return n.filter(t)?this.push(n):(this.push(A()),e.noMore)}))})},t.prototype.endOnError=function(){var e,t;return t=arguments[0],e=2<=arguments.length?pt.call(arguments,1):[],null==t&&(t=!0),M(this,t,e,function(e){return lt(this,"endOnError",this.withHandler(function(t){return t.isError()&&e(t.error)?(this.push(t),this.push(A())):this.push(t)}))})},t.prototype.take=function(t){return 0>=t?e.never():lt(this,"take",t,this.withHandler(function(n){return n.hasValue()?(t--,t>0?this.push(n):(0===t&&this.push(n),this.push(A()),e.noMore)):this.push(n)}))},t.prototype.map=function(){var e,t;return t=arguments[0],e=2<=arguments.length?pt.call(arguments,1):[],t instanceof g?t.sampledBy(this,O):M(this,t,e,function(e){return lt(this,"map",e,this.withHandler(function(t){return this.push(t.fmap(e))}))})},t.prototype.mapError=function(){var e;return e=X(arguments),lt(this,"mapError",e,this.withHandler(function(t){return this.push(t.isError()?Z(e(t.error)):t)}))},t.prototype.mapEnd=function(){var t;return t=X(arguments),lt(this,"mapEnd",t,this.withHandler(function(n){return n.isEnd()?(this.push(Z(t(n))),this.push(A()),e.noMore):this.push(n)}))},t.prototype.doAction=function(){var e;return e=X(arguments),lt(this,"doAction",e,this.withHandler(function(t){return t.hasValue()&&e(t.value()),this.push(t)}))},t.prototype.skip=function(t){return lt(this,"skip",t,this.withHandler(function(n){return n.hasValue()&&t>0?(t--,e.more):this.push(n)}))},t.prototype.skipDuplicates=function(e){return null==e&&(e=function(e,t){return e===t}),lt(this,"skipDuplicates",this.withStateMachine(h,function(t,n){return n.hasValue()?n.isInitial()||t===h||!e(t.get(),n.value())?[new y(n.value()),[n]]:[t,[]]:[t,[n]]}))},t.prototype.skipErrors=function(){return lt(this,"skipErrors",this.withHandler(function(t){return t.isError()?e.more:this.push(t)}))},t.prototype.withStateMachine=function(t,n){var i;return i=t,lt(this,"withStateMachine",t,n,this.withHandler(function(t){var r,o,a,s,u,l,c;for(r=n(i,t),o=r[0],s=r[1],i=o,u=e.more,l=0,c=s.length;c>l;l++)if(a=s[l],u=this.push(a),u===e.noMore)return u;return u}))},t.prototype.scan=function(t,n){var i,r,o;return n=it(n),i=st(t),o=function(t){return function(o){var a,s,u,l;return a=!1,l=K,s=e.more,u=function(){return a?void 0:i.forEach(function(t){return a=!0,s=o(new f(function(){return t})),s===e.noMore?(l(),l=K):void 0})},l=t.dispatcher.subscribe(function(t){var r,l;return t.hasValue()?a&&t.isInitial()?e.more:(t.isInitial()||u(),a=!0,l=i.getOrElse(void 0),r=n(l,t.value()),i=new y(r),o(t.apply(function(){return r}))):(t.isEnd()&&(s=u()),s!==e.noMore?o(t):void 0)}),_.whenDoneWith(r,u),l}}(this),r=new g(B(this,"scan",t,n),o)},t.prototype.fold=function(e,t){return lt(this,"fold",e,t,this.scan(e,t).sampledBy(this.filter(!1).mapEnd().toProperty()))},t.prototype.zip=function(t,n){return null==n&&(n=Array),lt(this,"zip",t,e.zipWith([this,t],n))},t.prototype.diff=function(e,t){return t=it(t),lt(this,"diff",e,t,this.scan([e],function(e,n){return[n,t(e[0],n)]}).filter(function(e){return 2===e.length}).map(function(e){return e[1]}))},t.prototype.flatMap=function(){return N(this,G(arguments))},t.prototype.flatMapFirst=function(){return N(this,G(arguments),!0)},t.prototype.flatMapWithConcurrencyLimit=function(){var e,t;return t=arguments[0],e=2<=arguments.length?pt.call(arguments,1):[],lt.apply(null,[this,"flatMapWithConcurrencyLimit",t].concat(pt.call(e),[N(this,G(e),!1,t)]))},t.prototype.flatMapLatest=function(){var e,t;return e=G(arguments),t=this.toEventStream(),lt(this,"flatMapLatest",e,t.flatMap(function(n){return Q(e(n)).takeUntil(t)}))},t.prototype.flatMapError=function(t){return lt(this,"flatMapError",t,this.mapError(function(e){return new u(e)}).flatMap(function(n){return n instanceof u?t(n.error):e.once(n)}))},t.prototype.flatMapConcat=function(){return lt.apply(null,[this,"flatMapConcat"].concat(pt.call(arguments),[this.flatMapWithConcurrencyLimit.apply(this,[1].concat(pt.call(arguments)))]))},t.prototype.bufferingThrottle=function(t){return lt(this,"bufferingThrottle",t,this.flatMapConcat(function(n){return e.once(n).concat(e.later(t).filter(!1))}))},t.prototype.not=function(){return lt(this,"not",this.map(function(e){return!e}))},t.prototype.log=function(){var e;return e=1<=arguments.length?pt.call(arguments,0):[],this.subscribe(function(t){return"undefined"!=typeof console&&null!==console&&"function"==typeof console.log?console.log.apply(console,pt.call(e).concat([t.log()])):void 0}),this},t.prototype.slidingWindow=function(e,t){return null==t&&(t=0),lt(this,"slidingWindow",e,t,this.scan([],function(t,n){return t.concat([n]).slice(-e)}).filter(function(e){return e.length>=t}))},t.prototype.combine=function(t,n){var i;return i=it(n),lt(this,"combine",t,n,e.combineAsArray(this,t).map(function(e){return i(e[0],e[1])}))},t.prototype.decode=function(t){return lt(this,"decode",t,this.combine(e.combineTemplate(t),function(e,t){return t[e]}))},t.prototype.awaiting=function(t){return lt(this,"awaiting",t,e.groupSimultaneous(this,t).map(function(e){var t,n;return t=e[0],n=e[1],0===n.length}).toProperty(!1).skipDuplicates())},t.prototype.name=function(e){return this._name=e,this},t.prototype.withDescription=function(){return B.apply(null,arguments).apply(this)},t.prototype.toString=function(){return this._name?this._name:this.desc.toString()},t.prototype.internalDeps=function(){return this.initialDesc.deps()},t}(),m.prototype.reduce=m.prototype.fold,m.prototype.assign=m.prototype.onValue,m.prototype.inspect=m.prototype.toString,N=function(t,n,r,o){var a,s,u;return u=[t],a=[],s=new c(B(t,"flatMap"+(r?"First":""),n),function(s){var u,l,c,d,p;return c=new i,d=[],p=function(t){var i;return i=Q(n(t.value())),a.push(i),c.add(function(t,n){return i.dispatcher.subscribe(function(r){var o;return r.isEnd()?(dt.remove(i,a),l(),u(n),e.noMore):(r instanceof f&&(r=r.toNext()),o=s(r),o===e.noMore&&t(),o)})})},l=function(){var e;return e=d.shift(),e?p(e):void 0},u=function(e){return e(),c.empty()?s(A()):void 0},c.add(function(n,i){return t.dispatcher.subscribe(function(t){return t.isEnd()?u(i):t.isError()?s(t):r&&c.count()>1?e.more:c.unsubscribed?e.noMore:o&&c.count()>o?d.push(t):p(t)})}),c.unsubscribe}),s.internalDeps=function(){return a.length?u.concat(a):u},s},c=function(t){function n(e,t,i){H(e)&&(i=t,t=e,e=[]),n.__super__.constructor.call(this,e),C(t),this.dispatcher=new a(t,i),tt(this)}return mt(n,t),n.prototype.delay=function(t){return lt(this,"delay",t,this.flatMap(function(n){return e.later(t,n)}))},n.prototype.debounce=function(t){return lt(this,"debounce",t,this.flatMapLatest(function(n){return e.later(t,n)}))},n.prototype.debounceImmediate=function(t){return lt(this,"debounceImmediate",t,this.flatMapFirst(function(n){return e.once(n).concat(e.later(t).filter(!1))}))},n.prototype.throttle=function(e){return lt(this,"throttle",e,this.bufferWithTime(e).map(function(e){return e[e.length-1]}))},n.prototype.bufferWithTime=function(e){return lt(this,"bufferWithTime",e,this.bufferWithTimeOrCount(e,Number.MAX_VALUE))},n.prototype.bufferWithCount=function(e){return lt(this,"bufferWithCount",e,this.bufferWithTimeOrCount(void 0,e))},n.prototype.bufferWithTimeOrCount=function(e,t){var n;return n=function(n){return n.values.length===t?n.flush():void 0!==e?n.schedule():void 0},lt(this,"bufferWithTimeOrCount",e,t,this.buffer(e,n,n))},n.prototype.buffer=function(t,n,i){var r,o,a;return null==n&&(n=K),null==i&&(i=K),r={scheduled:!1,end:void 0,values:[],flush:function(){var t;if(this.scheduled=!1,this.values.length>0){if(t=this.push(Z(this.values)),this.values=[],null!=this.end)return this.push(this.end);if(t!==e.noMore)return i(this)}else if(null!=this.end)return this.push(this.end)},schedule:function(){return this.scheduled?void 0:(this.scheduled=!0,t(function(e){return function(){return e.flush()}}(this)))}},a=e.more,H(t)||(o=t,t=function(t){return e.scheduler.setTimeout(t,o)}),lt(this,"buffer",this.withHandler(function(e){return r.push=function(e){return function(t){return e.push(t)}}(this),e.isError()?a=this.push(e):e.isEnd()?(r.end=e,r.scheduled||r.flush()):(r.values.push(e.value()),n(r)),a}))},n.prototype.merge=function(t){var n;return S(t),n=this,lt(n,"merge",t,e.mergeAll(this,t))},n.prototype.toProperty=function(t){var n,i;return i=0===arguments.length?h:st(function(){return t}),n=this.dispatcher,new g(B(this,"toProperty",t),function(t){var r,o,a,s;return r=!1,s=K,o=e.more,a=function(){return r?void 0:i.forEach(function(n){return r=!0,o=t(new f(n)),o===e.noMore?(s(),s=K):void 0})},s=n.subscribe(function(n){return n.hasValue()?r&&n.isInitial()?e.more:(n.isInitial()||a(),r=!0,i=new y(n),t(n)):(n.isEnd()&&(o=a()),o!==e.noMore?t(n):void 0)}),a(),s})},n.prototype.toEventStream=function(){return this},n.prototype.sampledBy=function(e,t){return lt(this,"sampledBy",e,t,this.toProperty().sampledBy(e,t))},n.prototype.concat=function(e){var t;return t=this,new n(B(t,"concat",e),function(n){var i,r;return r=K,i=t.dispatcher.subscribe(function(t){return t.isEnd()?r=e.dispatcher.subscribe(n):n(t)}),function(){return i(),r()}})},n.prototype.takeUntil=function(t){var n;return n={},lt(this,"takeUntil",t,e.groupSimultaneous(this.mapEnd(n),t.skipErrors()).withHandler(function(i){var r,o,a,s,u,l;if(i.hasValue()){if(l=i.value(),r=l[0],t=l[1],t.length)return this.push(A());for(o=e.more,s=0,u=r.length;u>s;s++)a=r[s],o=this.push(a===n?A():Z(a));return o}return this.push(i)}))},n.prototype.skipUntil=function(e){var t;return t=e.take(1).map(!0).toProperty(!1),lt(this,"skipUntil",e,this.filter(t))},n.prototype.skipWhile=function(){var t,n,i;return n=arguments[0],t=2<=arguments.length?pt.call(arguments,1):[],i=!1,M(this,n,t,function(t){return lt(this,"skipWhile",t,this.withHandler(function(n){return!i&&n.hasValue()&&t(n.value())?e.more:(n.hasValue()&&(i=!0),this.push(n))}))})},n.prototype.holdWhen=function(t){var n,i,r;return r=t.startWith(!1),i=r.filter(function(e){return!e}),n=r.filter(dt.id),lt(this,"holdWhen",t,this.filter(!1).merge(r.flatMapConcat(function(t){return function(r){return r?t.scan([],function(e,t){return e.concat(t)}).sampledBy(i).take(1).flatMap(e.fromArray):t.takeUntil(n)}}(this))))},n.prototype.startWith=function(t){return lt(this,"startWith",t,e.once(t).concat(this))},n.prototype.withHandler=function(e){return new n(B(this,"withHandler",e),this.dispatcher.subscribe,e)},n}(m),g=function(t){function n(e,t,i){H(e)&&(i=t,t=e,e=[]),n.__super__.constructor.call(this,e),C(t),this.dispatcher=new v(this,t,i),tt(this)}return mt(n,t),n.prototype.sampledBy=function(t,i){var r,o,a,s,u;return null!=i?i=it(i):(r=!0,i=function(e){return e.value()}),u=new b(this,!1,r),a=new b(t,!0,r),s=e.when([u,a],i),o=t instanceof n?s.toProperty():s,lt(this,"sampledBy",t,i,o)},n.prototype.sample=function(t){return lt(this,"sample",t,this.sampledBy(e.interval(t,{})))},n.prototype.changes=function(){return new c(B(this,"changes"),function(e){return function(t){return e.dispatcher.subscribe(function(e){return e.isInitial()?void 0:t(e)})}}(this))},n.prototype.withHandler=function(e){return new n(B(this,"withHandler",e),this.dispatcher.subscribe,e)},n.prototype.toProperty=function(){return T(arguments),this},n.prototype.toEventStream=function(){return new c(B(this,"toEventStream"),function(e){return function(t){return e.dispatcher.subscribe(function(e){return e.isInitial()&&(e=e.toNext()),t(e)})}}(this))},n.prototype.and=function(e){return lt(this,"and",e,this.combine(e,function(e,t){return e&&t}))},n.prototype.or=function(e){return lt(this,"or",e,this.combine(e,function(e,t){return e||t}))},n.prototype.delay=function(e){return this.delayChanges("delay",e,function(t){return t.delay(e)})},n.prototype.debounce=function(e){return this.delayChanges("debounce",e,function(t){return t.debounce(e)})},n.prototype.throttle=function(e){return this.delayChanges("throttle",e,function(t){return t.throttle(e)})},n.prototype.delayChanges=function(){var e,t,n;return e=2<=arguments.length?pt.call(arguments,0,n=arguments.length-1):(n=0,[]),t=arguments[n++],lt.apply(null,[this].concat(pt.call(e),[w(this,t(this.changes()))]))},n.prototype.takeUntil=function(e){var t;return t=this.changes().takeUntil(e),lt(this,"takeUntil",e,w(this,t))},n.prototype.startWith=function(e){return lt(this,"startWith",e,this.scan(e,function(e,t){return t}))},n.prototype.bufferingThrottle=function(){var e;return(e=n.__super__.bufferingThrottle.apply(this,arguments)).bufferingThrottle.apply(e,arguments).toProperty()},n}(m),M=function(e,t,n,i){var r;return t instanceof g?(r=t.sampledBy(e,function(e,t){return[e,t]}),i.call(r,function(e){var t,n;return t=e[0],n=e[1],t}).map(function(e){var t,n;return t=e[0],n=e[1]})):(t=V(t,n),i.call(e,t))},w=function(t,n){var i;return i=new c(B(t,"justInitValue"),function(n){var r,o;return o=void 0,r=t.dispatcher.subscribe(function(t){return t.isEnd()||(o=t),e.noMore}),_.whenDoneWith(i,function(){return null!=o&&n(o),n(A())}),r}),i.concat(n).toProperty()},a=function(){function t(e,t){this._subscribe=e,this._handleEvent=t,this.subscribe=gt(this.subscribe,this),this.handleEvent=gt(this.handleEvent,this),this.subscriptions=[],this.queue=[],this.pushing=!1,this.ended=!1,this.prevError=void 0,this.unsubSrc=void 0}return t.prototype.hasSubscribers=function(){return this.subscriptions.length>0},t.prototype.removeSub=function(e){return this.subscriptions=dt.without(e,this.subscriptions)},t.prototype.push=function(e){return e.isEnd()&&(this.ended=!0),_.inTransaction(e,this,this.pushIt,[e])},t.prototype.pushIt=function(t){var n,i,r,o,a,s;if(this.pushing)return this.queue.push(t),e.more;if(t!==this.prevError){t.isError()&&(this.prevError=t),r=!1;try{for(this.pushing=!0,o=this.subscriptions,a=0,s=o.length;s>a;a++)i=o[a],n=i.sink(t),(n===e.noMore||t.isEnd())&&this.removeSub(i);r=!0}finally{this.pushing=!1,r||(this.queue=[])}for(r=!0;this.queue.length;)t=this.queue.shift(),this.push(t);return this.hasSubscribers()?e.more:(this.unsubscribeFromSource(),e.noMore)}},t.prototype.handleEvent=function(e){return this._handleEvent?this._handleEvent(e):this.push(e)},t.prototype.unsubscribeFromSource=function(){return this.unsubSrc&&this.unsubSrc(),this.unsubSrc=void 0},t.prototype.subscribe=function(e){var t;return this.ended?(e(A()),K):(C(e),t={sink:e},this.subscriptions.push(t),1===this.subscriptions.length&&(this.unsubSrc=this._subscribe(this.handleEvent),C(this.unsubSrc)),function(e){return function(){return e.removeSub(t),e.hasSubscribers()?void 0:e.unsubscribeFromSource()}}(this))},t}(),v=function(t){function n(e,t,i){this.property=e,this.subscribe=gt(this.subscribe,this),n.__super__.constructor.call(this,t,i),this.current=h,this.currentValueRootId=void 0,this.propertyEnded=!1}return mt(n,t),n.prototype.push=function(e){return e.isEnd()&&(this.propertyEnded=!0),e.hasValue()&&(this.current=new y(e),this.currentValueRootId=_.currentEventId()),n.__super__.push.call(this,e)},n.prototype.maybeSubSource=function(t,n){return n===e.noMore?K:this.propertyEnded?(t(A()),K):a.prototype.subscribe.call(this,t)},n.prototype.subscribe=function(t){var n,i,r,o;return i=!1,r=e.more,this.current.isDefined&&(this.hasSubscribers()||this.propertyEnded)?(n=_.currentEventId(),o=this.currentValueRootId,!this.propertyEnded&&o&&n&&n!==o?(_.whenDoneWith(this.property,function(e){return function(){return e.currentValueRootId===o?t(L(e.current.get().value())):void 0}}(this)),this.maybeSubSource(t,r)):(_.inTransaction(void 0,this,function(){return r=function(){try{return t(L(this.current.get().value()))}catch(n){return e.more}}.call(this)},[]),this.maybeSubSource(t,r))):this.maybeSubSource(t,r)},n}(a),n=function(t){function n(){this.guardedSink=gt(this.guardedSink,this),this.subscribeAll=gt(this.subscribeAll,this),this.unsubAll=gt(this.unsubAll,this),this.sink=void 0,this.subscriptions=[],this.ended=!1,n.__super__.constructor.call(this,B(e,"Bus"),this.subscribeAll)}return mt(n,t),n.prototype.unsubAll=function(){var e,t,n,i;for(i=this.subscriptions,t=0,n=i.length;n>t;t++)e=i[t],"function"==typeof e.unsub&&e.unsub();return void 0},n.prototype.subscribeAll=function(e){var t,n,i,r;for(this.sink=e,r=D(this.subscriptions),n=0,i=r.length;i>n;n++)t=r[n],this.subscribeInput(t);return this.unsubAll},n.prototype.guardedSink=function(t){return function(n){return function(i){return i.isEnd()?(n.unsubscribeInput(t),e.noMore):n.sink(i)}}(this)},n.prototype.subscribeInput=function(e){return e.unsub=e.input.dispatcher.subscribe(this.guardedSink(e.input))},n.prototype.unsubscribeInput=function(e){var t,n,i,r,o;for(o=this.subscriptions,t=i=0,r=o.length;r>i;t=++i)if(n=o[t],n.input===e)return"function"==typeof n.unsub&&n.unsub(),void this.subscriptions.splice(t,1)},n.prototype.plug=function(e){var t;if(!this.ended)return t={input:e},this.subscriptions.push(t),null!=this.sink&&this.subscribeInput(t),function(t){return function(){return t.unsubscribeInput(e)}}(this)},n.prototype.end=function(){return this.ended=!0,this.unsubAll(),"function"==typeof this.sink?this.sink(A()):void 0},n.prototype.push=function(e){return"function"==typeof this.sink?this.sink(Z(e)):void 0},n.prototype.error=function(e){return"function"==typeof this.sink?this.sink(new u(e)):void 0},n}(c),b=function(){function e(e,t,n){this.obs=e,this.sync=t,this.lazy=null!=n?n:!1,this.queue=[]}return e.prototype.subscribe=function(e){return this.obs.dispatcher.subscribe(e)},e.prototype.toString=function(){return this.obs.toString()},e.prototype.markEnded=function(){return this.ended=!0},e.prototype.consume=function(){return this.lazy?{value:dt.always(this.queue[0])}:this.queue[0]},e.prototype.push=function(e){return this.queue=[e]},e.prototype.mayHave=function(){return!0},e.prototype.hasAtLeast=function(){return this.queue.length},e.prototype.flatten=!0,e}(),r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return mt(t,e),t.prototype.consume=function(){return this.queue.shift()},t.prototype.push=function(e){return this.queue.push(e)},t.prototype.mayHave=function(e){return!this.ended||this.queue.length>=e},t.prototype.hasAtLeast=function(e){return this.queue.length>=e},t.prototype.flatten=!1,t}(b),t=function(e){function t(e){t.__super__.constructor.call(this,e,!0)}return mt(t,e),t.prototype.consume=function(){var e;return e=this.queue,this.queue=[],{value:function(){return e}}},t.prototype.push=function(e){return this.queue.push(e.value())},t.prototype.hasAtLeast=function(){return!0},t}(b),b.isTrigger=function(e){return e instanceof b?e.sync:e instanceof c},b.fromObservable=function(e){return e instanceof b?e:e instanceof g?new b(e,!1):new r(e,!0)},B=function(){var e,t,n;return t=arguments[0],n=arguments[1],e=3<=arguments.length?pt.call(arguments,2):[],(t||n)instanceof o?t||n:new o(t,n,e)},$=function(e){return z(e)?dt.flatMap($,e):q(e)?[e]:e instanceof b?[e.obs]:[]},o=function(){function e(e,t,n){this.context=e,this.method=t,this.args=n,this.cached=void 0}return e.prototype.deps=function(){return this.cached||(this.cached=$([this.context].concat(this.args)))},e.prototype.apply=function(e){return e.desc=this,e},e.prototype.toString=function(){return dt.toString(this.context)+"."+dt.toString(this.method)+"("+dt.map(dt.toString,this.args)+")"},e}(),lt=function(){var e,t,n;return e=2<=arguments.length?pt.call(arguments,0,n=arguments.length-1):(n=0,[]),t=arguments[n++],B.apply(null,e).apply(t)},e.when=function(){var t,n,i,r,o,a,s,u,l,d,f,p,h,m,g,v,y,w,k,S;if(0===arguments.length)return e.never();for(o=arguments.length,g="when: expecting arguments in the form (Observable+,function)+",x(g,o%2===0),h=[],l=[],n=0,d=[];o>n;){for(d[n]=arguments[n],d[n+1]=arguments[n+1],u=dt.toArray(arguments[n]),t=arguments[n+1],s={f:H(t)?t:function(){return t},ixs:[]},m=!1,v=0,w=u.length;w>v;v++){for(p=u[v],i=dt.indexOf(h,p),m||(m=b.isTrigger(p)),0>i&&(h.push(p),i=h.length-1),S=s.ixs,y=0,k=S.length;k>y;y++)r=S[y],r.index===i&&r.count++;s.ixs.push({index:i,count:1})}x("At least one EventStream required",m||!u.length),u.length>0&&l.push(s),n+=2}return h.length?(h=dt.map(b.fromObservable,h),a=dt.any(h,function(e){return e.flatten})&&I(dt.map(function(e){return e.obs},h)),f=new c(B.apply(null,[e,"when"].concat(pt.call(d))),function(t){var i,r,o,s,u,c,d;return d=[],o=!1,s=function(e){var t,i,r;for(r=e.ixs,t=0,i=r.length;i>t;t++)if(n=r[t],!h[n.index].hasAtLeast(n.count))return!1;return!0},r=function(e){return!e.sync||e.ended},i=function(e){var t,i,r;for(r=e.ixs,t=0,i=r.length;i>t;t++)if(n=r[t],!h[n.index].mayHave(n.count))return!0},u=function(e){return!e.source.flatten},c=function(c){return function(p){var m,g,v;return g=function(){return _.whenDoneWith(f,m)},v=function(){var i,r,o,a,c,f;if(!(d.length>0))return e.more;for(o=e.more,a=d.pop(),c=0,f=l.length;f>c;c++)if(r=l[c],s(r))return i=function(){var e,t,i,o;for(i=r.ixs,o=[],e=0,t=i.length;t>e;e++)n=i[e],o.push(h[n.index].consume());return o}(),o=t(a.e.apply(function(){var e,t;return t=function(){var t,n,r;for(r=[],t=0,n=i.length;n>t;t++)e=i[t],r.push(e.value());return r}(),r.f.apply(r,t)})),d.length&&(d=dt.filter(u,d)),o===e.noMore?o:v()},m=function(){var n;return n=v(),o&&(o=!1,(dt.all(h,r)||dt.all(l,i))&&(n=e.noMore,t(A()))),n===e.noMore&&p(),n},c.subscribe(function(n){var i;return n.isEnd()?(o=!0,c.markEnded(),g()):n.isError()?i=t(n):(c.push(n),c.sync&&(d.push({source:c,e:n}),a||_.hasWaiters()?g():m())),i===e.noMore&&p(),i||e.more})}},F.apply(null,function(){var e,t,n;for(n=[],e=0,t=h.length;t>e;e++)p=h[e],n.push(c(p));return n}())})):e.never()},I=function(e,t){var n;return null==t&&(t=[]),n=function(e){var i;return dt.contains(t,e)?!0:(i=e.internalDeps(),i.length?(t.push(e),dt.any(i,n)):(t.push(e),!1))},dt.any(e,n)},e.update=function(){var t,n,i,r;for(n=arguments[0],r=2<=arguments.length?pt.call(arguments,1):[],i=function(e){return function(){var t;return t=1<=arguments.length?pt.call(arguments,0):[],function(n){return e.apply(null,[n].concat(t))}}},t=r.length-1;t>0;)r[t]instanceof Function||(r[t]=function(e){return function(){return e}}(r[t])),r[t]=i(r[t]),t-=2;return lt.apply(null,[e,"update",n].concat(pt.call(r),[e.when.apply(e,r).scan(n,function(e,t){return t(e)})]))},F=function(){var e;return e=1<=arguments.length?pt.call(arguments,0):[],new i(e).unsubscribe},i=function(){function e(e){var t,n,i;for(null==e&&(e=[]),this.unsubscribe=gt(this.unsubscribe,this),this.unsubscribed=!1,this.subscriptions=[],this.starting=[],n=0,i=e.length;i>n;n++)t=e[n],this.add(t)}return e.prototype.add=function(e){var t,n,i;if(!this.unsubscribed)return t=!1,n=K,this.starting.push(e),i=function(i){return function(){return i.unsubscribed?void 0:(t=!0,i.remove(n),dt.remove(e,i.starting))}}(this),n=e(this.unsubscribe,i),this.unsubscribed||t||this.subscriptions.push(n),dt.remove(e,this.starting),n},e.prototype.remove=function(e){return this.unsubscribed?void 0:void 0!==dt.remove(e,this.subscriptions)?e():void 0},e.prototype.unsubscribe=function(){var e,t,n,i;if(!this.unsubscribed){for(this.unsubscribed=!0,i=this.subscriptions,t=0,n=i.length;n>t;t++)(e=i[t])();return this.subscriptions=[],this.starting=[]}},e.prototype.count=function(){return this.unsubscribed?0:this.subscriptions.length+this.starting.length},e.prototype.empty=function(){return 0===this.count()},e}(),e.CompositeUnsubscribe=i,y=function(){function e(e){this.value=e}return e.prototype.getOrElse=function(){return this.value},e.prototype.get=function(){return this.value},e.prototype.filter=function(t){return t(this.value)?new e(this.value):h},e.prototype.map=function(t){return new e(t(this.value))},e.prototype.forEach=function(e){return e(this.value)},e.prototype.isDefined=!0,e.prototype.toArray=function(){return[this.value]},e.prototype.inspect=function(){return"Some("+this.value+")"},e.prototype.toString=function(){return this.inspect()},e}(),h={getOrElse:function(e){return e},filter:function(){return h},map:function(){return h},forEach:function(){},isDefined:!1,toArray:function(){return[]},inspect:function(){return"None"},toString:function(){return this.inspect()}},_=function(){var t,n,i,r,o,a,s,u,l,c,d,f,p,h;return c=void 0,d=[],f={},n=[],i=0,t=function(e){return c?n.push(e):e()},p=function(e,t){var n;return c?(n=f[e.id],null==n?(n=f[e.id]=[t],d.push(e)):n.push(t)):t()},o=function(){for(;d.length>0;)s(0);return void 0},s=function(e){var t,n,i,r,o,s;for(n=d[e],i=n.id,r=f[i],d.splice(e,1),delete f[i],a(n),o=0,s=r.length;s>o;o++)(t=r[o])();return void 0},a=function(e){var t,n,i,r,o;for(n=e.internalDeps(),r=0,o=n.length;o>r;r++)t=n[r],a(t),f[t.id]&&(i=dt.indexOf(d,t),s(i));return void 0},l=function(e,t,r,a){var s,u;if(c)return r.apply(t,a);for(c=e,u=r.apply(t,a),o(),c=void 0;i<n.length;)s=n[i],i++,s();return i=0,n=[],u},r=function(){return c?c.id:void 0},h=function(n,i){var r,o,a;return a=!1,r=function(){},o=function(){return a=!0,r()},r=n.dispatcher.subscribe(function(n){return t(function(){var t;return a||(t=i(n),t!==e.noMore)?void 0:o()})}),o},u=function(){return d.length>0},{whenDoneWith:p,hasWaiters:u,inTransaction:l,currentEventId:r,wrappedSubscribe:h}}(),e.EventStream=c,e.Property=g,e.Observable=m,e.Bus=n,e.Initial=f,e.Next=p,e.End=s,e.Error=u,K=function(){},W=function(e,t){return t},O=function(e){return e},L=function(e){return new f(e,!0)},Z=function(e){return new p(e,!0)},A=function(){return new s},rt=function(e){return e instanceof l?e:Z(e)},D=function(e){return e.slice(0)},x=function(e,t){if(!t)throw new d(e)},S=function(e){if(!(e instanceof c))throw new d("not an EventStream : "+e)},C=function(e){return x("not a function : "+e,H(e))},H=function(e){return"function"==typeof e},z=function(e){return e instanceof Array},q=function(e){return e instanceof m},k=function(e){if(!z(e))throw new d("not an array : "+e)},T=function(e){return x("no arguments supported",0===e.length)},E=function(e){if("string"!=typeof e)throw new d("not a string : "+e)},J=function(e,t){return function(){var n;return n=1<=arguments.length?pt.call(arguments,0):[],e.apply(null,t.concat(n))}},G=function(e){return 1===e.length&&q(e[0])?dt.always(e[0]):X(e)},X=function(e){return e=Array.prototype.slice.call(e),Y.apply(null,e)},Y=ct(function(){var e,t;return t=arguments[0],e=2<=arguments.length?pt.call(arguments,1):[],H(t)?e.length?J(t,e):t:R(t)?ot(t,e):dt.always(t)}),V=function(e,t){return Y.apply(null,[e].concat(pt.call(t)))},Q=function(t){return q(t)?t:e.once(t)},R=function(e){return"string"==typeof e&&e.length>1&&"."===e.charAt(0)},e.isFieldKey=R,ot=function(e,t){var n,i;return i=e.slice(1).split("."),n=dt.map(ut(t),i),function(t){var i,r;for(i=0,r=n.length;r>i;i++)e=n[i],t=e(t);return t}},ut=function(e){return function(t){return function(n){var i;return null==n?void 0:(i=n[t],H(i)?i.apply(n,e):i)}}},at=function(e){return e.slice(1)},it=function(e){var t;return H(e)?e:R(e)?(t=at(e),function(e,n){return e[t](n)}):x("not a function or a field key: "+e,!1)},st=function(e){return e instanceof y||e===h?e:new y(e)},dt={indexOf:Array.prototype.indexOf?function(e,t){return e.indexOf(t)}:function(e,t){var n,i,r,o;for(n=r=0,o=e.length;o>r;n=++r)if(i=e[n],t===i)return n;return-1},indexWhere:function(e,t){var n,i,r,o;for(n=r=0,o=e.length;o>r;n=++r)if(i=e[n],t(i))return n;return-1},head:function(e){return e[0]},always:function(e){return function(){return e}},negate:function(e){return function(t){return!e(t)}},empty:function(e){return 0===e.length},tail:function(e){return e.slice(1,e.length)},filter:function(e,t){var n,i,r,o;for(n=[],r=0,o=t.length;o>r;r++)i=t[r],e(i)&&n.push(i);return n},map:function(e,t){var n,i,r,o;for(o=[],i=0,r=t.length;r>i;i++)n=t[i],o.push(e(n));return o},each:function(e,t){var n,i;for(n in e)i=e[n],t(n,i);return void 0},toArray:function(e){return z(e)?e:[e]},contains:function(e,t){return-1!==dt.indexOf(e,t)},id:function(e){return e},last:function(e){return e[e.length-1]},all:function(e,t){var n,i,r;for(null==t&&(t=dt.id),i=0,r=e.length;r>i;i++)if(n=e[i],!t(n))return!1;return!0},any:function(e,t){var n,i,r;for(null==t&&(t=dt.id),i=0,r=e.length;r>i;i++)if(n=e[i],t(n))return!0;return!1},without:function(e,t){return dt.filter(function(t){return t!==e},t)},remove:function(e,t){var n;return n=dt.indexOf(t,e),n>=0?t.splice(n,1):void 0},fold:function(e,t,n){var i,r,o;for(r=0,o=e.length;o>r;r++)i=e[r],t=n(t,i);return t},flatMap:function(e,t){return dt.fold(t,[],function(t,n){return t.concat(e(n))})},cached:function(e){var t;return t=h,function(){return t===h&&(t=e(),e=void 0),t}},toString:function(e){var t,n,i,r;try{return et++,null==e?"undefined":H(e)?"function":z(e)?et>5?"[..]":"["+dt.map(dt.toString,e).toString()+"]":null!=(null!=e?e.toString:void 0)&&e.toString!==Object.prototype.toString?e.toString():"object"==typeof e?et>5?"{..}":(n=function(){var n;n=[];for(i in e)ht.call(e,i)&&(r=function(){try{return e[i]}catch(n){return t=n}}(),n.push(dt.toString(i)+":"+dt.toString(r)));return n}(),"{"+n+"}"):e}finally{et--}}},et=0,e._=dt,e.scheduler={setTimeout:function(e,t){return setTimeout(e,t)},setInterval:function(e,t){return setInterval(e,t)},clearInterval:function(e){return clearInterval(e)},now:function(){return(new Date).getTime()}},"undefined"!=typeof define&&null!==define&&null!=define.amd?(define([],function(){return e}),this.Bacon=e):"undefined"!=typeof module&&null!==module&&null!=module.exports?(module.exports=e,e.Bacon=e):this.Bacon=e}.call(this),!function(){var e,t,n,i,r=[].slice;i=function(e,t,n){var i,o;return i=function(e){return e.length>0},o={indexOf:Array.prototype.indexOf?function(e,t){return e.indexOf(t)}:function(e,t){var n,i,r,o;for(n=r=0,o=e.length;o>r;n=++r)if(i=e[n],t===i)return n;return-1}},e.$.Model=e.Model,n.fn.asEventStream=e.$.asEventStream,e.$.textFieldValue=function(t,n){var r,o,a;return a=function(){return t.val()},r=function(){return e.interval(50).take(10).map(a).filter(i).take(1)},o=t.asEventStream("keyup input").merge(t.asEventStream("cut paste").delay(1)).merge(r()),e.Binding({initValue:n,get:a,events:o,set:function(e){return t.val(e)}})},e.$.checkBoxValue=function(t,n){return e.Binding({initValue:n,get:function(){return t.is(":checked")},events:t.asEventStream("change"),set:function(e){return t.attr("checked",e)}})},e.$.selectValue=function(t,n){return e.Binding({initValue:n,get:function(){return t.val()},events:t.asEventStream("change"),set:function(e){return t.val(e)}})},e.$.radioGroupValue=function(t,i){return e.Binding({initValue:i,get:function(){return t.filter(":checked").first().val()},events:t.asEventStream("change"),set:function(e){return t.each(function(t,i){return i.value===e?n(i).attr("checked",!0):n(i).removeAttr("checked")})}})},e.$.checkBoxGroupValue=function(t,i){return e.Binding({initValue:i,get:function(){return t.filter(":checked").map(function(e,t){return n(t).val()}).toArray()},events:t.asEventStream("change"),set:function(e){return t.each(function(t,i){return n(i).attr("checked",o.indexOf(e,n(i).val())>=0)})}})},e.$.ajax=function(t,i){return e.fromPromise(n.ajax(t),i)},e.$.ajaxGet=function(t,n,i,r){return e.$.ajax({url:t,dataType:i,data:n},r)},e.$.ajaxGetJSON=function(t,n,i){return e.$.ajax({url:t,dataType:"json",data:n},i)},e.$.ajaxPost=function(t,n,i,r){return e.$.ajax({url:t,dataType:i,data:n,type:"POST"},r)},e.$.ajaxGetScript=function(t,n){return e.$.ajax({url:t,dataType:"script"},n)},e.$.lazyAjax=function(t){return e.once(t).flatMap(e.$.ajax)},e.Observable.prototype.ajax=function(){return this.flatMapLatest(e.$.ajax)},n.fn.extend({keydownE:function(){var e;return e=1<=arguments.length?r.call(arguments,0):[],this.asEventStream.apply(this,["keydown"].concat(r.call(e)))},keyupE:function(){var e;return e=1<=arguments.length?r.call(arguments,0):[],this.asEventStream.apply(this,["keyup"].concat(r.call(e)))},keypressE:function(){var e;return e=1<=arguments.length?r.call(arguments,0):[],this.asEventStream.apply(this,["keypress"].concat(r.call(e)))},clickE:function(){var e;return e=1<=arguments.length?r.call(arguments,0):[],this.asEventStream.apply(this,["click"].concat(r.call(e)))},dblclickE:function(){var e;return e=1<=arguments.length?r.call(arguments,0):[],this.asEventStream.apply(this,["dblclick"].concat(r.call(e)))},mousedownE:function(){var e;return e=1<=arguments.length?r.call(arguments,0):[],this.asEventStream.apply(this,["mousedown"].concat(r.call(e)))
},mouseupE:function(){var e;return e=1<=arguments.length?r.call(arguments,0):[],this.asEventStream.apply(this,["mouseup"].concat(r.call(e)))},mouseenterE:function(){var e;return e=1<=arguments.length?r.call(arguments,0):[],this.asEventStream.apply(this,["mouseenter"].concat(r.call(e)))},mouseleaveE:function(){var e;return e=1<=arguments.length?r.call(arguments,0):[],this.asEventStream.apply(this,["mouseleave"].concat(r.call(e)))},mousemoveE:function(){var e;return e=1<=arguments.length?r.call(arguments,0):[],this.asEventStream.apply(this,["mousemove"].concat(r.call(e)))},mouseoutE:function(){var e;return e=1<=arguments.length?r.call(arguments,0):[],this.asEventStream.apply(this,["mouseout"].concat(r.call(e)))},mouseoverE:function(){var e;return e=1<=arguments.length?r.call(arguments,0):[],this.asEventStream.apply(this,["mouseover"].concat(r.call(e)))},resizeE:function(){var e;return e=1<=arguments.length?r.call(arguments,0):[],this.asEventStream.apply(this,["resize"].concat(r.call(e)))},scrollE:function(){var e;return e=1<=arguments.length?r.call(arguments,0):[],this.asEventStream.apply(this,["scroll"].concat(r.call(e)))},selectE:function(){var e;return e=1<=arguments.length?r.call(arguments,0):[],this.asEventStream.apply(this,["select"].concat(r.call(e)))},changeE:function(){var e;return e=1<=arguments.length?r.call(arguments,0):[],this.asEventStream.apply(this,["change"].concat(r.call(e)))},submitE:function(){var e;return e=1<=arguments.length?r.call(arguments,0):[],this.asEventStream.apply(this,["submit"].concat(r.call(e)))},blurE:function(){var e;return e=1<=arguments.length?r.call(arguments,0):[],this.asEventStream.apply(this,["blur"].concat(r.call(e)))},focusE:function(){var e;return e=1<=arguments.length?r.call(arguments,0):[],this.asEventStream.apply(this,["focus"].concat(r.call(e)))},focusinE:function(){var e;return e=1<=arguments.length?r.call(arguments,0):[],this.asEventStream.apply(this,["focusin"].concat(r.call(e)))},focusoutE:function(){var e;return e=1<=arguments.length?r.call(arguments,0):[],this.asEventStream.apply(this,["focusout"].concat(r.call(e)))},loadE:function(){var e;return e=1<=arguments.length?r.call(arguments,0):[],this.asEventStream.apply(this,["load"].concat(r.call(e)))},unloadE:function(){var e;return e=1<=arguments.length?r.call(arguments,0):[],this.asEventStream.apply(this,["unload"].concat(r.call(e)))}}),n.fn.extend({animateE:function(){var t;return t=1<=arguments.length?r.call(arguments,0):[],e.fromPromise(this.animate.apply(this,t).promise())},showE:function(){var t;return t=1<=arguments.length?r.call(arguments,0):[],e.fromPromise(this.show.apply(this,t).promise())},hideE:function(){var t;return t=1<=arguments.length?r.call(arguments,0):[],e.fromPromise(this.hide.apply(this,t).promise())},toggleE:function(){var t;return t=1<=arguments.length?r.call(arguments,0):[],e.fromPromise(this.toggle.apply(this,t).promise())},fadeInE:function(){var t;return t=1<=arguments.length?r.call(arguments,0):[],e.fromPromise(this.fadeIn.apply(this,t).promise())},fadeOutE:function(){var t;return t=1<=arguments.length?r.call(arguments,0):[],e.fromPromise(this.fadeOut.apply(this,t).promise())},fadeToE:function(){var t;return t=1<=arguments.length?r.call(arguments,0):[],e.fromPromise(this.fadeTo.apply(this,t).promise())},fadeToggleE:function(){var t;return t=1<=arguments.length?r.call(arguments,0):[],e.fromPromise(this.fadeToggle.apply(this,t).promise())},slideDownE:function(){var t;return t=1<=arguments.length?r.call(arguments,0):[],e.fromPromise(this.slideDown.apply(this,t).promise())},slideUpE:function(){var t;return t=1<=arguments.length?r.call(arguments,0):[],e.fromPromise(this.slideUp.apply(this,t).promise())},slideToggleE:function(){var t;return t=1<=arguments.length?r.call(arguments,0):[],e.fromPromise(this.slideToggle.apply(this,t).promise())}}),e.$},"undefined"!=typeof module&&null!==module?(t=require("baconjs"),n=require("bacon.model"),e=require("jquery"),module.exports=i(t,n,e)):"function"==typeof define&&define.amd?define(["bacon","bacon.model","jquery"],i):i(this.Bacon,this.BaconModel,this.$)}.call(this),function(){function e(e,t,n){n=(n||0)-1;for(var i=e?e.length:0;++n<i;)if(e[n]===t)return n;return-1}function t(t,n){var i=typeof n;if(t=t.l,"boolean"==i||null==n)return t[n]?0:-1;"number"!=i&&"string"!=i&&(i="object");var r="number"==i?n:b+n;return t=(t=t[i])&&t[r],"object"==i?t&&-1<e(t,n)?0:-1:t?0:-1}function n(e){var t=this.l,n=typeof e;if("boolean"==n||null==e)t[e]=!0;else{"number"!=n&&"string"!=n&&(n="object");var i="number"==n?e:b+e,t=t[n]||(t[n]={});"object"==n?(t[i]||(t[i]=[])).push(e):t[i]=!0}}function i(e){return e.charCodeAt(0)}function r(e,t){for(var n=e.m,i=t.m,r=-1,o=n.length;++r<o;){var a=n[r],s=i[r];if(a!==s){if(a>s||"undefined"==typeof a)return 1;if(s>a||"undefined"==typeof s)return-1}}return e.n-t.n}function o(e){var t=-1,i=e.length,r=e[0],o=e[i/2|0],a=e[i-1];if(r&&"object"==typeof r&&o&&"object"==typeof o&&a&&"object"==typeof a)return!1;for(r=u(),r["false"]=r["null"]=r["true"]=r.undefined=!1,o=u(),o.k=e,o.l=r,o.push=n;++t<i;)o.push(e[t]);return o}function a(e){return"\\"+K[e]}function s(){return m.pop()||[]}function u(){return g.pop()||{k:null,l:null,m:null,"false":!1,n:0,"null":!1,number:null,object:null,push:null,string:null,"true":!1,undefined:!1,o:null}}function l(e){return"function"!=typeof e.toString&&"string"==typeof(e+"")}function c(e){e.length=0,m.length<w&&m.push(e)}function d(e){var t=e.l;t&&d(t),e.k=e.l=e.m=e.object=e.number=e.string=e.o=null,g.length<w&&g.push(e)}function f(e,t,n){t||(t=0),"undefined"==typeof n&&(n=e?e.length:0);var i=-1;n=n-t||0;for(var r=Array(0>n?0:n);++i<n;)r[i]=e[t+i];return r}function p(n){function m(e){return e&&"object"==typeof e&&!Hn(e)&&xn.call(e,"__wrapped__")?e:new g(e)}function g(e,t){this.__chain__=!!t,this.__wrapped__=e}function w(e){function t(){if(i){var e=f(i);kn.apply(e,arguments)}if(this instanceof t){var o=et(n.prototype),e=n.apply(o,e||arguments);return kt(e)?e:o}return n.apply(r,e||arguments)}var n=e[0],i=e[2],r=e[4];return Rn(t,e),t}function K(e,t,n,i,r){if(n){var o=n(e);if("undefined"!=typeof o)return o}if(!kt(e))return e;var a=mn.call(e);if(!X[a]||!zn.nodeClass&&l(e))return e;var u=Pn[a];switch(a){case L:case z:return new u(+e);case q:case V:return new u(e);case U:return o=u(e.source,D.exec(e)),o.lastIndex=e.lastIndex,o}if(a=Hn(e),t){var d=!i;i||(i=s()),r||(r=s());for(var p=i.length;p--;)if(i[p]==e)return r[p];o=a?u(e.length):{}}else o=a?f(e):Jn({},e);return a&&(xn.call(e,"index")&&(o.index=e.index),xn.call(e,"input")&&(o.input=e.input)),t?(i.push(e),r.push(o),(a?Kn:ni)(e,function(e,a){o[a]=K(e,t,n,i,r)}),d&&(c(i),c(r)),o):o}function et(e){return kt(e)?Fn(e):{}}function tt(e,t,n){if("function"!=typeof e)return Yt;if("undefined"==typeof t||!("prototype"in e))return e;var i=e.__bindData__;if("undefined"==typeof i&&(zn.funcNames&&(i=!e.name),i=i||!zn.funcDecomp,!i)){var r=_n.call(e);zn.funcNames||(i=!F.test(r)),i||(i=A.test(r),Rn(e,i))}if(!1===i||!0!==i&&1&i[1])return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,i){return e.call(t,n,i)};case 3:return function(n,i,r){return e.call(t,n,i,r)};case 4:return function(n,i,r,o){return e.call(t,n,i,r,o)}}return Vt(e,t)}function nt(e){function t(){var e=u?a:this;if(r){var h=f(r);kn.apply(h,arguments)}return(o||c)&&(h||(h=f(arguments)),o&&kn.apply(h,o),c&&h.length<s)?(i|=16,nt([n,d?i:-4&i,h,null,a,s])):(h||(h=arguments),l&&(n=e[p]),this instanceof t?(e=et(n.prototype),h=n.apply(e,h),kt(h)?h:e):n.apply(e,h))}var n=e[0],i=e[1],r=e[2],o=e[3],a=e[4],s=e[5],u=1&i,l=2&i,c=4&i,d=8&i,p=n;return Rn(t,e),t}function it(n,i){var r=-1,a=ht(),s=n?n.length:0,u=s>=_&&a===e,l=[];if(u){var c=o(i);c?(a=t,i=c):u=!1}for(;++r<s;)c=n[r],0>a(i,c)&&l.push(c);return u&&d(i),l}function ot(e,t,n,i){i=(i||0)-1;for(var r=e?e.length:0,o=[];++i<r;){var a=e[i];if(a&&"object"==typeof a&&"number"==typeof a.length&&(Hn(a)||yt(a))){t||(a=ot(a,t,n));var s=-1,u=a.length,l=o.length;for(o.length+=u;++s<u;)o[l++]=a[s]}else n||o.push(a)}return o}function at(e,t,n,i,r,o){if(n){var a=n(e,t);if("undefined"!=typeof a)return!!a}if(e===t)return 0!==e||1/e==1/t;if(e===e&&!(e&&Z[typeof e]||t&&Z[typeof t]))return!1;if(null==e||null==t)return e===t;var u=mn.call(e),d=mn.call(t);if(u==O&&(u=W),d==O&&(d=W),u!=d)return!1;switch(u){case L:case z:return+e==+t;case q:return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case U:case V:return e==un(t)}if(d=u==P,!d){var f=xn.call(e,"__wrapped__"),p=xn.call(t,"__wrapped__");if(f||p)return at(f?e.__wrapped__:e,p?t.__wrapped__:t,n,i,r,o);if(u!=W||!zn.nodeClass&&(l(e)||l(t)))return!1;if(u=!zn.argsObject&&yt(e)?an:e.constructor,f=!zn.argsObject&&yt(t)?an:t.constructor,u!=f&&!(xt(u)&&u instanceof u&&xt(f)&&f instanceof f)&&"constructor"in e&&"constructor"in t)return!1}for(u=!r,r||(r=s()),o||(o=s()),f=r.length;f--;)if(r[f]==e)return o[f]==t;var h=0,a=!0;if(r.push(e),o.push(t),d){if(f=e.length,h=t.length,(a=h==f)||i)for(;h--;)if(d=f,p=t[h],i)for(;d--&&!(a=at(e[d],p,n,i,r,o)););else if(!(a=at(e[h],p,n,i,r,o)))break}else ti(t,function(t,s,u){return xn.call(u,s)?(h++,a=xn.call(e,s)&&at(e[s],t,n,i,r,o)):void 0}),a&&!i&&ti(e,function(e,t,n){return xn.call(n,t)?a=-1<--h:void 0});return r.pop(),o.pop(),u&&(c(r),c(o)),a}function st(e,t,n,i,r){(Hn(t)?Mt:ni)(t,function(t,o){var a,s,u=t,l=e[o];if(t&&((s=Hn(t))||ii(t))){for(u=i.length;u--;)if(a=i[u]==t){l=r[u];break}if(!a){var c;n&&(u=n(l,t),c="undefined"!=typeof u)&&(l=u),c||(l=s?Hn(l)?l:[]:ii(l)?l:{}),i.push(t),r.push(l),c||st(l,t,n,i,r)}}else n&&(u=n(l,t),"undefined"==typeof u&&(u=t)),"undefined"!=typeof u&&(l=u);e[o]=l})}function ut(e,t){return e+bn(On()*(t-e+1))}function lt(n,i,r){var a=-1,u=ht(),l=n?n.length:0,f=[],p=!i&&l>=_&&u===e,h=r||p?s():f;for(p&&(h=o(h),u=t);++a<l;){var m=n[a],g=r?r(m,a,n):m;(i?!a||h[h.length-1]!==g:0>u(h,g))&&((r||p)&&h.push(g),f.push(m))}return p?(c(h.k),d(h)):r&&c(h),f}function ct(e){return function(t,n,i){var r={};if(n=m.createCallback(n,i,3),Hn(t)){i=-1;for(var o=t.length;++i<o;){var a=t[i];e(r,a,n(a,i,t),t)}}else Kn(t,function(t,i,o){e(r,t,n(t,i,o),o)});return r}}function dt(e,t,n,i,r,o){var a=1&t,s=4&t,u=16&t,l=32&t;if(!(2&t||xt(e)))throw new ln;u&&!n.length&&(t&=-17,u=n=!1),l&&!i.length&&(t&=-33,l=i=!1);var c=e&&e.__bindData__;return c&&!0!==c?(c=f(c),c[2]&&(c[2]=f(c[2])),c[3]&&(c[3]=f(c[3])),!a||1&c[1]||(c[4]=r),!a&&1&c[1]&&(t|=8),!s||4&c[1]||(c[5]=o),u&&kn.apply(c[2]||(c[2]=[]),n),l&&En.apply(c[3]||(c[3]=[]),i),c[1]|=t,dt.apply(null,c)):(1==t||17===t?w:nt)([e,t,n,i,r,o])}function ft(){G.h=N,G.b=G.c=G.g=G.i="",G.e="t",G.j=!0;for(var e,t=0;e=arguments[t];t++)for(var n in e)G[n]=e[n];t=G.a,G.d=/^[^,]+/.exec(t)[0],e=nn,t="return function("+t+"){",n=G;var i="var n,t="+n.d+",E="+n.e+";if(!t)return E;"+n.i+";";n.b?(i+="var u=t.length;n=-1;if("+n.b+"){",zn.unindexedChars&&(i+="if(s(t)){t=t.split('')}"),i+="while(++n<u){"+n.g+";}}else{"):zn.nonEnumArgs&&(i+="var u=t.length;n=-1;if(u&&p(t)){while(++n<u){n+='';"+n.g+";}}else{"),zn.enumPrototypes&&(i+="var G=typeof t=='function';"),zn.enumErrorProps&&(i+="var F=t===k||t instanceof Error;");var r=[];if(zn.enumPrototypes&&r.push('!(G&&n=="prototype")'),zn.enumErrorProps&&r.push('!(F&&(n=="message"||n=="name"))'),n.j&&n.f)i+="var C=-1,D=B[typeof t]&&v(t),u=D?D.length:0;while(++C<u){n=D[C];",r.length&&(i+="if("+r.join("&&")+"){"),i+=n.g+";",r.length&&(i+="}"),i+="}";else if(i+="for(n in t){",n.j&&r.push("m.call(t, n)"),r.length&&(i+="if("+r.join("&&")+"){"),i+=n.g+";",r.length&&(i+="}"),i+="}",zn.nonEnumShadows){for(i+="if(t!==A){var i=t.constructor,r=t===(i&&i.prototype),f=t===J?I:t===k?j:L.call(t),x=y[f];",k=0;7>k;k++)i+="n='"+n.h[k]+"';if((!(r&&x[n])&&m.call(t,n))",n.j||(i+="||(!x[n]&&t[n]!==A[n])"),i+="){"+n.g+"}";i+="}"}return(n.b||zn.nonEnumArgs)&&(i+="}"),i+=n.c+";return E",e("d,j,k,m,o,p,q,s,v,A,B,y,I,J,L",t+i+"}")(tt,R,dn,xn,y,yt,Hn,Ct,G.f,fn,Z,Ln,V,pn,mn)}function pt(e){return Yn[e]}function ht(){var t=(t=m.indexOf)===zt?e:t;return t}function mt(e){return"function"==typeof e&&gn.test(e)}function gt(e){var t,n;return!e||mn.call(e)!=W||(t=e.constructor,xt(t)&&!(t instanceof t))||!zn.argsClass&&yt(e)||!zn.nodeClass&&l(e)?!1:zn.ownLast?(ti(e,function(e,t,i){return n=xn.call(i,t),!1}),!1!==n):(ti(e,function(e,t){n=t}),"undefined"==typeof n||xn.call(e,n))}function vt(e){return Qn[e]}function yt(e){return e&&"object"==typeof e&&"number"==typeof e.length&&mn.call(e)==O||!1}function bt(e,t,n){var i=Wn(e),r=i.length;for(t=tt(t,n,3);r--&&(n=i[r],!1!==t(e[n],n,e)););return e}function _t(e){var t=[];return ti(e,function(e,n){xt(e)&&t.push(n)}),t.sort()}function wt(e){for(var t=-1,n=Wn(e),i=n.length,r={};++t<i;){var o=n[t];r[e[o]]=o}return r}function xt(e){return"function"==typeof e}function kt(e){return!(!e||!Z[typeof e])}function St(e){return"number"==typeof e||e&&"object"==typeof e&&mn.call(e)==q||!1}function Ct(e){return"string"==typeof e||e&&"object"==typeof e&&mn.call(e)==V||!1}function Tt(e){for(var t=-1,n=Wn(e),i=n.length,r=Jt(i);++t<i;)r[t]=e[n[t]];return r}function Et(e,t,n){var i=-1,r=ht(),o=e?e.length:0,a=!1;return n=(0>n?jn(0,o+n):n)||0,Hn(e)?a=-1<r(e,t,n):"number"==typeof o?a=-1<(Ct(e)?e.indexOf(t,n):r(e,t,n)):Kn(e,function(e){return++i<n?void 0:!(a=e===t)}),a}function Dt(e,t,n){var i=!0;if(t=m.createCallback(t,n,3),Hn(e)){n=-1;for(var r=e.length;++n<r&&(i=!!t(e[n],n,e)););}else Kn(e,function(e,n,r){return i=!!t(e,n,r)});return i}function Ft(e,t,n){var i=[];if(t=m.createCallback(t,n,3),Hn(e)){n=-1;for(var r=e.length;++n<r;){var o=e[n];t(o,n,e)&&i.push(o)}}else Kn(e,function(e,n,r){t(e,n,r)&&i.push(e)});return i}function It(e,t,n){if(t=m.createCallback(t,n,3),!Hn(e)){var i;return Kn(e,function(e,n,r){return t(e,n,r)?(i=e,!1):void 0}),i}n=-1;for(var r=e.length;++n<r;){var o=e[n];if(t(o,n,e))return o}}function Mt(e,t,n){if(t&&"undefined"==typeof n&&Hn(e)){n=-1;for(var i=e.length;++n<i&&!1!==t(e[n],n,e););}else Kn(e,t,n);return e}function Bt(e,t,n){var i=e,r=e?e.length:0;if(t=t&&"undefined"==typeof n?t:tt(t,n,3),Hn(e))for(;r--&&!1!==t(e[r],r,e););else{if("number"!=typeof r)var o=Wn(e),r=o.length;else zn.unindexedChars&&Ct(e)&&(i=e.split(""));Kn(e,function(e,n,a){return n=o?o[--r]:--r,t(i[n],n,a)})}return e}function At(e,t,n){var i=-1,r=e?e.length:0,o=Jt("number"==typeof r?r:0);if(t=m.createCallback(t,n,3),Hn(e))for(;++i<r;)o[i]=t(e[i],i,e);else Kn(e,function(e,n,r){o[++i]=t(e,n,r)});return o}function jt(e,t,n){var r=-1/0,o=r;if("function"!=typeof t&&n&&n[t]===e&&(t=null),null==t&&Hn(e)){n=-1;for(var a=e.length;++n<a;){var s=e[n];s>o&&(o=s)}}else t=null==t&&Ct(e)?i:m.createCallback(t,n,3),Kn(e,function(e,n,i){n=t(e,n,i),n>r&&(r=n,o=e)});return o}function $t(e,t,n,i){var r=3>arguments.length;if(t=m.createCallback(t,i,4),Hn(e)){var o=-1,a=e.length;for(r&&(n=e[++o]);++o<a;)n=t(n,e[o],o,e)}else Kn(e,function(e,i,o){n=r?(r=!1,e):t(n,e,i,o)});return n}function Nt(e,t,n,i){var r=3>arguments.length;return t=m.createCallback(t,i,4),Bt(e,function(e,i,o){n=r?(r=!1,e):t(n,e,i,o)}),n}function Ot(e){var t=-1,n=e?e.length:0,i=Jt("number"==typeof n?n:0);return Mt(e,function(e){var n=ut(0,++t);i[t]=i[n],i[n]=e}),i}function Pt(e,t,n){var i;if(t=m.createCallback(t,n,3),Hn(e)){n=-1;for(var r=e.length;++n<r&&!(i=t(e[n],n,e)););}else Kn(e,function(e,n,r){return!(i=t(e,n,r))});return!!i}function Lt(e,t,n){var i=0,r=e?e.length:0;if("number"!=typeof t&&null!=t){var o=-1;for(t=m.createCallback(t,n,3);++o<r&&t(e[o],o,e);)i++}else if(i=t,null==i||n)return e?e[0]:h;return f(e,0,$n(jn(0,i),r))}function zt(t,n,i){if("number"==typeof i){var r=t?t.length:0;i=0>i?jn(0,r+i):i||0}else if(i)return i=Ht(t,n),t[i]===n?i:-1;return e(t,n,i)}function Rt(e,t,n){if("number"!=typeof t&&null!=t){var i=0,r=-1,o=e?e.length:0;for(t=m.createCallback(t,n,3);++r<o&&t(e[r],r,e);)i++}else i=null==t||n?1:jn(0,t);return f(e,i)}function Ht(e,t,n,i){var r=0,o=e?e.length:r;for(n=n?m.createCallback(n,i,1):Yt,t=n(t);o>r;)i=r+o>>>1,n(e[i])<t?r=i+1:o=i;return r}function qt(e,t,n,i){return"boolean"!=typeof t&&null!=t&&(i=n,n="function"!=typeof t&&i&&i[t]===e?null:t,t=!1),null!=n&&(n=m.createCallback(n,i,3)),lt(e,t,n)}function Wt(){for(var e=1<arguments.length?arguments:arguments[0],t=-1,n=e?jt(si(e,"length")):0,i=Jt(0>n?0:n);++t<n;)i[t]=si(e,t);return i}function Ut(e,t){var n=-1,i=e?e.length:0,r={};for(t||!i||Hn(e[0])||(t=[]);++n<i;){var o=e[n];t?r[o]=t[n]:o&&(r[o[0]]=o[1])}return r}function Vt(e,t){return 2<arguments.length?dt(e,17,f(arguments,2),null,t):dt(e,1,null,null,t)}function Xt(e,t,n){var i,r,o,a,s,u,l,c=0,d=!1,f=!0;if(!xt(e))throw new ln;if(t=jn(0,t)||0,!0===n)var p=!0,f=!1;else kt(n)&&(p=n.leading,d="maxWait"in n&&(jn(t,n.maxWait)||0),f="trailing"in n?n.trailing:f);var m=function(){var n=t-(ui()-a);n>0?u=Cn(m,n):(r&&yn(r),n=l,r=u=l=h,n&&(c=ui(),o=e.apply(s,i),u||r||(i=s=null)))},g=function(){u&&yn(u),r=u=l=h,(f||d!==t)&&(c=ui(),o=e.apply(s,i),u||r||(i=s=null))};return function(){if(i=arguments,a=ui(),s=this,l=f&&(u||!p),!1===d)var n=p&&!u;else{r||p||(c=a);var h=d-(a-c),v=0>=h;v?(r&&(r=yn(r)),c=a,o=e.apply(s,i)):r||(r=Cn(g,h))}return v&&u?u=yn(u):u||t===d||(u=Cn(m,t)),n&&(v=!0,o=e.apply(s,i)),!v||u||r||(i=s=null),o}}function Yt(e){return e}function Qt(e,t,n){var i=!0,r=t&&_t(t);t&&(n||r.length)||(null==n&&(n=t),o=g,t=e,e=m,r=_t(t)),!1===n?i=!1:kt(n)&&"chain"in n&&(i=n.chain);var o=e,a=xt(o);Mt(r,function(n){var r=e[n]=t[n];a&&(o.prototype[n]=function(){var t=this.__chain__,n=this.__wrapped__,a=[n];if(kn.apply(a,arguments),a=r.apply(e,a),i||t){if(n===a&&kt(a))return this;a=new o(a),a.__chain__=t}return a})})}function Gt(){}function Zt(e){return function(t){return t[e]}}function Kt(){return this.__wrapped__}n=n?rt.defaults(J.Object(),n,rt.pick(J,$)):J;var Jt=n.Array,en=n.Boolean,tn=n.Date,nn=n.Function,rn=n.Math,on=n.Number,an=n.Object,sn=n.RegExp,un=n.String,ln=n.TypeError,cn=[],dn=n.Error.prototype,fn=an.prototype,pn=un.prototype,hn=n._,mn=fn.toString,gn=sn("^"+un(mn).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),vn=rn.ceil,yn=n.clearTimeout,bn=rn.floor,_n=nn.prototype.toString,wn=mt(wn=an.getPrototypeOf)&&wn,xn=fn.hasOwnProperty,kn=cn.push,Sn=fn.propertyIsEnumerable,Cn=n.setTimeout,Tn=cn.splice,En=cn.unshift,Dn=function(){try{var e={},t=mt(t=an.defineProperty)&&t,n=t(e,e,e)&&t}catch(i){}return n}(),Fn=mt(Fn=an.create)&&Fn,In=mt(In=Jt.isArray)&&In,Mn=n.isFinite,Bn=n.isNaN,An=mt(An=an.keys)&&An,jn=rn.max,$n=rn.min,Nn=n.parseInt,On=rn.random,Pn={};Pn[P]=Jt,Pn[L]=en,Pn[z]=tn,Pn[H]=nn,Pn[W]=an,Pn[q]=on,Pn[U]=sn,Pn[V]=un;var Ln={};Ln[P]=Ln[z]=Ln[q]={constructor:!0,toLocaleString:!0,toString:!0,valueOf:!0},Ln[L]=Ln[V]={constructor:!0,toString:!0,valueOf:!0},Ln[R]=Ln[H]=Ln[U]={constructor:!0,toString:!0},Ln[W]={constructor:!0},function(){for(var e=N.length;e--;){var t,n=N[e];for(t in Ln)xn.call(Ln,t)&&!xn.call(Ln[t],n)&&(Ln[t][n]=!1)}}(),g.prototype=m.prototype;var zn=m.support={};!function(){var e=function(){this.x=1},t={0:1,length:1},i=[];e.prototype={valueOf:1,y:1};for(var r in new e)i.push(r);for(r in arguments);zn.argsClass=mn.call(arguments)==O,zn.argsObject=arguments.constructor==an&&!(arguments instanceof Jt),zn.enumErrorProps=Sn.call(dn,"message")||Sn.call(dn,"name"),zn.enumPrototypes=Sn.call(e,"prototype"),zn.funcDecomp=!mt(n.WinRTError)&&A.test(p),zn.funcNames="string"==typeof nn.name,zn.nonEnumArgs=0!=r,zn.nonEnumShadows=!/valueOf/.test(i),zn.ownLast="x"!=i[0],zn.spliceObjects=(cn.splice.call(t,0,1),!t[0]),zn.unindexedChars="xx"!="x"[0]+an("x")[0];try{zn.nodeClass=!(mn.call(document)==W&&!({toString:0}+""))}catch(o){zn.nodeClass=!0}}(1),m.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:I,variable:"",imports:{_:m}},Fn||(et=function(){function e(){}return function(t){if(kt(t)){e.prototype=t;var i=new e;e.prototype=null}return i||n.Object()}}());var Rn=Dn?function(e,t){Q.value=t,Dn(e,"__bindData__",Q)}:Gt;zn.argsClass||(yt=function(e){return e&&"object"==typeof e&&"number"==typeof e.length&&xn.call(e,"callee")&&!Sn.call(e,"callee")||!1});var Hn=In||function(e){return e&&"object"==typeof e&&"number"==typeof e.length&&mn.call(e)==P||!1},qn=ft({a:"z",e:"[]",i:"if(!(B[typeof z]))return E",g:"E.push(n)"}),Wn=An?function(e){return kt(e)?zn.enumPrototypes&&"function"==typeof e||zn.nonEnumArgs&&e.length&&yt(e)?qn(e):An(e):[]}:qn,Un={a:"g,e,K",i:"e=e&&typeof K=='undefined'?e:d(e,K,3)",b:"typeof u=='number'",v:Wn,g:"if(e(t[n],n,g)===false)return E"},Vn={a:"z,H,l",i:"var a=arguments,b=0,c=typeof l=='number'?2:a.length;while(++b<c){t=a[b];if(t&&B[typeof t]){",v:Wn,g:"if(typeof E[n]=='undefined')E[n]=t[n]",c:"}}"},Xn={i:"if(!B[typeof t])return E;"+Un.i,b:!1},Yn={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Qn=wt(Yn),Gn=sn("("+Wn(Qn).join("|")+")","g"),Zn=sn("["+Wn(Yn).join("")+"]","g"),Kn=ft(Un),Jn=ft(Vn,{i:Vn.i.replace(";",";if(c>3&&typeof a[c-2]=='function'){var e=d(a[--c-1],a[c--],2)}else if(c>2&&typeof a[c-1]=='function'){e=a[--c]}"),g:"E[n]=e?e(E[n],t[n]):t[n]"}),ei=ft(Vn),ti=ft(Un,Xn,{j:!1}),ni=ft(Un,Xn);xt(/x/)&&(xt=function(e){return"function"==typeof e&&mn.call(e)==H});var ii=wn?function(e){if(!e||mn.call(e)!=W||!zn.argsClass&&yt(e))return!1;var t=e.valueOf,n=mt(t)&&(n=wn(t))&&wn(n);return n?e==n||wn(e)==n:gt(e)}:gt,ri=ct(function(e,t,n){xn.call(e,n)?e[n]++:e[n]=1}),oi=ct(function(e,t,n){(xn.call(e,n)?e[n]:e[n]=[]).push(t)}),ai=ct(function(e,t,n){e[n]=t}),si=At,ui=mt(ui=tn.now)&&ui||function(){return(new tn).getTime()},li=8==Nn(x+"08")?Nn:function(e,t){return Nn(Ct(e)?e.replace(M,""):e,t||0)};return m.after=function(e,t){if(!xt(t))throw new ln;return function(){return 1>--e?t.apply(this,arguments):void 0}},m.assign=Jn,m.at=function(e){var t=arguments,n=-1,i=ot(t,!0,!1,1),t=t[2]&&t[2][t[1]]===e?1:i.length,r=Jt(t);for(zn.unindexedChars&&Ct(e)&&(e=e.split(""));++n<t;)r[n]=e[i[n]];return r},m.bind=Vt,m.bindAll=function(e){for(var t=1<arguments.length?ot(arguments,!0,!1,1):_t(e),n=-1,i=t.length;++n<i;){var r=t[n];e[r]=dt(e[r],1,null,null,e)}return e},m.bindKey=function(e,t){return 2<arguments.length?dt(t,19,f(arguments,2),null,e):dt(t,3,null,null,e)},m.chain=function(e){return e=new g(e),e.__chain__=!0,e},m.compact=function(e){for(var t=-1,n=e?e.length:0,i=[];++t<n;){var r=e[t];r&&i.push(r)}return i},m.compose=function(){for(var e=arguments,t=e.length;t--;)if(!xt(e[t]))throw new ln;return function(){for(var t=arguments,n=e.length;n--;)t=[e[n].apply(this,t)];return t[0]}},m.constant=function(e){return function(){return e}},m.countBy=ri,m.create=function(e,t){var n=et(e);return t?Jn(n,t):n},m.createCallback=function(e,t,n){var i=typeof e;if(null==e||"function"==i)return tt(e,t,n);if("object"!=i)return Zt(e);var r=Wn(e),o=r[0],a=e[o];return 1!=r.length||a!==a||kt(a)?function(t){for(var n=r.length,i=!1;n--&&(i=at(t[r[n]],e[r[n]],null,!0)););return i}:function(e){return e=e[o],a===e&&(0!==a||1/a==1/e)}},m.curry=function(e,t){return t="number"==typeof t?t:+t||e.length,dt(e,4,null,null,null,t)},m.debounce=Xt,m.defaults=ei,m.defer=function(e){if(!xt(e))throw new ln;var t=f(arguments,1);return Cn(function(){e.apply(h,t)},1)},m.delay=function(e,t){if(!xt(e))throw new ln;var n=f(arguments,2);return Cn(function(){e.apply(h,n)},t)},m.difference=function(e){return it(e,ot(arguments,!0,!0,1))},m.filter=Ft,m.flatten=function(e,t,n,i){return"boolean"!=typeof t&&null!=t&&(i=n,n="function"!=typeof t&&i&&i[t]===e?null:t,t=!1),null!=n&&(e=At(e,n,i)),ot(e,t)},m.forEach=Mt,m.forEachRight=Bt,m.forIn=ti,m.forInRight=function(e,t,n){var i=[];ti(e,function(e,t){i.push(t,e)});var r=i.length;for(t=tt(t,n,3);r--&&!1!==t(i[r--],i[r],e););return e},m.forOwn=ni,m.forOwnRight=bt,m.functions=_t,m.groupBy=oi,m.indexBy=ai,m.initial=function(e,t,n){var i=0,r=e?e.length:0;if("number"!=typeof t&&null!=t){var o=r;for(t=m.createCallback(t,n,3);o--&&t(e[o],o,e);)i++}else i=null==t||n?1:t||i;return f(e,0,$n(jn(0,r-i),r))},m.intersection=function(){for(var n=[],i=-1,r=arguments.length,a=s(),u=ht(),l=u===e,f=s();++i<r;){var p=arguments[i];(Hn(p)||yt(p))&&(n.push(p),a.push(l&&p.length>=_&&o(i?n[i]:f)))}var l=n[0],h=-1,m=l?l.length:0,g=[];e:for(;++h<m;){var v=a[0],p=l[h];if(0>(v?t(v,p):u(f,p))){for(i=r,(v||f).push(p);--i;)if(v=a[i],0>(v?t(v,p):u(n[i],p)))continue e;g.push(p)}}for(;r--;)(v=a[r])&&d(v);return c(a),c(f),g},m.invert=wt,m.invoke=function(e,t){var n=f(arguments,2),i=-1,r="function"==typeof t,o=e?e.length:0,a=Jt("number"==typeof o?o:0);return Mt(e,function(e){a[++i]=(r?t:e[t]).apply(e,n)}),a},m.keys=Wn,m.map=At,m.mapValues=function(e,t,n){var i={};return t=m.createCallback(t,n,3),ni(e,function(e,n,r){i[n]=t(e,n,r)}),i},m.max=jt,m.memoize=function(e,t){if(!xt(e))throw new ln;var n=function(){var i=n.cache,r=t?t.apply(this,arguments):b+arguments[0];return xn.call(i,r)?i[r]:i[r]=e.apply(this,arguments)};return n.cache={},n},m.merge=function(e){var t=arguments,n=2;if(!kt(e))return e;if("number"!=typeof t[2]&&(n=t.length),n>3&&"function"==typeof t[n-2])var i=tt(t[--n-1],t[n--],2);else n>2&&"function"==typeof t[n-1]&&(i=t[--n]);for(var t=f(arguments,1,n),r=-1,o=s(),a=s();++r<n;)st(e,t[r],i,o,a);return c(o),c(a),e},m.min=function(e,t,n){var r=1/0,o=r;if("function"!=typeof t&&n&&n[t]===e&&(t=null),null==t&&Hn(e)){n=-1;for(var a=e.length;++n<a;){var s=e[n];o>s&&(o=s)}}else t=null==t&&Ct(e)?i:m.createCallback(t,n,3),Kn(e,function(e,n,i){n=t(e,n,i),r>n&&(r=n,o=e)});return o},m.omit=function(e,t,n){var i={};if("function"!=typeof t){var r=[];ti(e,function(e,t){r.push(t)});for(var r=it(r,ot(arguments,!0,!1,1)),o=-1,a=r.length;++o<a;){var s=r[o];i[s]=e[s]}}else t=m.createCallback(t,n,3),ti(e,function(e,n,r){t(e,n,r)||(i[n]=e)});return i},m.once=function(e){var t,n;if(!xt(e))throw new ln;return function(){return t?n:(t=!0,n=e.apply(this,arguments),e=null,n)}},m.pairs=function(e){for(var t=-1,n=Wn(e),i=n.length,r=Jt(i);++t<i;){var o=n[t];r[t]=[o,e[o]]}return r},m.partial=function(e){return dt(e,16,f(arguments,1))},m.partialRight=function(e){return dt(e,32,null,f(arguments,1))},m.pick=function(e,t,n){var i={};if("function"!=typeof t)for(var r=-1,o=ot(arguments,!0,!1,1),a=kt(e)?o.length:0;++r<a;){var s=o[r];s in e&&(i[s]=e[s])}else t=m.createCallback(t,n,3),ti(e,function(e,n,r){t(e,n,r)&&(i[n]=e)});return i},m.pluck=si,m.property=Zt,m.pull=function(e){for(var t=arguments,n=0,i=t.length,r=e?e.length:0;++n<i;)for(var o=-1,a=t[n];++o<r;)e[o]===a&&(Tn.call(e,o--,1),r--);return e},m.range=function(e,t,n){e=+e||0,n="number"==typeof n?n:+n||1,null==t&&(t=e,e=0);var i=-1;t=jn(0,vn((t-e)/(n||1)));for(var r=Jt(t);++i<t;)r[i]=e,e+=n;return r},m.reject=function(e,t,n){return t=m.createCallback(t,n,3),Ft(e,function(e,n,i){return!t(e,n,i)})},m.remove=function(e,t,n){var i=-1,r=e?e.length:0,o=[];for(t=m.createCallback(t,n,3);++i<r;)n=e[i],t(n,i,e)&&(o.push(n),Tn.call(e,i--,1),r--);return o},m.rest=Rt,m.shuffle=Ot,m.sortBy=function(e,t,n){var i=-1,o=Hn(t),a=e?e.length:0,l=Jt("number"==typeof a?a:0);for(o||(t=m.createCallback(t,n,3)),Mt(e,function(e,n,r){var a=l[++i]=u();o?a.m=At(t,function(t){return e[t]}):(a.m=s())[0]=t(e,n,r),a.n=i,a.o=e}),a=l.length,l.sort(r);a--;)e=l[a],l[a]=e.o,o||c(e.m),d(e);return l},m.tap=function(e,t){return t(e),e},m.throttle=function(e,t,n){var i=!0,r=!0;if(!xt(e))throw new ln;return!1===n?i=!1:kt(n)&&(i="leading"in n?n.leading:i,r="trailing"in n?n.trailing:r),Y.leading=i,Y.maxWait=t,Y.trailing=r,Xt(e,t,Y)},m.times=function(e,t,n){e=-1<(e=+e)?e:0;var i=-1,r=Jt(e);for(t=tt(t,n,1);++i<e;)r[i]=t(i);return r},m.toArray=function(e){return e&&"number"==typeof e.length?zn.unindexedChars&&Ct(e)?e.split(""):f(e):Tt(e)},m.transform=function(e,t,n,i){var r=Hn(e);if(null==n)if(r)n=[];else{var o=e&&e.constructor;n=et(o&&o.prototype)}return t&&(t=m.createCallback(t,i,4),(r?Kn:ni)(e,function(e,i,r){return t(n,e,i,r)})),n},m.union=function(){return lt(ot(arguments,!0,!0))},m.uniq=qt,m.values=Tt,m.where=Ft,m.without=function(e){return it(e,f(arguments,1))},m.wrap=function(e,t){return dt(t,16,[e])},m.xor=function(){for(var e=-1,t=arguments.length;++e<t;){var n=arguments[e];if(Hn(n)||yt(n))var i=i?lt(it(i,n).concat(it(n,i))):n}return i||[]},m.zip=Wt,m.zipObject=Ut,m.collect=At,m.drop=Rt,m.each=Mt,m.eachRight=Bt,m.extend=Jn,m.methods=_t,m.object=Ut,m.select=Ft,m.tail=Rt,m.unique=qt,m.unzip=Wt,Qt(m),m.clone=function(e,t,n,i){return"boolean"!=typeof t&&null!=t&&(i=n,n=t,t=!1),K(e,t,"function"==typeof n&&tt(n,i,1))},m.cloneDeep=function(e,t,n){return K(e,!0,"function"==typeof t&&tt(t,n,1))},m.contains=Et,m.escape=function(e){return null==e?"":un(e).replace(Zn,pt)},m.every=Dt,m.find=It,m.findIndex=function(e,t,n){var i=-1,r=e?e.length:0;for(t=m.createCallback(t,n,3);++i<r;)if(t(e[i],i,e))return i;return-1},m.findKey=function(e,t,n){var i;return t=m.createCallback(t,n,3),ni(e,function(e,n,r){return t(e,n,r)?(i=n,!1):void 0}),i},m.findLast=function(e,t,n){var i;return t=m.createCallback(t,n,3),Bt(e,function(e,n,r){return t(e,n,r)?(i=e,!1):void 0}),i},m.findLastIndex=function(e,t,n){var i=e?e.length:0;for(t=m.createCallback(t,n,3);i--;)if(t(e[i],i,e))return i;return-1},m.findLastKey=function(e,t,n){var i;return t=m.createCallback(t,n,3),bt(e,function(e,n,r){return t(e,n,r)?(i=n,!1):void 0}),i},m.has=function(e,t){return e?xn.call(e,t):!1},m.identity=Yt,m.indexOf=zt,m.isArguments=yt,m.isArray=Hn,m.isBoolean=function(e){return!0===e||!1===e||e&&"object"==typeof e&&mn.call(e)==L||!1},m.isDate=function(e){return e&&"object"==typeof e&&mn.call(e)==z||!1},m.isElement=function(e){return e&&1===e.nodeType||!1},m.isEmpty=function(e){var t=!0;if(!e)return t;var n=mn.call(e),i=e.length;return n==P||n==V||(zn.argsClass?n==O:yt(e))||n==W&&"number"==typeof i&&xt(e.splice)?!i:(ni(e,function(){return t=!1}),t)},m.isEqual=function(e,t,n,i){return at(e,t,"function"==typeof n&&tt(n,i,2))},m.isFinite=function(e){return Mn(e)&&!Bn(parseFloat(e))},m.isFunction=xt,m.isNaN=function(e){return St(e)&&e!=+e},m.isNull=function(e){return null===e},m.isNumber=St,m.isObject=kt,m.isPlainObject=ii,m.isRegExp=function(e){return e&&Z[typeof e]&&mn.call(e)==U||!1},m.isString=Ct,m.isUndefined=function(e){return"undefined"==typeof e},m.lastIndexOf=function(e,t,n){var i=e?e.length:0;for("number"==typeof n&&(i=(0>n?jn(0,i+n):$n(n,i-1))+1);i--;)if(e[i]===t)return i;return-1},m.mixin=Qt,m.noConflict=function(){return n._=hn,this},m.noop=Gt,m.now=ui,m.parseInt=li,m.random=function(e,t,n){var i=null==e,r=null==t;return null==n&&("boolean"==typeof e&&r?(n=e,e=1):r||"boolean"!=typeof t||(n=t,r=!0)),i&&r&&(t=1),e=+e||0,r?(t=e,e=0):t=+t||0,n||e%1||t%1?(n=On(),$n(e+n*(t-e+parseFloat("1e-"+((n+"").length-1))),t)):ut(e,t)},m.reduce=$t,m.reduceRight=Nt,m.result=function(e,t){if(e){var n=e[t];return xt(n)?e[t]():n}},m.runInContext=p,m.size=function(e){var t=e?e.length:0;return"number"==typeof t?t:Wn(e).length},m.some=Pt,m.sortedIndex=Ht,m.template=function(e,t,n){var i=m.templateSettings;e=un(e||""),n=ei({},n,i);var r,o=ei({},n.imports,i.imports),i=Wn(o),o=Tt(o),s=0,u=n.interpolate||B,l="__p+='",u=sn((n.escape||B).source+"|"+u.source+"|"+(u===I?E:B).source+"|"+(n.evaluate||B).source+"|$","g");e.replace(u,function(t,n,i,o,u,c){return i||(i=o),l+=e.slice(s,c).replace(j,a),n&&(l+="'+__e("+n+")+'"),u&&(r=!0,l+="';"+u+";\n__p+='"),i&&(l+="'+((__t=("+i+"))==null?'':__t)+'"),s=c+t.length,t}),l+="';",u=n=n.variable,u||(n="obj",l="with("+n+"){"+l+"}"),l=(r?l.replace(S,""):l).replace(C,"$1").replace(T,"$1;"),l="function("+n+"){"+(u?"":n+"||("+n+"={});")+"var __t,__p='',__e=_.escape"+(r?",__j=Array.prototype.join;function print(){__p+=__j.call(arguments,'')}":";")+l+"return __p}";try{var c=nn(i,"return "+l).apply(h,o)}catch(d){throw d.source=l,d}return t?c(t):(c.source=l,c)},m.unescape=function(e){return null==e?"":un(e).replace(Gn,vt)},m.uniqueId=function(e){var t=++v;return un(null==e?"":e)+t},m.all=Dt,m.any=Pt,m.detect=It,m.findWhere=It,m.foldl=$t,m.foldr=Nt,m.include=Et,m.inject=$t,Qt(function(){var e={};return ni(m,function(t,n){m.prototype[n]||(e[n]=t)}),e}(),!1),m.first=Lt,m.last=function(e,t,n){var i=0,r=e?e.length:0;if("number"!=typeof t&&null!=t){var o=r;for(t=m.createCallback(t,n,3);o--&&t(e[o],o,e);)i++}else if(i=t,null==i||n)return e?e[r-1]:h;return f(e,jn(0,r-i))},m.sample=function(e,t,n){return e&&"number"!=typeof e.length?e=Tt(e):zn.unindexedChars&&Ct(e)&&(e=e.split("")),null==t||n?e?e[ut(0,e.length-1)]:h:(e=Ot(e),e.length=$n(jn(0,t),e.length),e)},m.take=Lt,m.head=Lt,ni(m,function(e,t){var n="sample"!==t;m.prototype[t]||(m.prototype[t]=function(t,i){var r=this.__chain__,o=e(this.__wrapped__,t,i);return r||null!=t&&(!i||n&&"function"==typeof t)?new g(o,r):o})}),m.VERSION="2.4.1",m.prototype.chain=function(){return this.__chain__=!0,this},m.prototype.toString=function(){return un(this.__wrapped__)},m.prototype.value=Kt,m.prototype.valueOf=Kt,Kn(["join","pop","shift"],function(e){var t=cn[e];m.prototype[e]=function(){var e=this.__chain__,n=t.apply(this.__wrapped__,arguments);return e?new g(n,e):n}}),Kn(["push","reverse","sort","unshift"],function(e){var t=cn[e];m.prototype[e]=function(){return t.apply(this.__wrapped__,arguments),this
}}),Kn(["concat","slice","splice"],function(e){var t=cn[e];m.prototype[e]=function(){return new g(t.apply(this.__wrapped__,arguments),this.__chain__)}}),zn.spliceObjects||Kn(["pop","shift","splice"],function(e){var t=cn[e],n="splice"==e;m.prototype[e]=function(){var e=this.__chain__,i=this.__wrapped__,r=t.apply(i,arguments);return 0===i.length&&delete i[0],e||n?new g(r,e):r}}),m}var h,m=[],g=[],v=0,y={},b=+new Date+"",_=75,w=40,x=" 	\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000",S=/\b__p\+='';/g,C=/\b(__p\+=)''\+/g,T=/(__e\(.*?\)|\b__t\))\+'';/g,E=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,D=/\w*$/,F=/^\s*function[ \n\r\t]+\w/,I=/<%=([\s\S]+?)%>/g,M=RegExp("^["+x+"]*0+(?=.$)"),B=/($^)/,A=/\bthis\b/,j=/['\n\r\t\u2028\u2029\\]/g,$="Array Boolean Date Error Function Math Number Object RegExp String _ attachEvent clearTimeout isFinite isNaN parseInt setTimeout".split(" "),N="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),O="[object Arguments]",P="[object Array]",L="[object Boolean]",z="[object Date]",R="[object Error]",H="[object Function]",q="[object Number]",W="[object Object]",U="[object RegExp]",V="[object String]",X={};X[H]=!1,X[O]=X[P]=X[L]=X[z]=X[q]=X[W]=X[U]=X[V]=!0;var Y={leading:!1,maxWait:0,trailing:!1},Q={configurable:!1,enumerable:!1,value:null,writable:!1},G={a:"",b:null,c:"",d:"",e:"",v:null,g:"",h:null,support:null,i:"",j:!1},Z={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},K={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"},J=Z[typeof window]&&window||this,et=Z[typeof exports]&&exports&&!exports.nodeType&&exports,tt=Z[typeof module]&&module&&!module.nodeType&&module,nt=tt&&tt.exports===et&&et,it=Z[typeof global]&&global;!it||it.global!==it&&it.window!==it||(J=it);var rt=p();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(J._=rt,define(function(){return rt})):et&&tt?nt?(tt.exports=rt)._=rt:et._=rt:J._=rt}.call(this),window.ST=window.ST||{},ST.utils=function(e){function t(t,n){if(t.length<2)return-1;var i=e.findIndex(t,n);return-1!==i&&i<t.length-1?i+1:-1}function n(t,n){if(t.length<2)return-1;var i=e.findIndex(t,n);return-1!==i&&i>0?i-1:-1}function i(e,t){return(t+1)%e}function r(e,t){return 0===t?e-1:t-1}function o(t,n,i,r){r=r||!1;var o=e.clone(t,r);return o[n]=t[i],o[i]=t[n],o}function a(e){return[window.location.pathname,e].join("/").replace("//","/")}function s(e){return e.replace(/\[/g,"\\[").replace(/\]/g,"\\]")}function u(e){var t=["[name=",s(e),"]"].join("");return $(t)}function l(t){return t.reduce(function(t,n){return e.merge(t,n)},{})}function c(e){return function(){return!e.apply(null,arguments)}}function d(t,n){return Bacon.fromBinder(function(i){function r(){var o=Bacon.once(t).ajax();o.filter(n).onValue(function(e){i([new Bacon.Next(e),new Bacon.End])}),o.filter(c(n)).onValue(function(){e.delay(r,1e3)}),o.onError(function(e){i([new Bacon.Error(e),new Bacon.End])})}return r(),e.identity})}function f(t){return e.last(t.split(".")).toLowerCase()}function p(e){var t={jpg:"image/jpeg",jpeg:"image/jpeg",png:"image/png",gif:"image/gif"};return t[f(e)]}function h(t){var n=t.split("."),i=e.last(n).toLowerCase(),r=e.initial(n).join(".");return[m(r),i].join(".")}function m(e){return e.replace(/[^a-z0-9\-]/gi,"_").toLowerCase()}function g(e){return 10>e?"0"+e:e}function v(e){return[e.getFullYear(),g(e.getMonth()+1),g(e.getDate())].join("-")}function y(t,n,i){i=i||"div.wrapper";var r=e.template('<div class="flash-notifications"><div class="flash-<%= errorClass %> flash-notification"><div class="flash-icon <%= errorIcon %>"></div><div class="flash-text"><%= errorMsg %></div></div></div>'),o={notice:"ss-check",warning:"ss-info",error:"ss-alert"},a=$(r({errorMsg:t,errorClass:n,errorIcon:o[n]}));$(i).prepend(a).click(window.hideNotice)}return{findNextIndex:t,findPrevIndex:n,nextIndex:i,prevIndex:r,swapArrayElements:o,relativeUrl:a,jquerifyAttributeValue:s,findElementByName:u,objectsMerge:l,baconStreamFromAjaxPolling:d,contentTypeByFilename:p,stringToURLSafe:m,filenameToURLSafe:h,pad:g,toISODate:v,showError:y}}(_);var hideNotice=function(){$(".flash-notifications").fadeOut("slow")},directionsDisplay,directionsService,marker,geocoder,map,defaultCenter,infowindow,center,prefix,textfield,timer,currentDirections=null,initialLocation,helsinki,browserSupportFlag=new Boolean,transaction_type,listing_category=["all"],listing_tags=[],listing_search,listingCustomDropdownFieldOptions,locale,flagMarker,markers=[],markerContents=[],markersArr=[],showingMarker="",markerCluster=null;$.validator.addMethod("address_validator",function(e,t){var n=null;if(""==e)return!0;var i=t.id.split("_"),r="";r=i[0].match("person")?"person":i[0].match("community")?"community":i[0]+"_"+i[1];var o=$('input[id$="latitude"][id^='+r+"]").attr("value")||"";return n=""!=o?!0:!1}),$(function(){var e="#home-toolbar-show-filters",t="#home-toolbar-filters",n=$(e),i=$(t);n.click(function(){n.toggleClass("selected"),i.toggleClass("home-toolbar-filters-mobile-hidden")}),$("#filters").length&&$("#desktop-filters").length&&relocate(768,$("#filters"),$("#desktop-filters").get(0)),relocate(768,$("#header-menu-mobile-anchor"),$("#header-menu-desktop-anchor").get(0)),relocate(768,$("#header-user-mobile-anchor"),$("#header-user-desktop-anchor").get(0))}),window.ST=window.ST||{},window.ST.orderManager=function(e){function t(t,n){return function(i){var r=t(e,c(i)),a=n(e,c(i));return a>=0&&r>=0?o(a,r):void 0}}function n(e){var t=i(e.up,e.id),n=i(e.down,e.id),r=t.flatMap(d),o=n.flatMap(f);p.plug(r),p.plug(o)}function i(e,t){return e.clickE().doAction(".preventDefault").map(_.constant(t))}function r(e,t){var n=e.transition({y:t.height()}).promise(),i=t.transition({y:-1*e.height()}).promise();$.when(n,i).done(function(){$(e).before($(t)),t.transition({y:0,duration:0}),e.transition({y:0,duration:0})})}function o(t,n){var i=e[t],r=e[n];return e=l.swapArrayElements(e,t,n),Bacon.once({down:i,up:r,order:a()})}function a(){return _.map(e,"id")}function s(t){e.push(t),n(t)}function u(t){e=_.reject(e,c(t))}var l=ST.utils,c=_.curry(function(e,t){return t.id===e}),d=t(_.findIndex,l.findPrevIndex),f=t(l.findNextIndex,_.findIndex),p=new Bacon.Bus;return p.onValue(function(e){r(e.down.element,e.up.element)}),e.forEach(n),{add:s,remove:u,order:p.filter(_.isObject).toProperty({order:a()})}},window.ST=window.ST||{},window.ST.ajaxStatusIndicator=function(e,t,n,i){n=n||1e3,i=i||3e3;var r=t.map(function(){return!0}).mapError(function(){return!1}),o=e.flatMapLatest(function(){return Bacon.later(n,!0).toProperty(!1)}).toProperty(!1),a=function(e){return e===!0};return{loading:e,success:o.and(r).filter(a),error:o.and(r.not()).filter(a),idle:o.and(r).debounce(i)}},window.ST=window.ST||{},function(e){e.initializeExpirationNotice=function(e){$("#"+e).lightbox_me({modalCSS:{top:"5px"},zIndex:1e6,closeEsc:!1,closeClick:!1})}}(window.ST),window.ST=window.ST||{},window.ST.createCustomFieldOrder=function(e){var t=$(e).map(function(e,t){return{id:$(t).data("field-id"),element:$(t),up:$(".custom-fields-action-up",t),down:$(".custom-fields-action-down",t)}}).get(),n=window.ST.orderManager(t),i=n.order.changes().debounce(800).map(".order").skipDuplicates(_.isEqual).map(function(e){return{type:"POST",url:ST.utils.relativeUrl("order"),data:{order:e}}}),r=i.ajax(),o=window.ST.ajaxStatusIndicator(i,r);o.loading.onValue(function(){$("#custom-field-ajax-saving").show(),$("#custom-field-ajax-error").hide(),$("#custom-field-ajax-success").hide()}),o.success.onValue(function(){$("#custom-field-ajax-saving").hide(),$("#custom-field-ajax-success").show()}),o.error.onValue(function(){$("#custom-field-ajax-saving").hide(),$("#custom-field-ajax-error").show()}),o.idle.onValue(function(){$("#custom-field-ajax-success").fadeOut()})},window.ST.createCustomFieldOptionOrder=function(e){function t(e){return _(e).map("sortPriority").max().value()}var n=$(e).map(function(e,t){return{id:$(t).data("field-id"),element:$(t),sortPriority:Number($(t).find(".custom-field-hidden-sort-priority").val()),up:$(".custom-fields-action-up",t),down:$(".custom-fields-action-down",t)}}).get(),i=function(e){var t=e;return function(){return t+=1}}(t(n)),r=function(){var e=0;return function(){return e+=1}}(),o=window.ST.orderManager(n);o.order.changes().onValue(function(e){var t=e.up,n=e.down,i=t.element.find(".custom-field-hidden-sort-priority"),r=n.element.find(".custom-field-hidden-sort-priority"),o=r.val(),a=i.val();i.val(o),r.val(a)});var a=_.template($("#new-option-tmpl").html()),s=$("#options");return $("#custom-fields-add-option").click(function(e){e.preventDefault();var t="jsnew-"+r(),n=$(a({id:t,sortPriority:i()}));s.append(n);var o={id:t,element:n,up:$(".custom-fields-action-up",n),down:$(".custom-fields-action-down",n)};ST.newOptionAdded(),ST.customFieldOptionOrder.add(o),n.find("input").first().focus()}),{remove:o.remove,add:o.add}},window.ST.initializeCategoriesOrder=function(){var e=$(".top-level-category-container").map(function(e,t){return{id:$(t).data("id"),element:$(t),up:$(t).find(".top-level-category-row").find(".category-action-up"),down:$(t).find(".top-level-category-row").find(".category-action-down")}}).get(),t=window.ST.orderManager(e).order,n=$(".top-level-category-container").get().map(function(e){var t=$(".sub-category-row",e).map(function(e,t){return{id:$(t).data("id"),element:$(t),up:$(".category-action-up",t),down:$(".category-action-down",t)}}).get();return window.ST.orderManager(t).order}),i=[t].concat(n),r=Bacon.combineAsArray(i).changes().debounce(800).map(function(e){var t=e.map(function(e){return e.order});return _.flatten(t)}).skipDuplicates(_.isEqual).map(function(e){return{type:"POST",url:ST.utils.relativeUrl("order"),data:{order:e}}}),o=r.ajax(),a=window.ST.ajaxStatusIndicator(r,o);a.loading.onValue(function(){$("#category-ajax-saving").show(),$("#category-ajax-error").hide(),$("#category-ajax-success").hide()}),a.success.onValue(function(){$("#category-ajax-saving").hide(),$("#category-ajax-success").show()}),a.error.onValue(function(){$("#category-ajax-saving").hide(),$("#category-ajax-error").show()}),a.idle.onValue(function(){$("#category-ajax-success").fadeOut()})},window.ST=window.ST||{},window.ST.initializeManageMembers=function(){function e(e){var t={};return t[$(e).val()]=!!$(e).attr("checked"),t}function t(t,n,i,r){var o=$(t).toArray().map(function(t){return $(t).asEventStream("change").map(function(t){return e(t.target)}).toProperty(e(t))}),a=Bacon.combineAsArray(o).changes().debounce(800).skipDuplicates(_.isEqual).map(function(e){function t(e){return _.values(e)[0]}var o=_.filter(e,t),a=_.reject(e,t),s={};return s[i]=_.keys(ST.utils.objectsMerge(o)),s[r]=_.keys(ST.utils.objectsMerge(a)),{type:"POST",url:ST.utils.relativeUrl(n),data:s}});return a}var n=t(".admin-members-can-post-listings","posting_allowed","allowed_to_post","disallowed_to_post"),i=t(".admin-members-is-admin","promote_admin","add_admin","remove_admin"),r=n.merge(i),o=r.ajax().endOnError(),a=window.ST.ajaxStatusIndicator(r,o);a.loading.onValue(function(){$(".ajax-update-notification").show(),$("#admin-members-saving-posting-allowed").show(),$("#admin-members-error-posting-allowed").hide(),$("#admin-members-saved-posting-allowed").hide()}),a.success.onValue(function(){$("#admin-members-saving-posting-allowed").hide(),$("#admin-members-saved-posting-allowed").show()}),a.error.onValue(function(){$("#admin-members-saving-posting-allowed").hide(),$("#admin-members-error-posting-allowed").show()}),a.idle.onValue(function(){$(".ajax-update-notification").fadeOut()})},window.ST=window.ST||{},window.ST.createMenuLinksOrder=function(e){function t(){var e=$("#menu-links-table"),t=$("#menu-links-empty");a>0?(e.show(),t.hide()):(e.hide(),t.show())}function n(e){$(".menu-link-remove",e.element).click(function(){e.element.remove(),s.remove(e.id),a--,t()})}var i=$("#menu-links"),r=_.template($("#new-menu-link-tmpl").html()),o=$(e).map(function(e,t){return{id:$(t).data("field-id"),element:$(t),up:$(".menu-link-action-up",t),down:$(".menu-link-action-down",t)}}).get(),a=o.length;t();var s=window.ST.orderManager(o);o.forEach(n),$("#menu-links-add").click(function(e){e.preventDefault();var o=_.uniqueId("jsnew-"),u=$(r({id:o}));i.append(u);var l={id:o,element:u,up:$(".menu-link-action-up",u),down:$(".menu-link-action-down",u)};s.add(l),n(l),u.find("input").first().focus(),a++,t()}),$("#menu-links-form").validate()},window.ST=window.ST||{},function(e){e.initializeTransactionAgreementFields=function(){var e=$("#community_transaction_agreement_checkbox"),t=$(".transaction-agreement-modal"),n=e.is(":checked");t.prop("disabled",!n).toggleClass("required",n).toggleClass("disabled",!n),e.click(function(){t.prop("disabled",!this.checked).toggleClass("required",this.checked).toggleClass("disabled",!this.checked)}),$("#edit_community").validate()}}(window.ST),window.ST=window.ST||{},window.ST.paymentMath=function(){function e(e){return parseFloat(e.replace(",","."))}function t(e){return"number"!=typeof e||isNaN(e)?"-":e.toFixed(2)}function n(e,t,n){n=n||0;var i=e*t/100;return Math.max(i,n)}return{parseFloatFromFieldValue:e,displayMoney:t,totalCommission:n}}(),$(function(){function e(){n.forEach(function(e){e.close()})}function t(t){function n(){var e=a.offset(),t=e.top+a.outerHeight(),n=e.left;if("right"===s){var i=n-(o.outerWidth()-a.outerWidth());o.css("left",i)}else o.css("left",n);o.css("top",t)}function i(){e(),"absolute"===u&&n(),o.removeClass("hidden"),t.addClass("toggled"),l=r}function r(){o.addClass("hidden"),t.removeClass("toggled"),l=i}var o=$(t.attr("data-toggle")),a=$(t.attr("data-toggle-anchor-element")||t),s=t.attr("data-toggle-anchor-position")||"left",u=t.attr("data-toggle-position")||"relative",l=i;return t.click(function(e){e.stopPropagation(),l()}),o.click(function(e){e.stopPropagation()}),{close:r}}var n=[];n=_.toArray($(".toggle")).map(function(e){return t($(e))}),$(document).click(function(){e()})}),/*! $.noUiSlider
 @version 5.0.0
 @author Leon Gersen https://twitter.com/LeonGersen
 @license WTFPL http://www.wtfpl.net/about/
 @documentation http://refreshless.com/nouislider/
*/
function(e){"use strict";if(e.zepto&&!e.fn.removeData)throw new ReferenceError("Zepto is loaded without the data module.");e.fn.noUiSlider=function(t,n){function i(e,t){return 100*t/(e[1]-e[0])}function r(e,t){return i(e,e[0]<0?t+Math.abs(e[0]):t-e[0])}function o(e,t){return t*(e[1]-e[0])/100+e[0]}function a(t){return t instanceof e||e.zepto&&e.zepto.isZ(t)}function s(e){return!isNaN(parseFloat(e))&&isFinite(e)}function u(t,n){e.isArray(t)||(t=[t]),e.each(t,function(){"function"==typeof this&&this.call(n)})}function l(t,n){return function(){var i=[null,null];i[n]=e(this).val(),t.val(i,!0)}}function c(e,t){return Math.round(e/t)*t}function d(e,t){return e=e.toFixed(t.decimals),0===parseFloat(e)&&(e=e.replace("-0","0")),e.replace(".",t.serialization.mark)}function f(e,t,n){if(1===e.length)return e[0];var i=e[0].offset()[n]+e[1].offset()[n];return e[i/2>t?0:1]}function p(e,t){return parseFloat(e.toFixed(t))}function h(t){t.preventDefault();var n,i,r=0===t.type.indexOf("touch"),o=0===t.type.indexOf("mouse"),a=0===t.type.indexOf("pointer"),s=t;return 0===t.type.indexOf("MSPointer")&&(a=!0),t.originalEvent&&(t=t.originalEvent),r&&(n=t.changedTouches[0].pageX,i=t.changedTouches[0].pageY),(o||a)&&(a||void 0!==window.pageXOffset||(window.pageXOffset=document.documentElement.scrollLeft,window.pageYOffset=document.documentElement.scrollTop),n=t.clientX+window.pageXOffset,i=t.clientY+window.pageYOffset),e.extend(s,{pointX:n,pointY:i,cursor:o})}function m(e,t,n,i){var r=i.target;return e=e.replace(/\s/g,N+" ")+N,t.on(e,function(e){var t=r.attr("disabled");return t=!(void 0===t||null===t),r.hasClass("noUi-state-tap")||t?!1:void n(h(e),i,r.data("base").data("options"))})}function g(t){var n=this.target;return void 0===t?this.element.data("value"):(t===!0?t=this.element.data("value"):this.element.data("value",t),void(void 0!==t&&e.each(this.elements,function(){"function"==typeof this?this.call(n,t):this[0][this[1]](t)})))}function v(t,n,i){if(a(n)){var r=[],o=t.data("target");return t.data("options").direction&&(i=i?0:1),n.each(function(){e(this).on("change"+N,l(o,i)),r.push([e(this),"val"])}),r}return"string"==typeof n&&(n=[e('<input type="hidden" name="'+n+'">').appendTo(t).addClass(P[3]).change(function(e){e.stopPropagation()}),"val"]),[n]}function y(t,n,i){var r=[];return e.each(i.to[n],function(e){r=r.concat(v(t,i.to[n][e],n))}),{element:t,elements:r,target:t.data("target"),val:g}}function b(e,t){var n=e.data("target");n.hasClass(P[14])||(t||(n.addClass(P[15]),setTimeout(function(){n.removeClass(P[15])},450)),n.addClass(P[14]),u(e.data("options").block,n))}function _(e,t){var n=e.data("options");t=p(t,7),e.data("target").removeClass(P[14]),e.css(n.style,t+"%").data("pct",t),e.is(":first-child")&&e.toggleClass(P[13],t>50),n.direction&&(t=100-t),e.data("store").val(d(o(n.range,t),n))}function w(e,t){var n=e.data("base"),i=n.data("options"),r=n.data("handles"),o=0,a=100;return s(t)?(i.step&&(t=c(t,i.step)),r.length>1&&(e[0]!==r[0][0]?o=p(r[0].data("pct")+i.margin,7):a=p(r[1].data("pct")-i.margin,7)),t=Math.min(Math.max(t,o),0>a?100:a),t===e.data("pct")?[o?o:!1,100===a?!1:a]:(_(e,t),!0)):!1}function x(e,t,n,i){e.addClass(P[5]),setTimeout(function(){e.removeClass(P[5])},300),w(t,n),u(i,e.data("target")),e.data("target").change()}function k(t,n,i){var r,o=n.handles,a=t[n.point]-n.start[n.point];if(a=100*a/n.size,1===o.length){if(r=w(o[0],n.positions[0]+a),r!==!0)return void(e.inArray(o[0].data("pct"),r)>=0&&b(n.base,!i.margin))}else{var s,l,d,f;if(i.step&&(a=c(a,i.step)),s=d=n.positions[0]+a,l=f=n.positions[1]+a,0>s?(l+=-1*s,s=0):l>100&&(s-=l-100,l=100),0>d&&!s&&!o[0].data("pct"))return;if(100===l&&f>100&&100===o[1].data("pct"))return;_(o[0],s),_(o[1],l)}u(i.slide,n.target)}function S(e,t,n){1===t.handles.length&&t.handles[0].data("grab").removeClass(P[4]),e.cursor&&$.css("cursor","").off(N),j.off(N),t.target.removeClass(P[14]+" "+P[20]).change(),u(n.set,t.target)}function C(t,n,i){1===n.handles.length&&n.handles[0].data("grab").addClass(P[4]),t.stopPropagation(),m(L.move,j,k,{start:t,base:n.base,target:n.target,handles:n.handles,positions:[n.handles[0].data("pct"),n.handles[n.handles.length-1].data("pct")],point:i.orientation?"pointY":"pointX",size:i.orientation?n.base.height():n.base.width()}),m(L.end,j,S,{target:n.target,handles:n.handles}),t.cursor&&($.css("cursor",e(t.target).css("cursor")),n.handles.length>1&&n.target.addClass(P[20]),$.on("selectstart"+N,function(){return!1}))}function T(e,t,n){var i,r,o,a,s=t.base;e.stopPropagation(),n.orientation?(o=e.pointY,a=s.height()):(o=e.pointX,a=s.width()),i=f(s.data("handles"),o,n.style),r=100*(o-s.offset()[n.style])/a,x(s,i,r,[n.slide,n.set])}function E(e,t,n){var i,r,o=t.base.data("handles");r=n.orientation?e.pointY:e.pointX,r=r<t.base.offset()[n.style],i=r?0:100,r=r?0:o.length-1,x(t.base,o[r],i,[n.slide,n.set])}function D(t,n){function r(e){return 2!==e.length?!1:(e=[parseFloat(e[0]),parseFloat(e[1])],s(e[0])&&s(e[1])?e[1]<e[0]?!1:e:!1)}var o={resolution:function(e,t){switch(e){case 1:case.1:case.01:case.001:case 1e-4:case 1e-5:e=e.toString().split("."),t.decimals="1"===e[0]?0:e[1].length;break;case void 0:t.decimals=2;break;default:return!1}return!0},mark:function(e,t,n){if(!e)return t[n].mark=".",!0;switch(e){case".":case",":return!0;default:return!1}},to:function(t,n,i){function r(e){return a(e)||"string"==typeof e||"function"==typeof e||e===!1||a(e[0])&&"function"==typeof e[0][e[1]]}function o(t){var n=[[],[]];return r(t)?n[0].push(t):e.each(t,function(e,t){e>1||(r(t)?n[e].push(t):n[e]=n[e].concat(t))}),n}if(t){var s,u;for(t=o(t),n.direction&&t[1].length&&t.reverse(),s=0;s<n.handles;s++)for(u=0;u<t[s].length;u++){if(!r(t[s][u]))return!1;t[s][u]||t[s].splice(u,1)}n[i].to=t}else n[i].to=[[],[]];return!0}},u={handles:{r:!0,t:function(e){return e=parseInt(e,10),1===e||2===e}},range:{r:!0,t:function(e,t,n){return t[n]=r(e),t[n]&&t[n][0]!==t[n][1]}},start:{r:!0,t:function(t,n,i){return 1===n.handles?(e.isArray(t)&&(t=t[0]),t=parseFloat(t),n.start=[t],s(t)):(n[i]=r(t),!!n[i])}},connect:{r:!0,t:function(e,t,n){if("lower"===e)t[n]=1;else if("upper"===e)t[n]=2;else if(e===!0)t[n]=3;else{if(e!==!1)return!1;t[n]=0}return!0}},orientation:{t:function(e,t,n){switch(e){case"horizontal":t[n]=0;break;case"vertical":t[n]=1;break;default:return!1}return!0}},margin:{r:!0,t:function(e,t,n){return e=parseFloat(e),t[n]=i(t.range,e),s(e)}},direction:{r:!0,t:function(e,t,n){switch(e){case"ltr":t[n]=0;break;case"rtl":t[n]=1,t.connect=[0,2,1,3][t.connect];break;default:return!1}return!0}},behaviour:{r:!0,t:function(e,t,n){return t[n]={tap:e!==(e=e.replace("tap","")),extend:e!==(e=e.replace("extend","")),drag:e!==(e=e.replace("drag","")),fixed:e!==(e=e.replace("fixed",""))},!e.replace("none","").replace(/\-/g,"")}},serialization:{r:!0,t:function(e,t,n){return o.to(e.to,t,n)&&o.resolution(e.resolution,t)&&o.mark(e.mark,t,n)}},slide:{t:function(t){return e.isFunction(t)}},set:{t:function(t){return e.isFunction(t)}},block:{t:function(t){return e.isFunction(t)}},step:{t:function(e,t,n){return e=parseFloat(e),t[n]=i(t.range,e),s(e)}}};e.each(u,function(e,i){var r=t[e],o=void 0!==r;if(i.r&&!o||o&&!i.t(r,t,e))throw console&&console.log&&console.group&&(console.group("Invalid noUiSlider initialisation:"),console.log("Option:	",e),console.log("Value:	",r),console.log("Slider(s):	",n),console.groupEnd()),new RangeError("noUiSlider")})}function F(t){return this.data("options",e.extend(!0,{},t)),t=e.extend({handles:2,margin:0,connect:!1,direction:"ltr",behaviour:"tap",orientation:"horizontal"},t),t.serialization=t.serialization||{},D(t,this),t.style=t.orientation?"top":"left",this.each(function(){var n,i,r,o=e(this),a=[],s=e("<div/>").appendTo(o);if(o.data("base"))throw new Error("Slider was already initialized.");for(o.data("base",s).addClass([P[6],P[16+t.direction],P[10+t.orientation]].join(" ")),n=0;n<t.handles;n++)r=e("<div><div/></div>").appendTo(s),r.addClass(P[1]),r.children().addClass([P[2],P[2]+P[7+t.direction+(t.direction?-1*n:n)]].join(" ")),r.data({base:s,target:o,options:t,grab:r.children(),pct:-1}).attr("data-style",t.style),r.data({store:y(r,n,t.serialization)}),a.push(r);switch(t.connect){case 1:o.addClass(P[9]),a[0].addClass(P[12]);break;case 3:a[1].addClass(P[12]);case 2:a[0].addClass(P[9]);case 0:o.addClass(P[12])}if(s.addClass(P[0]).data({target:o,options:t,handles:a}),o.val(t.start),!t.behaviour.fixed)for(n=0;n<a.length;n++)m(L.start,a[n].children(),C,{base:s,target:o,handles:[a[n]]});t.behaviour.tap&&m(L.start,s,T,{base:s,target:o}),t.behaviour.extend&&(o.addClass(P[19]),t.behaviour.tap&&m(L.start,o,E,{base:s,target:o})),t.behaviour.drag&&(i=s.find("."+P[9]).addClass(P[18]),t.behaviour.fixed&&(i=i.add(s.children().not(i).data("grab"))),m(L.start,i,C,{base:s,target:o,handles:a}))})}function I(){var t=e(this).data("base"),n=[];return e.each(t.data("handles"),function(){n.push(e(this).data("store").val())}),1===n.length?n[0]:t.data("options").direction?n.reverse():n}function M(t,n){return e.isArray(t)||(t=[t]),this.each(function(){var i,o,a=e(this).data("base"),s=Array.prototype.slice.call(a.data("handles"),0),l=a.data("options");for(s.length>1&&(s[2]=s[0]),l.direction&&t.reverse(),o=0;o<s.length;o++)i=t[o%2],null!==i&&void 0!==i&&("string"===e.type(i)&&(i=i.replace(",",".")),i=r(l.range,parseFloat(i)),l.direction&&(i=100-i),w(s[o],i)!==!0&&s[o].data("store").val(!0),n===!0&&u(l.set,e(this)))})}function B(t){var n=[[t,""]];e.each(t.data("base").data("handles"),function(){n=n.concat(e(this).data("store").elements)}),e.each(n,function(){this.length>1&&this[0].off(N)}),t.removeClass(P.join(" ")),t.empty().removeData("base options")}function A(t){return this.each(function(){var n=e(this).val()||!1,i=e(this).data("options"),r=e.extend({},i,t);n!==!1&&B(e(this)),t&&(e(this).noUiSlider(r),n!==!1&&r.start===i.start&&e(this).val(n))})}var j=e(document),$=e("body"),N=".nui",O=e.fn.val,P=["noUi-base","noUi-origin","noUi-handle","noUi-input","noUi-active","noUi-state-tap","noUi-target","-lower","-upper","noUi-connect","noUi-horizontal","noUi-vertical","noUi-background","noUi-stacking","noUi-block","noUi-state-blocked","noUi-ltr","noUi-rtl","noUi-dragable","noUi-extended","noUi-state-drag"],L=window.navigator.pointerEnabled?{start:"pointerdown",move:"pointermove",end:"pointerup"}:window.navigator.msPointerEnabled?{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:{start:"mousedown touchstart",move:"mousemove touchmove",end:"mouseup touchend"};return e.fn.val=function(){return this.hasClass(P[6])?arguments.length?M.apply(this,arguments):I.apply(this):O.apply(this,arguments)},(n?A:F).call(this,t)}}(window.jQuery||window.Zepto),window.ST=window.ST||{},window.ST.rangeFilter=function(e,t,n,i,r,o){function a(e){return function(t){e.html(t)}}var s=o?.01:1;$(e).noUiSlider({range:t,step:s,start:[n[0],n[1]],connect:!0,serialization:{resolution:s,to:[[$(r[0]),a($(i[0]))],[$(r[1]),a($(i[1]))]]}})},window.ST=window.ST||{},function(e){var t={};e.t=function(e,n){if(null==t[e])throw new Error("No translation loaded: "+e);return _.template(t[e],n||{})},e.loadTranslations=function(e){_.extend(t,e)}}(window.ST),window.ST=window.ST||{},window.ST.renderImagePlaceholder=function(){function e(e,t){e?h.text(e):h.empty(),t?m.text(t):m.empty(),n()}function t(){f.css("display","none")}function n(){f.css("display",p)}function i(e){l.show().attr("src",e)}function r(e){g.val(e)}function o(){u.addClass("fileupload-remove-hover")}function a(){u.removeClass("fileupload-remove-hover")}var s=$("#new-image-tmpl").html(),u=$(s),l=$("img",u).hide(),c=$(".fileupload-preview-remove-image",u),d=$(".fileupload",u),f=$(".fileupload-text-container",u),p=f.css("display"),h=$(".fileupload-text",u),m=$(".fileupload-small-text",u),g=$(".listing-image-id",u);return t(),a(),{uniqueId:_.uniqueId("image_element_"),container:u,showMessage:e,hideTexts:t,fileupload:d,showPreview:i,removeLink:c,showRemove:o,hideRemove:a,setListingId:r}},window.ST.imageUploadElementManager=function(e){function t(t){var n=_.last(c);n?t.insertAfter(n):e.prepend(t),c.push(t)}function n(e){e.remove(),c=_.without(c,e)}function i(t){var n=_.last(l),i=_.last(c);n?t.insertAfter(n):i?t.insertAfter(i):e.prepend(t),l.push(t)}function r(e,t){function n(e,t,n){return e===n?t:n}l=_.map(l,_.partial(n,e,t)),e.after(t),e.remove()}function o(e){e.remove(),l=_.without(l,e)}function a(t){e.append(t),u.push(t)}function s(){u.pop().remove()}var u=[],l=[],c=[];return{addEmpty:a,addUploading:i,addPreview:t,removeEmpty:s,removeUploading:o,removePreview:n,changeStateToProcessing:r}},window.ST.imageUploader=function(e,t){function n(){var e={paramName:"listing_image[image]",url:t.saveFromFile,submit:function(e,t){t.formData={"Content-Type":ST.utils.contentTypeByFilename(t.files[0].name)}}};return o(e)}function i(e){return function(){return e}}function r(e,t){return e+t}function o(e){var n=window.ST.renderImagePlaceholder("empty");n.showMessage(ST.t("listings.form.images.select_file")),n.fileupload.show();var i={dataType:"text",dropZone:n.container,acceptFileTypes:/(\.|\/)(gif|jpe?g|png)$/i,imageMaxWidth:t.originalImageWidth,imageMaxHeight:t.originalImageHeight,loadImageMaxFileSize:t.maxImageFilesize,autoUpload:!1,messages:{acceptFileTypes:ST.t("listings.form.images.accepted_formats"),maxFileSize:ST.t("listings.form.images.file_too_large")},disableImageResize:/Android(?!.*Chrome)|Opera/.test(window.navigator&&navigator.userAgent)},r=_.extend(i,e);n.fileupload.fileupload(r).on("dragenter",function(){$(this).addClass("hover")}).on("dragleave",function(){$(this).removeClass("hover")});var o=n.fileupload.asEventStream("fileuploadadd",function(e,t){return[$(this),t]}),a=o.flatMap(function(e){var t=e[0],n=e[1];return Bacon.fromPromise(t.fileupload("process",n))});return a.onError(function(e){n.showMessage(e.files[0].error)}),a.onValue(function(){n.showMessage(ST.t("listings.form.images.select_file"))}),{element:n,stream:a}}function a(e){function n(e,t){return _.isArray(e)?_.find(e,function(e){return e.name===t}).value:e[t]}function i(e){var i=t.s3UploadPath+n(e.formData,"key"),r=e.files[0].name;return{type:"PUT",url:t.saveFromUrl,data:{filename:r,path:i}}}function r(){o.showMessage(ST.t("listings.form.images.uploading_failed"))}var o=window.ST.renderImagePlaceholder();o.fileupload.remove(),o.container.addClass("fileupload-uploading");var a=Bacon.fromPromise(e.process()),s=a.flatMap(function(e){var t=e.submit();return Bacon.fromPoll(100,function(){var t=e.progress(),n=Math.floor(t.loaded/t.total*100)+"%",i=[new Bacon.Next(n)];return t.loaded===t.total&&i.push(new Bacon.End),i}).onValue(function(e){o.showMessage(e)}),Bacon.fromBinder(function(n){return t.done(function(t){n(new Bacon.Next([e,t]))}).fail(function(){n(new Bacon.Error)}).always(function(){n(new Bacon.End)}),function(){}})}),u=s.filter(function(){return c}),l=s.filter(function(){return!c}),d=l.map(function(e){return _.last(e)}),f=u.flatMap(function(e){return Bacon.once(i(_.first(e))).ajax()}),p=Bacon.mergeAll(d,f).map(JSON.parse);return p.onError(r),a.onError(r),{element:o,stream:p}}function s(e){var t=window.ST.renderImagePlaceholder();t.fileupload.remove(),t.container.addClass("fileupload-uploading"),t.showMessage(ST.t("listings.form.images.processing"),ST.t("listings.form.images.this_may_take_a_while")),t.setListingId(e.id);var n=ST.utils.baconStreamFromAjaxPolling({url:e.urls.status},function(e){return e.ready});return n.onValue(function(){l.removeUploading(t.container)}),{element:t,stream:n}}function u(e){var t=window.ST.renderImagePlaceholder();t.fileupload.remove(),t.setListingId(e.id),t.showPreview(e.images.thumb),t.showRemove(),t.container.addClass("fileupload-preview");var n=t.removeLink.asEventStream("click").doAction(".preventDefault");n.onValue(function(){t.hideRemove(),t.showMessage(ST.t("listings.form.images.removing"))});var i=n.map(function(){return{url:e.urls.remove,type:"DELETE"}}),r=i.ajax();return r.onValue(function(){l.removePreview(t.container)}),{element:t,stream:r}}var l=ST.imageUploadElementManager($("#image-uploader-container")),c=!!t.s3Fields&&!!t.s3UploadPath,d=2,f=function(){var e=0;return function(){var n={url:t.s3UploadPath,paramName:"file",submit:function(n,i){var r=ST.utils.filenameToURLSafe(i.files[0].name);i.formData=_.extend({},t.s3Fields,{"Content-Type":ST.utils.contentTypeByFilename(i.files[0].name),key:t.s3Fields.key.replace("${index}",e++).replace("${filename}",r)})}};return o(n)}}(),p=e.length<d?d-e.length:0,h=_().range(p+1).map(function(){return c?f():n()}).each(function(e){l.addEmpty(e.element.container)}).map(function(e){return e.stream}).reduce(function(e,t){return e.merge(t)}),m=h.map(function(e){return a(e)}),g=m.flatMap(function(e){var t=e.stream.map(s);return t.onValue(function(t){l.changeStateToProcessing(e.element.container,t.element.container)}),t});m.onValue(function(e){l.addUploading(e.element.container)});var v=g.flatMap(function(e){return e.stream}),y=_.filter(e,function(e){return!e.ready}),b=_.filter(e,function(e){return e.ready}),w=_(y).map(function(e){return s(e)}).each(function(e){l.addUploading(e.element.container)}).map(function(e){return e.stream}).reduce(function(e,t){return e.merge(t)}),x=_(b).map(function(e){return u(e)}).each(function(e){l.addPreview(e.element.container)}).map(function(e){return e.stream}).reduce(function(e,t){return e.merge(t)}),k=w?v.merge(w):v,S=k.map(function(e){return u(e)});S.onValue(function(e){l.addPreview(e.element.container)});var C=S.flatMap(function(e){return e.stream}),T=x?C.merge(x):C,E=h.map(i(1)).merge(T.map(i(-1))).scan(e.length,r),D=E.map(function(e){return d>e}),F=E.map(function(e){return d>=e});T.filter(D).onValue(function(){var e=c?f():n();l.addEmpty(e.element.container)}),h.filter(F).onValue(function(){l.removeEmpty()})},window.ST=window.ST||{},ST.imageCarousel=function(e){function t(e,t,n){var i="right"===e?-1:1,r="right"===e?1:-1;t.transition({x:i*t.width()},0),t.show();var o=n.transition({x:r*n.width()},l).promise(),a=t.transition({x:0},l).promise(),s=$.when(a,o);return s.done(function(){n.hide()}),s}function n(e,n){var i=n>e,r=e>n,o=s[e],a=s[n];i&&t("left",a,o),r&&t("right",a,o)}var i=_.template($("#image-frame-template").html()),r=$("#listing-image-navi-left"),o=$("#listing-image-navi-right"),a=$("#listing-image-frame"),s=_.map(e,function(e){return $(i({url:e.images.big,aspectRatioClass:e.aspectRatio}))});_.each(s,function(e){e.hide(),a.append(e)});var u=0,l=300;s[u].show();var c=_.partial(ST.utils.prevIndex,s.length),d=_.partial(ST.utils.nextIndex,s.length),f=new Bacon.Bus,p=new Bacon.Bus,h=r.asEventStream("click").doAction(".preventDefault"),m=o.asEventStream("click").doAction(".preventDefault");f.plug(h),p.plug(m);var g=f.debounceImmediate(l).map(function(){return{value:null,fn:c}}),v=p.debounceImmediate(l).map(function(){return{value:null,fn:d}}),y=new Bacon.Bus;y.plug(g),y.plug(v);var b=y.scan(u,function(e,t){return _.isNumber(t.value)?t.value:t.fn(e)}).skipDuplicates(_.isEqual).slidingWindow(2,2);return b.onValues(n),{prevClicked:h,nextClicked:m,next:function(e){p.plug(e)},prev:function(e){f.plug(e)},show:function(e){y.plug(e.map(function(e){return{value:e}}))}}},window.ST=window.ST||{},ST.thumbnailStripe=function(e,t){function n(){return f.width()}function i(){return Math.max(x.length-Math.floor(n()/m)-2,0)}function r(){return m-n()%m/2-g}function o(e,t){var n=e.value,i=t.value,r=n>i,o=i>n,d="prev"===t.direction&&o,f="next"===t.direction&&r;a(i)||(o?d?c():s(i):f?l():u(i)),x[n].removeClass(h),x[i].addClass(h)}function a(e){var t=e*m,i=t+m,o=C*m+T*r(),a=o+n();return t>=o&&a>=i}function s(e){var t=0===C&&0===T,n=e===x.length-1;n?T=2:t?T=1:C++,d(C,T)}function u(e){var t=C===i()&&2===T,n=0===e;n?T=0:t?T=1:C--,d(C,T)}function l(){T=0,C=0,d(C,T)}function c(){T=2,C=i(),d(C,T)}function d(e,t){y.transition({x:-1*(e*m+t*r())})}var f=$("#thumbnail-stripe"),p=_.template($("#image-thumbnail-template").html());t=t||{};var h=t.selectedClass||"selected",m=t.thumbnailWidth||60,g=t.paddingAdjustment||0,v=300;f.empty();var y=$("<div />");y.css("position","absolute"),y.css("left",["-",g,"px"].join("")),y.css("right",["-",g,"px"].join("")),f.append(y);var b,w=[],x=_.map(e,function(e,t){var n=$(p({url:e.images.thumb}));return w.push(n.asEventStream("click").map(function(){return t})),n}),k=Bacon.mergeAll.apply(null,w).debounceImmediate(v);_.each(x,function(e){y.append(e)}),x.length<2&&f.hide(),b=x.length*m+2*g,y.width(b);var S=0,C=0,T=0,E=_.partial(ST.utils.nextIndex,x.length),D=_.partial(ST.utils.prevIndex,x.length),F=new Bacon.Bus,I=new Bacon.Bus;x[S].addClass(h);var M=I.map(function(){return{value:null,fn:D,direction:"prev"}}),B=F.map(function(){return{value:null,fn:E,direction:"next"}}),A=k.map(function(e){return{value:e}}),j=M.merge(B).merge(A).scan({value:S},function(e,t){var n=null!=t.value?t.value:t.fn(e.value);return{direction:t.direction,value:n}}).skipDuplicates(_.isEqual).slidingWindow(2,2);return j.onValues(o),{next:function(e){F.plug(e.debounceImmediate(v))},prev:function(e){I.plug(e.debounceImmediate(v))},show:k}},window.ST=window.ST||{},window.ST.listing=function(){$("#add-to-updates-email").on("click",function(){var e=$(this).find("#add-to-updates-email-text"),t=e.data("action-loading"),n=e.data("action-success"),i=e.data("action-error"),r=$(this).attr("href");e.html(t),$.ajax({url:r,type:"PUT"}).done(function(){e.html(n)}).fail(function(){e.html(i)})})},window.ST=window.ST||{},window.ST.listingImages=function(e){function t(){return ST.thumbnailStripe(e,{thumbnailWidth:64,paddingAdjustment:2})}function n(){return ST.imageCarousel(e)}function i(e){return e.keyCode||e.which}var r=n(),o=t(),a=37,s=39,u=_.curry(_.isEqual,2),l=$(document).asEventStream("keyup").map(i),c=l.filter(u(a)),d=l.filter(u(s));o.next(r.nextClicked),o.next(d),o.prev(r.prevClicked),o.prev(c),r.next(d),r.prev(c),r.show(o.show)},window.ST=window.ST||{},function(e){e.initializeFromToDatePicker=function(t){var n=new Date,i=new Date(n.getFullYear(),n.getMonth(),n.getDate(),0,0,0,0),r=$("#"+t),o=r.data("locale"),a={startDate:i,inputs:[$("#start-on"),$("#end-on")],onRender:function(e){return e.valueOf()<i.valueOf()?"disabled":""}};"en"!==o&&(a.language=o);var s=r.datepicker(a),u={"booking-start-output":$("#booking-start-output"),"booking-end-output":$("#booking-end-output")};s.on("changeDate",function(t){var n=t.dates[0],i=$(t.target).data("output"),r=u[i];r.val(e.utils.toISODate(n))})}}(window.ST),window.ST.onFollowButtonAjaxComplete=function(e,t){var n=$(e.target),i=$(t.responseText);$(".button-hoverable",i).addClass("button-disable-hover"),i.on("mouseleave",function(){$(".button-disable-hover",i).removeClass("button-disable-hover")}),n.parents(".follow-button-container:first").replaceWith(i),$(".follow-button",i).on("ajax:complete",window.ST.onFollowButtonAjaxComplete)},window.ST.initializeFollowButtons=function(){$(".follow-button").on("ajax:complete",window.ST.onFollowButtonAjaxComplete)},window.ST=window.ST||{},function(e){e.initializePayPalAccountForm=function(e){var t=$("#"+e),n=new Image;n.src="https://s3.amazonaws.com/sharetribe/assets/ajax-loader-grey.gif",n.className="send-button-loading-img",t.validate({submitHandler:function(e){var t=$(e),i=t.find(".send_button");i.hasClass("send-button-loading")||(t.find(".send-button-wrapper").append(n),i.addClass("send-button-loading").blur(),e.submit())}})},e.initializePayPalPreferencesForm=function(e,t,n){var i=$("#"+e);i.validate({errorPlacement:function(e,t){e.appendTo(t.parent())},rules:{"paypal_preferences_form[commission_from_seller]":{required:!0,number_min:t[0],number_max:t[1]},"paypal_preferences_form[minimum_listing_price]":{required:!0,number_min:n}}})}}(window.ST),window.ST=window.ST||{},ST.transaction=function(e){function t(e){return e.op_status_url?ST.utils.baconStreamFromAjaxPolling({url:e.op_status_url},function(e){return e.completed}).flatMap(function(t){var n=t.result;return n.success?n:new Bacon.Error({errorMsg:e.op_error_msg})}):new Bacon.Error({errorMsg:e.error_msg})}function n(e){var t=new Image;t.src="https://s3.amazonaws.com/sharetribe/assets/ajax-loader-grey.gif",t.className="paypal-button-loading-img";var n=$(t);return e.find(".paypal-button-wrapper").append(t),n.hide(),n}function i(e,t){t===!0?e.show():e.hide()}function r(e){window.location=e.data.redirect_url}function o(e){ST.utils.showError(e.errorMsg,"error")}function a(a){var s=$("#"+a),u=s.attr("action"),l=n(s),c=new Bacon.Bus,d=s.asEventStream("submit",function(e){return e.preventDefault(),s.serialize()}).filter(c.not().toProperty(!0)),f=d.flatMapLatest(function(e){return Bacon.$.ajaxPost(u,e)}).flatMapLatest(t);c.plug(d.map(!0)),c.plug(f.map(!0).mapError(!1)),c.skipDuplicates().onValue(e.partial(i,l)),f.onValue(r),f.onError(o)}function s(e,t){ST.utils.baconStreamFromAjaxPolling({url:e},function(e){return e.completed}).onValue(function(){window.location=t})}return{initializePayPalBuyForm:a,initializeCreatePaymentPoller:s}}(_);